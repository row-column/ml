微型机 与 应用 
 WEIXINGJI   YU   YINGYONG 
 2000 　 Vol.19 　 No.5 　 P.20 - 23 
 
 
 
 
 ATA   接口技术 
 伍红兵 　 沈鑫 剡 
 摘要 ： 目前 微机 中 最为 流行 的 硬盘 接口 的 技术细节 ， 为 硬盘 接口 设计 提供 了 全面 的 技术 信息 。 
 关键词 ： 硬盘 接口   ATA 标准   IDE 接口   LBA 模式 
 1   ATA 简介 
 　 　 硬盘 接口 IDE （ Integrated   Drive   Electronies ） 也 称 AT 总线 接口 ， 是 当前 新型 硬盘驱动器 普遍 采用 的 一种 接口 。 它 最早 由 Texan 和 Compaq 公司 提出 ， 目的 是 把 硬盘 控制器 嵌入 到 驱动器 中 。 1988 年 10 月 ， ANSI 中 的 X3T9 ． 2 工作组 的 一个 委员会 开始 讨论 IDE 的 有关 问题 。 1993 年 2 月 发表 了 该 标准 的 3 ． 1 版本 ， 使 其 成为 了 正式 的 ANSI 标准 ， 并 赋予 了 一个 新 的 名称 - - ATA （ AT   Attachment ） 。 从 概念 上 说 ， ATA 与 IDE 具有 基本相同 的 含义 。 
 　 　 随着 软件 要求 的 提高 及 硬盘驱动器 技术 的 进步 ， ATA 标准 也 在 不断 地 改进 ， 近几年 出现 了 以下 几个 新 版本 。 
 　 　 （ 1 ） ATA － 2 
 　 　 这一 标准 兼容 ATA ， 并 扩展 了 一些 功能 ， 它 不仅 增加 了 faster   PIO 模式 和 DMA 模式 ， 而且 提高 了 即插即用 性及 与 未来 版本 的 兼容性 。 同时 它 还 增加 了 一种 新 的 寻址 方式 - - LBA 。 
 　 　 （ 2 ） ATA － 3 
 　 　 这是 最新 的 版本 ， 其 主要 特征 是 ： 提高 了 稳定性 ， 尤其 是 PIO   mode   4 的 稳定性 ； 提供 了 一种 简单 的 基于 口令 的 安全 方案 ； 更 复杂 的 电源 管理 ； 自我 监视 、 分析 、 报告 技术  S ． M ． A ． R ． T ．  ， 使得 驱动器 能 警告 用户 一些 紧急 错误 。 ATA － 3 并 没有 定义 一种 更快 的 模式 。 虽然 一些 设备 厂商 推出 “ mode   5 ” 的 设备 ， 但 并 不是 指 一种 比 ATA － 2 更新 的 PIO 模式 。 
 　 　 （ 3 ） Ultra － ATA 
 　 　 Ultra － ATA 在 概念 上 类似 于 Ultra － SCSI ， 它 在 目前 的 ATA － 3 标准 和 未来 的 ATA － 4 标准  目前 还 未 完成  之间 架起 了 一座 桥梁 。 它 增加 了 一种 新 的 、 高性能 的 模式 - - DMA ／ 33 ， 它 的 带宽 位为 33MB ／ s ， 2 倍 于 DMA   mode   2 。 Intel 的 Pentium   Ⅱ 芯片组 和 TX   Pentium 芯片组 支持 这种 模式 。 
 　 　 值得一提的是 以下 几个 容易 混淆 的 名词 - - EIDE 、 Fast － ATA 。 EIDE （ Enhanced   IDE ） 是 由 Western   Digital 公司 提出 的 一个 用于 营销 的 商业 名称 ， 它 建立 在 ATA － 2 和 ATAPI 这 二个 事实标准 之上 。 Fast － ATA 则 是 为了 与 WD 公司 竞争 ， 由 Seagate 和 Quantum 发布 的 名称 ， 但 它 只 建立 在 ATA － 2 标准 之上 。 
 2   IDE 接口定义 
 　 　 IDE 接口 的 ATA 标准 包含 信号电缆 和 电源线 的 电器 特性 ， 该 标准 考虑 到 新 技术 的 发展 ， 不仅 适用 于 通用 的 5V 逻辑 ， 也 适用 于 3 ． 3V 的 电路 逻辑 。 IDE 电缆 长度 小于 46cm ， 除 DASP 、 PDIAG 、 IOCS16 和 SPSYNC ： PSEL 信号 外 ， 几乎 所有 信号 都 使用 TTL 电平 线路 收发器 ， IDE 接口 引脚 定义 如表 1 所示 。 
 表 1   IDE 接口 引脚 定义 
 引脚 信号 信号 描述 信号 方向 引脚 信号 信号 描述 信号 方向 
 1RSET 复位 I2GND 地 I / O 
 3DD7 数据位 7I / O4DD8 数据位 8I / O 
 5DD6 数据位 6I / O6DD9 数据位 9I / O 
 7DD5 数据位 5I / O8DD10 数据位 10I / O 
 9DD4 数据位 4I / O10DD11 数据位 11I / O 
 11DD3 数据位 3I / O12DD12 数据位 12I / O 
 13DD2 数据位 2I / O14DD13 数据位 13I / O 
 15DD1 数据位 1I / O16DD14 数据位 14I / O 
 17DD0 数据位 0I / O18DD15 数据位 15I / O 
 19GND 地 　 20N . C 未用 　 
 21DMARQDMA 请求 O22GND 地 　 
 23DIOW / 写 选通 I24GND 地 　 
 25DIOR / 读选通 I26GND 地 　 
 27IORDY 通道 就绪 O28DPSYNC : CXEL 同步 电缆 选择 　 
 29DMACK / DMA 应答 O30GND 地 　 
 31INTRQ / 中断请求 O32IOCS13 / 16 为 IOO 
 33DA1 地址 1I34PDIAG / 诊断 完成 O 
 35DA0 地址 0I36DA2 地址 2I 
 37CS1FX / 片选 0I38CS3FX / 片选 1I 
 39DASP / 驱动器 激活 O40GND 地 　 
 
 3   IDE 接口 时序 
 　 　 IDE 接口 有 二种 数据 传送 方式 ： 一种 是 可编程 I ／ O （ PIO ） ， 另 一种 是 DMA 方式 。 ATA 标准 为 PIO 和 DMA 方式 定义 了 三种 工作 模式 ， 模式 0 是 常用 的 ， 也 是 最慢 的 1 种 方式 。 可以 从 “ 确认 驱动器 ” 命令 的 返回 参数 中 了解 驱动器 当前 的 工作 模式 。 
 　 　 （ 1 ） 通过 PIO 传送数据 ： 在 该 方式 下 ， CPU 对 控制器 的 访问 都 是 通过 PIO 进行 的 ， 包括 从 控制器 读取 状态 信息 和 错误信息 ， 以及 向 控制器发送 命令 和 参数 ， 时序 如图 1 所示 。 
 
 图 1   IDE 接口 时序 ( PIO 模式 ) 
 　 　 对于 1 个 PIO 数据传输 ， CPU 置 地址 信号 DA0 、 DA1 、 DA2 、 CS1FX ／ 、 CS3FX ／ 有效 后 （ 大约 70ns ） ， DIOW ／ 或 DIOR ／ 有效 ， 同时 ， CPU 或 控制器 把 传送数据 放置 到 数据总线 上 ， 根据 数据 传送 方向 ， 控制器 或 CPU 读取数据 线上 的 数据 。 操作 完成 后 ， 释放 数据线 、 地址 线 和 IOCS16 ／ 线 ， 这样 ， 一个 操作 周期 结束 。 
 　 　 （ 2 ） 单字 DMA 方式 ： 这种 方式 主要 用于 多用户 系统 中 ， 在 I ／ O 操作 的 准备 阶段 ， CPU 可以 处理 其它 事务 ， 单字 DMA 时序 如图 2 所示 。 
 
 图 2   IDE 接口 时序 ( 单字 DMA 模式 ) 
 　 　 当 控制器 数据 准备 好后 ， 置 DMARQ 信号 ， 启动 1 次 DMA 操作 ， DMA 控制器 以 DMACK ／ 信号 作为 DMA 请求 的 应答 信号 ， 同时 使 DIOR ／ 为 低 ， 完成 1 个 数据 的 传输 ， 然后 控制器 撤销 DMARQ 信号 ， 释放 数据线 ， 准备 启动 下 一次 操作 。 
 　 　 （ 3 ） 多字 DMA 方式 ： 这种 方式 与 单字 DMA 方式 的 操作 十分相似 ， 只是 在 1 个 字 传输 结束 后 ， 控制器 仍然 保持 DMARQ 信号 有效 ， 直到 最后 1 个 字 传输 完成 。 多字 DMA 时序 如图 3 所示 。 
 
 图 3   IDE 接口 时序 ( 多字 DMA 模式 ) 
 4   IDE 寄存器 及 IDE 命令 
 　 　 IDE 控制器 中有 2 组 寄存器 ： 命令 寄存器 和 控制 寄存器 。 命令 寄存器 被 用来 接受命令 和 传送数据 ； 控制 寄存器 组 用作 磁盘 控制 。 这 2 个 寄存器 组用 CS1FX ／ 和 CS3FX ／ 信号 区分 。 CS1FX ／ 的 地址 范围 是 1F0H ～ 1F7H ， CS3FX ／ 的 地址 范围 是 3F0H ～ 3F7H 。 具体 如表 2 所示 。 
 表 2   地址 译码 
 信号 地址 
 CS1FXCS3FXDA2DA1DA0 
 100001F0 
 100011F1 
 100101F2 
 100111F3 
 101001F4 
 101011F5 
 101101F6 
 101111F7 
 011103F6 
 011113F7 
 01 * * * 未 用 
 
 　 　 目前 ， 许多 计算机 配置 了 2 个 IDE 接口 ， 对于 第 2 个 IDE 接口 ， 这 2 个 信号 的 地址 范围 分别 是 170H ～ 177H 和 370H ～ 377H 。 
 　 　 在 ATA 标准 中以 寄存器 方式 传送数据 、 命令 和 地址 。 这些 寄存器 除 数据 寄存器 为 16 位 以外 ， 其它 寄存器 均 为 8 位 。 PC机 分配 给 寄存器 的 地址 有 二组 ， 一组 为 1F0H ～ 1F8H ， 另一组 为 170H ～ 178H 。 通常 ATA 适配器 采用 IOQ14 中断 。 
 　 　 （ 1 ） 数据 寄存器 （ 1F0H   R ／ W ） ： 这是 一个 16 位 PIO 数据 寄存器 ， 用于 对 扇区 的 读 、 写 和 格式化 操作 。 CPU 通过 该 寄存器 向 硬盘 控制 寄存器 写入 或 从 硬盘 控制 寄存器 读出 扇区 缓冲区 的 数据 ， 如 使用 “ REP   OUTSW ” 或 “ REP   INSW ” 指令 ， 通过 数据 寄存器 也 可以 进行 DMA 方式 的 数据传输 。 
 　 　 错误 寄存器 （ 1F1H   R ） ： 该 寄存器 是 1 个 8 位 的 寄存器 ， 它 反映 控制 寄存器 在 诊断 方式 或 操作 方式 下 的 错误 原因 。 在 不同 方式 下 有 不同 的 意义 。 
 　 　 ① 诊断 方式 ： 硬盘 控制器 在 加电 、 复位 或 执行 驱动器 诊断 命令 以后 的 工作 方式 。 此时 驱动器 包含 诊断 码 ， 该 代码 反映 了 诊断 后 的 结果 ， 如表 3 所示 。 
 表 3   诊断 代码 
 代码 意义 代码 意义 
 10H 无 错误 04HECC 电路 错 
 02H 控制器 错 05H 控制器 处理机 错 
 03H 数据 缓冲区 错 8XH 从 驱动器 诊断 代码 
 
 　 　 ② 操作 方式 ： 硬盘 控制器 执行 除 诊断 命令 以外 的 所有 命令 后 进入 该 方式 ， 如果 状态 寄存器 的 ERR ＝ 1 ， 则 该 寄存器 包含 命令 执行 后 的 错误代码 ， 错误 寄存器 的 内容 如表 4 所示 。 
 表 4   错误 寄存器 
 D7D6D5D4D3D2D1D0 
 BBKUNCMCIDNFMCRABRTTKONFAMNF 
 
 　 　 BBK （ Bad   block   detected ） ： 坏 扇区 
 　 　 UNC （ uncorrectable   data   error ） ： ECC 错误 ； 
 　 　 MC （ media   change ） ： 介质 改变 ； 
 　 　 IDNF （ ID   not   found ） ： ID 没 找到 ； 
 　 　 MCR （ media   change   requested ） ： 介质 改变 请求 ； 
 　 　 ABRT （ abouted   command ） ： 命令 放弃 ； 
 　 　 TKONF （ track   0   not   found ） ： 0 磁道 错 ； 
 　 　 AMNF （ address   mark   not   found ） ： 地址 标志 没 找到 。 
 　 　 （ 2 ） 特性 寄存器 （ 1F1H   W ） ： 一般 情况 下 不 使用 该 寄存器 ， 根据 ATA 标准 它 被 用来 设置 接口 的 某些 特性 。 
 　 　 （ 3 ） 扇区 数 寄存器 （ 1F2   R ／ W ） ： 它 记录 读 、 写 命令 的 扇区 数 。 当多 扇区 传输 时 ， 每 完成 1 个 扇区 操作 ， 该 寄存器 自动 减 1 ， 直至 为 0 。 如果 初值 为 0 ， 则 表示 256 。 如果 有 错误 发生 ， 该 寄存器 包含 已经 操作 成功 的 扇区 数 。 
 　 　 （ 4 ） 扇区 号 寄存器 （ 1F3H   R ／ W ） ： 它 记录 读 、 写 和校验 命令 指定 的 起始 扇区 号 。 如果 驱动器 使用 逻辑 块 寻址 （ LBA ， logical   lock   address ） 方式 ， 该 寄存器 记录 逻辑 扇区 号 的 0 字节 。 
 　 　 （ 5 ） 柱面 号 寄存器 ： （ 1F4H   1F5H   R ／ W ） ： 它 记录 读 、 写 、 校验 、 寻址 和 格式化 命令 指定 的 柱面 号 ， ATA 标准 允许 65536 柱面 ， 但 早期 的 IDE 控制器 中 只 允许 1024 个 柱面 。 低 8 位 在 1F4H 寄存器 中 ， 高 8 位 在 1F5H 寄存器 中 。 如果 是 LBA 寻址 方式 ， 这 2 个 寄存器 包含 起始 扇区 的 1 和 2 字节 。 
 　 　 （ 6 ） 驱动器 ／ 磁头 寄存器 （ 1F6H   R ／ W ） ： 它 记录 读 、 写 、 校验 、 寻道 和 格式化 命令 指定 的 驱动器 号 、 磁头 号 和 寻址 方式 。 其 定义 如表 5 所示 。 
 表 5   驱动器 / 磁头 寄存器 定义 
 D7D6D5D4D3D2D1D0 
 1L1DRVHS3HS2HS1HS0 
 
 　 　 HS0 ～ HS3 （ 磁头 选择 ） ： 在 LBA 方式 中 ， 是 逻辑 扇区 号 的 高 4 位 。 
 　 　 DRV （ 驱动器 选择 ） ： 0 选择 主 驱动器 ， 1 选择 从 驱动器 。 
 　 　 L （ LBA 方式 ） ： L ＝ 1 ， 置 驱动器 为 LBA 模式 ； L ＝ 0 ， 置 驱动器 为 CHS 模式 。 
 　 　 （ 7 ） 状态 寄存器 （ 1F7H   R ） ： 它 反映 硬盘驱动器 执行命令 后 的 状态 ， 读该 寄存器 要 清除 中断请求 信号 ， 如果 要 避免 清除 中断 ， 可以 读 辅助 状态 寄存器 3F6H ， 这 2 个 寄存器 的 内容 完全相同 ， 其 定义 如表 6 所示 。 
 表 6   状态 寄存器 定义 
 D7D6D5D4D3D2D1D0 
 BSYDRDYDWFDSCDRQCORRIDXERR 
 
 　 　 BSY ： 驱动器 忙 ； 
 　 　 DRDY ： 驱动器 准备 好 ； 
 　 　 DWF ： 驱动器 失败 ； 
 　 　 DSC ： 寻 道 结束 ； 
 　 　 DRQ ： 请求 服务 ， 驱动器 请求 通过 寄存器 与 处理器 交换 1 个 字节 数据 ； 
 　 　 CORR ： 当 可以 纠正 的 读 错误 发生 时 ， 该 位置 1 ， 数据传输 继续 进行 ； 
 　 　 IDX ： 收到 索引 信号 ； 
 　 　 ERR ： 命令 执行 出错 。 
 　 　 命令 寄存器 （ 1F7H   W ） ： 该 寄存器 接收 处理器 输出 的 HDC 命令 ， 命令 格式 和 含义 如表 7 所示 。 其中 12 种 是 强制性 的 （ M ） ， 其它 是 选择性 的 （ O ） 。 有些 命令 有 2 个 操作码 ， 后 1 个 是 早期 操作码 ， 有 的 驱动器 上 仍 在 使用 ， 如 CONNER 驱动器 。 
 表 7   命令 代码 
 命令 名 代码 O / M 命令 名 代码 O / M 
 承认 介质 改变 DBHO 长读 ( 长读 - 禁止 重试 ) 22H , 23HM 
 启动 DCH , DDHO 扇区 读 校验 ( 禁止 重试 ) 40H , 41HM 
 检查 电源 模式 98H , E5HO 复位 E7HO 
 门锁 DEHO 恢复 驱动器 状态 EAHO 
 开锁 DFHO 寻道 7XHM 
 驱动器 诊断 90HM 设置 特性 参数 EFHO 
 格式化 磁道 50HM 设置 多 扇区 模式 C6HO 
 确认 驱动器 ECHO 设置 休眠 模式 99H , E6HO 
 空闲 97H , E3HO 设置 准备 模式 96H , E2HO 
 立即 进入 空闲 95H , E1HO 立即 进入 准备 模式 94H , E0HO 
 初始化 驱动器 参数 91HM 写 扇区 缓冲区 E8HO 
 预 补偿 1XHMDMA 写 ( DMA 写 - 禁止 重试 ) CAH , CBHO 
 读 扇区 缓冲区 E4HO 多 扇区 写 C5HO 
 DMA 读 ( DMA 读 - 禁止 重试 ) C8H , 09HO 部分 写 E9HO 
 读 驱动器 状态 E9HO 写 扇区 ( 写 扇区 - 禁止 重试 ) 30H , 31HM 
 多 扇区 读 C4HO 长写 ( 长写 - 禁止 重试 ) 32H , 33HM 
 读 扇区 ( 读 扇区 - 禁止 重试 ) 20H , 21HM 写校 检 3CHO 
 
 　 　 辅助 状态 寄存器 （ 3F6H   R ） ： 它 包含 与 状态 寄存器 相同 的 内容 ， 但读 该 寄存器 时 不会 清除 中断请求 信号 。 
 　 　 硬盘 控制 寄存器 （ 3F6H   W ） ： 该 寄存器 定义 如表 8 所示 。 
 表 8   硬盘 控制 寄存器 
 D7D6D5D4D3D2D1D0 
 - - - - 1SRSTIEN / 0 
 
 　 　 SRST ： 软件 复位 ， 当该 位为 1 ， 复位 驱动器 。 
 　 　 IEN ／ ： 中断 允许 位 ， 该位 为 0 ， 允许 中断 。 
 　 　 驱动器 地址 寄存器 （ 3F7H   R ） ： 该 寄存器 包含 命令 执行 后 的 某些 信息 ， 它 与 软盘驱动器 共享 ， D7 位是 软盘驱动器 的 更换 磁盘 位 。 寄存器 的 所有 位 都 是 负 逻辑 。 其 定义 如表 9 所示 。 
 表 9   驱动器 地址 寄存器 
 D7D6D5D4D3D2D1D0 
 - WTG / HS3 / HS2 / HS1 / HS0 / DS1 / DS0 / 
 
 　 　 WTG ／ ： 写 操作 门控 信号 ； 
 　 　 HS3 ／ ～ HS0 ／ ： 当前 选择 头号 的 反码 ； 
 　 　 DS1 ／ ： 该位 为 0 ， 选从 驱动器 ； 
 　 　 DS0 ／ ： 该位 为 0 ， 选主 驱动器 。 
 5   硬盘 的 编址 方式 
 　 　 ATA 标准 允许 65536 个 柱面 ， 每个 扇区 512B 。 扇区 寻址 有 2 种 方式 ： 物理 寻址 方式 和 逻辑 寻址 方式 。 
 　 　 物理 寻址 方式 （ CHS 方式 ） ： 用 柱面 、 磁头 和 扇区 号 表示 1 个 特定 的 扇区 。 起始 扇区 是 0 磁道 、 0 磁头 、 1 扇区 ， 接下来 是 2 扇区 ， 直到 E0F 扇区 ， 接下来 是 同一 柱面 1 头 、 1 扇区 … … 。   
 　 　 逻辑 地址 方式 （ LBA 方式 ） ： 对于 参数 寄存器 来说 ， 其 柱面 值 最大 为 65536 ， 磁头数 最大 为 16 ， 扇区 最大 为 255 。 因此 参数 寄存器 可 支持 的 最大 磁盘 容量 为 65536 ＊ 16 ＊ 255 ＝ 13 ． 69GB 。 而 BIOS 所能 支持 的 最大值 分别 为 1024 、 255 、 63 ， 支持 的 最大 容量 为 1024 ＊ 255 ＊ 63 ＝ 8 ． 4GB 。 
 　 　 IDE 接口 对 磁盘 的 容量 限制 是 由 BIOS 和 参数 寄存器 二者 结合 产生 的 。 因此 柱面 、 磁头 、 扇区 数 被 限制 在 1024 、 16 、 63 ， 最大 只能 支持 1024 ＊ 16 ＊ 63 ＝ 528MB 。 采用 逻辑 块 方式 寻址 可以 突破 528MB 的 容量 限制 。 该 方式 以 28 位 的 宽度 可 寻址 到 228 ＝ 268435455 块 扇区 ， 容量 达 137GB 。 如表 10 所示 。 
 表 10   LBA 编址 
 寄存器 名 D7D6D5D4D3D2D1D0 
 起始 扇区 寄存器 ( 1F3H ) LBA7LBA6LBA5LBA4LBA3LBA2LBA1LBA0 
 柱面 号 低字节 寄存器 ( 1F4H ) LBA15LBA14LBA13LBA12LBA11LBA10LBA9LBA8 
 柱面 号 高字节 寄存器 ( 1F5H ) LBA23LBA22LBA21LBA20LBA19LBA18LBA17LBA16 
 驱动器 / 磁头 号 寄存器 ( 1F6H ) 1LBA1DRVLBA27LBA26LBA25LBA24 
 
 　 　 逻辑 块 地址 与 物理地址 的 关系 为 ： LBA 地址 ＝ （ 柱面 号 ＊ 磁头数 ＋ 磁头 号 ） ＊ 扇区 数 ＋ 扇区 数 － 1 
 　 　 采用 LBA 方式 寻址 ， 没有 磁头 和 磁道 的 转换 操作 ， 在 访问 连续 扇区 时 ， 操作速度 比 物理地址 方式 要 快 。 
 　 　 LBA 寻址 方式 虽然 需要 BIOS 做些 修改 ， 但 它 与 Microsoft 和 IBM 的 INT13 功能 扩展 规范 是 兼容 的 。 为了 能够 用 LBA 方式 存取 大于 528MB 的 硬盘 ， IDE 提供 了 二种 方式 供 主机 系统 选择 ， 这 二种 方式 均 在 CMOS 中 设置 。 
 　 　 第 1 种 方式 称为 自动 配置 ， 这 主要 是 向 那些 不用 BIOS 存取 磁盘 的 操作系统 （ 如 Netware 和 UNIX ） 提供 的 。 它 运用 标准 DPT （ 磁盘 参数表 ） 从 IDE 驱动器 上 获得 有关 驱动器 容量 的 信息 传向 操作系统 。 
 　 　 第 2 种 方式 是 为 DOS 和 WINDOWS 设计 的 ， 称为 自动 转换 。 在 CMOS 设置 中 选择 这种 类型 、 主机 加电 初始化 时 ， BIOS 会 创建 1 张 EDPT （ 增强型 磁盘 参数表 ） 。 EDPT 表 包含 2 组 驱动器 参数 ： 一组 来自 Identify 命令 获取 的 驱动器 信息 ； 另一组 则 是 BIOS 给 操作系统 的 ， 这些 信息 不是 驱动器 返回 信息 的 简单 拷贝 ， 它 还要 做些 转换 。 根据 Identify 命令 返回 的 信息 ， BIOS 将 实际 的 CHS 转换成 IDE 的 CHS 或者 转换成 LBA 的 CHS ， 能够 支持 的 最大 磁盘 容量 为 8 ． 4GB ， 而且 BIOS 改动 最小 。 
 6   接口 设计 
 　 　 由于 IDE 驱动器 的 控制器 包含 在 驱动器 的 内部 ， 使得 IDE 接口 设计 比较简单 。 接口卡 除了 提供 IDE 接口 所 必需 的 片选 信号 和 控制 信号 ， 还要 提供 控制 对 硬盘 和 软盘 共享 的 I ／ O 端口 3F7H 进行 访问 所 必需 的 逻辑 。 图 4 、 图 5 为 1 个 具有 缓冲 的 IDE 硬盘 接口 的 电路设计 。 
 
 图 4   具有 缓冲 的 IDE 硬盘 接口 的 电路 
 
 图 5   D7 控制 逻辑 
 伍红兵 （ 南京 工程兵 工程学院 计算机 教研室  210007 ） 
 沈鑫 剡 （ 南京 工程兵 工程学院 计算机 教研室  210007 ） 
 参考文献 
 ［ 1 ］ Schmidt   F ． The   SCSI   Bus   and   IDE   Interface ． AD －   DISON － WESLEY ， 19932   张载 鸿 ． 微机 接口技术 教程 ． 北京 ： 清华大学出版社 ， 1992 
 收稿 日期 ： 1999 － 12 － 11 
