计算机 工程 
 COMPUTER   ENGINEERING 
 1999 年   第 25 卷   第 10 期   Vol.25   No.10   1999 
 
 
 
 一种 适于 多媒体信息 传输 的 局域网 协议 
 白 成林 
 摘要 ： 为了 在 现有 的 局域网 中 有效 地 传输 多媒体信息 ， 提出 一种 采用 避免 冲突 开头 的 多路 访问 星型 高速 局域网 协议 ， 通过 它 可 充分利用网络 的 传输 能力 ， 有效 地 传输 诸如 视频 、 音频 、 图象 、 图形 、 文本 、 动画 等 媒体 信息 。 
 关键词 ： 多媒体通信 ； 局域网 ； 协议 
 A   LAN   Protocol   Suitable   for   Transmission   of   Multimedia   Information 
 Bai   Chenglin 
 ( Department   of   Communication   Engineering   of   Liaocheng   Teachers   College , Liaocheng252059 ) 
 【 Abstract 】 In   order   to   transmit   multimedia   information   on   current   Local   Area   Network   efficiently , a   new   protocol   called   the   colision   avoidance   broadcast   star ( CABS ) network   protocols   for   high   speed   LAN   is   proposed   in   this   paper . Adopting   this   protocol , the   multimedia   information   system   can   transmit   efficiently   video , audio , image , graphics , text   and   animation   on   a   unique   LAN . 
 【 Key   words 】 Multimedia   communication ; LAN ; Protocol 
 　 　 多媒体通信 始终 是 多媒体 领域 中 的 重要 研究 方向 。 目前 ， 研究 主要 集中 在 两个 方面 ： 新型 网络 以及 对 高层 协议 进行 修改 和 扩充 。 为了 便于 多媒体信息 的 传输 ， 很多 机构 对 新型 网络 进行 了 研究 ， 其中 最 引人注目 的 是 基于 异步 传输 模式 ( ATM ) 的 宽带 综合 业务 数据网 ( B - ISDN ) 。 新型 网络 一般 以 光纤 为 传输 介质 ， 以 快速 交换 技术 为 传输 模式 ， 向 高层 提供 几百 兆 甚至 上 千兆 的 可用 带宽 ， 使 多媒体信息 的 传输 成为 可能 。 而 对 高层 协议 的 扩充 则 是 基于 特定 的 应用 。 
 　 　 为了 实现 大规模 传输 多媒体信息 ， 对于 现有 的 局域网 ， 人们 提出 各种各样 的 混合 协议 ， 其 基本 思想 是 使 网络 在 轻载 时 保持 随机 信道 协议 传输 延迟 小 的 优点 ， 而 在 重载 时 又 具有 控制 信道 协议 所 具有 的 高通量 ； 所 采用 的 方法 是 通过 利用 一部分 信道容量 来 建立 站间 传输 的 规划 ， 以 减少 或 避免 冲突 。 不过 ， 上述 方法 存在 一种 不可避免 的 部分 信道 损失 ， 使 重载 时 信道 利用率 下降 ， 延迟 增加 。 为了 克服 其 缺点 ， Albanese 提出 了 采用 硬件 避免 冲突 开关 的 方法 [ 1 ] 。 轻载 时 开关 不起作用 ， 网络 按 随机 协议 进行 ； 重载 时 ， 利用 开关 使 信道 始终 只 被 一个 站 动态 占用 ， 从而 避免 了 冲突 的 产生 。 但 对于 这种 方法 ， 如果 在 开关电路 动作 时间 内有 一个 站 以上 的 包 到达 ， 仍会 产生 冲突 ， 虽然 发生冲突 的 概率 较 小 ， 但是 随着 传输速率 的 增加 ， 冲突 概率 迅速 增加 ， 而且 其包 的 重发 采用 非 延迟 重 发 方式 ， 一旦 发生冲突 ， 会 不断 冲突 下去 ， 使 系统 锁死 。 在 对 Albanese 提出 的 开关电路 作 了 改进 后 ， 设计 了 一种 能够 完全避免 冲突 的 新型 开关 结构 ， 给出 了 电子 开关 和 光子 开关 的 实现 方案 ， 对 该 结构 的 网络协议 作 了 描述 和 性能 分析 ， 并 与 CSMA / CD 协议 及其 它 混合 协议 进行 了 比较 ， 结果表明 该 协议 优于 CSMA / CD 和 其它 许多 混合 协议 。 
 1 　 网络结构 及 协议 描述 
 　 　 为 适应 光纤网 ， 网络 采用 星型 结构 。 整个 网络 由 Ｎ 个 工作站 和 一个 中央 交换 节点 组成 ， 每个 工作站 与 中央 节点均 有 一条 全双工 信道 相连 ， 并 通过 用户 接口 控制器 ( UIC ) 连接 到 中央 节点 上 。 用户 接口 控制器 由 发送器 ( T ) ， 接收器 ( R ) ， 逻辑 判决 器 ( C ) 和 开关 ( S ) 组成 。 每个 UIC 挂到 中央 节点 的 内部 总线 上 。 中央 交换 节点 的 结构 如图 1 所示 。 总 的 网络协议 是 ： 用户 接口 电路 阻断 那些 会 引起 冲突 的 包 ， 而 各站 不断 重传 发送 不 成功 的 包 ， 直到 发送 成功 。 
 
 图 1   中央 交换 节点 的 结构 示意图 
 　 　 ·   站 协议 
 　 　 ( 1 )   任何 一个 站 准备 好 信包 后 立即 发送 ； 
 　 　 ( 2 )   发送 信包 的 站 等待 一个 来回 传播 延迟时间 ， 然后 侦听 回线 ； 
 　 　 ( 3 )   如果 发现 发送 的 包未 到达 ， 立即 重传 该包 ； 
 　 　 ( 4 ) 否则 知道 它 的 包 已 被 开关 选中 且 正在 广播 整个 信包 。 
 　 　 ·   中央 节点 协议 
 　 　 ( 1 )   所有 发送器 始终 与 内部 总线 接通 ， 进入 内部 总线 的 包 将 被 广播 到 所有 的 站 ； 
 　 　 ( 2 )   接收器 与 内部 总线 连接 与否 由 开关 控制 ； 
 　 　 ( 3 )   内部 总线 有 两种 状态 ， 即 空闲 态和忙态 。 逻辑 判决 器 一直 检测 总线 状态 和 接收器 状态 。 当 总线 处于 空闲 态且 无站 发送 信包 时 ， 所有 开关 处于 关闭 状态 ， 此时 如果 有 一个 信包 到达某 接收器 ， 判决 器 立即 动作 使 开关 接通 ， 信包 直接 发 至 总线 ， 总线 从 空闲 态 转入 忙态 。 当 被 选中 的 包 发送 完毕 ， 且 此时 没有 信包 到达 ， 总线 从忙态 转入 空闲 态 ， 开关 断开 。 
 　 　 ( 4 )   如果 在 总线 忙期 有 一个 信包 到达某 接收器 ， 判决 器 将 使 该 开关 始终 处于 关闭 状态 ， 信 包被 阻断 ； 
 　 　 ( 5 )   判决 器 的 响应 时间 为 Tr ， 如果 在 Tr 内有 一个 以上 信包 到达 ， 上述 4 点 协议 不能 避免 冲突 ； 此时 判决 器 根据 站 的 优先 次序 选通 其中 一个 信包 ， 从而 避免 冲突 的 发生 。 
 2 　 避免 冲突 开关 的 设计 
 2.1   电子 开关 
 　 　 以上 中央 节点 协议 可由图 2 所示 的 逻辑电路 来 实现 。 发送器 和 接收器 作为 链路 的 一部分 ， 可 根据 不同 类型 的 电缆 专门 设计 。 这里 重点 讨论 逻辑 判决 器 。   I1 、 I4 为 线路 侦听器 ， 当 线路 忙 时 输出 高电平 ， 闲时 输出 低电平 ； I2 、 I3 是 D 触发器 ， I2 的 作用 是 当 总线 处于 闲期 时 如果 有 信包 到达 ， 则 产生 一个 " 先到 " 信号 ， 表明 本站 发送 的 信包 最先 到达 中央 节点 ， 此 信号 将 保持 电路 I3 置 1 ， 使 开关 接通 。 当 信包 发送 完毕 ， Q4 输出 高电平 ， 将 I3 置 0 ， 开关 断开 。 在 总线 忙期 Q4 为 高电平 ， 将 I2   阻断 ， 此时 即使 有 信包 到达 也 不会 产生 " 先到 " 信号 ， 从而 使 开关 始终 处于 断路 状态 。 
 
 图 2   电子 开关 结构 
 　 　 如果 在 判决 器 动作 时间 内有 一个 以上 信包 到达 中央 节点 ， I7 、 I8 将 检测 到 冲突 ， O2 输出 高电平 ， 此时 将 根据 SEI 电平 决定 是否 关闭 开关 。 当 SEI 为 低电平 时 ， 不 允许 接通 开关 ， 此时 O3 输出 高电平 ， 将 I3 置 0 ， 开关 断开 ； 只有 SEI 为 高电平 时 ， 开关 才能 保持 接通 状态 。 SEI 和 SEO 的 逻辑关系 为 ： a ) SEI = 0 必有 SEO = 0 ， b ) SEI = 1 时 ， 如果 O2 = 1 ， 则 SEO = 0 ， 否则 SEO = 1 。 采用 图 1 的 接法时 ， 能 保证 冲突 时 立即 关闭 优先级 低 的 开关 ， 只有 优先级 最高 的 一个 站 保持 接通 。 冲突 时间 很 短 ， 只要 在 信包 前面 加入 几个 检测 比特 ， 不会 破坏 有用 信息 。 在 非 冲突 时 ， SEI 和 SEO 不起作用 。 图 3 给出 了 逻辑电路 的 时序 图 。 
 
 图 3   冲突 时 被 阻断 站 的 逻辑电路 时序 
 2.2   光子 开关 
 　 　 上述 电子 开关 适用 于 约 为 50Mbit / s 的 电缆 局域网 。 本 协议 同样 可以 在 高速 光纤 局域网 上 实现 ， 其 关键 是 光子 开关 的 设计 。 采用 分布式 结构 ， 开关 结构 如图 4 所示 。 组成 开关 的 各 部件 都 是 现有 技术 可 实现 的 。 其中 S 是 2 × 2 光纤 开关 ， SP 为 定向 耦合 器 ， RCV 为光 接收器 ， 其 功能 是 把 光 比特流 变成 电 比特流 ， C 为 逻辑 判决 器 ， 其 结构 与 电子 开关 相同 。 由于 光缆 只能 单向 传输 ， 故 网络结构 与 电缆 局域网 有所不同 。 
 
 图 4   中央 节点 及 光子 开关 结构 
 3 　 性能 分析 
 　 　 设站 数 N 为 有限 值 。 将 时间轴 分为 一系列 时间 片 ， 单位 是 长度 为 最远 两站 间 的 传播 延迟 。 每个 站 只有 两种 状态 ： 思考 态和回 储态 。 在 思考 态 ， 站 在 一个 时间 片内 以 概率 P 产生 一个 新包 。 如果 一个 站 新 产生 的 包 发送 时未 被 开关 选中 ， 则 转入 回储态 。 处于 回储态 的 站 直到 存储 的 包 成功 发送 完毕 才 会 产生 新包 ， 此时 返回 思考 态 。 
 　 　 中央 节点 有 两种 状态 ： 空闲 态和忙态 。 忙期 从 开始 收到 一个 信包 到 把 整个 信包 传送 到 发送器 结束 ， 否则 处于 空闲 期 。 在 忙期 到达 接收器 的 所有 信包 不予 接收 ， 直到 忙期 结束 ， 才 开始 接收 新包 或 返回 空闲 态 。 闲期 时间 间隔 为 从 忙期 结束 到 有 一个包 到达 。 为 简化 分析 ， 假设 闲 期间 隔恒为 定值 Td 。 
 　 　 以 整个 系统 准备 好 的 包数 为 系统 状态 ， 系统 有 下列 状态 ： ( 0 , 1 , 2 , ... , N ) ， 其中 0 为 没有 准备 好 的 包 ， i ( 1 < i < N ) 表示 系统 有 i 个 准备 好 的 包 ， 且 中央 节点 处于 忙期 。 根据上述 模型 ， 系统 状态 的 吸收 Markov 链如图 5 所示 。 
 
 图 5   系统 状态 转换 图 
 　 　 假设 ： 
 　 　 ( 1 )   所有 站 的 活动 相互 独立 ； 
 　 　 ( 2 )   包长 固定 ， 恒为 T 个 时间 片 ； 
 　 　 ( 3 )   闲期 时间 间隔 为 Td 。 
 　 　 定义 　 　 Pb = Prob [ 在 忙期 有 一个包 准备 好 ] = 1 - ( 1 - P ) T + 1 状态 转移 概率 可用 下列 式子 表示 ： 
 　 　 Pr ( 0 , 0 ) = Prob [ 在 单位 时间 内有 j 个 站 准备 好 ] 
 　 　 = ( Nj ) Pj ( 1 - P ) N - 1 　 　 1 ≤ j ≤ N 
 　 　 Pr ( i , j ) = Prob [ 在 忙期 有 j - ( i - 1 ) 个 站 准备 好 ] 
 　 　 = ( N - 1j + 1 - i ) Pbj + 1 - i ( 1 - Pb ) N - j - 1 　 　 0 ≤ i - 1 ≤ j ≤ N 
 　 　 　 记 Π = [ π ( 0 ) , π ( 1 ) , ... , π ( N ) ] 为 稳定 概率 矢量 ， Ｐ 为 转移 概率 矩阵 ， 根据 Π = Π Ｐ 及 ， 可解出 稳定 概率 Π 。 通量 为 ： 
 
 　 　 Nr = 系统 中 准备 好 发送 的 包 个数 的 平均值 
 
 　 　 由 Little 公式 可 得 归一化 平均 延迟 ： 
 　 　 把 模型 分析 结果 和 文献 [ 2 ] 中 对 Ethernet 分析 结果 进行 比较 。 图 6 给出 了 通量 与 包 产生 概率 的 关系 ， 计算 时取 Ｎ ＝ 20 , 分别 取 α ＝ 0.1 ， α ＝ 0.05 ( α 为 传播 延迟 与 包 时间 之 比 ) 。 图 7 给出 了 归一化 延迟 和 通量 的 关系 。 在 轻载 时 ， 协议 的 延迟 与 Ethernet 完全相同 ， 而 重载 时 通量 比 Ethernet 高出 许多 ， 且 延迟 远比 Ethernet 小 。 另外 ， 随着 负载 的 进一步 加重 ， Ethernet 的 通量 因 冲突 增加 而 逐渐 下降 ， 但 协议 始终 能 保持 很 高 的 通量 。 可见 ， 协议 的 性能 远 优于 Ethernet ， 且 有 很 宽 的 动态 范围 。 
 
 图 6   通量 与 包 产生 率 的 关系 
 
 图 7   归一化 延迟 与 通量 的 关系 
 　 　 对 文献 [ 3 , 4 ] 中 提出 的 几种 混合 协议 ， 并 与 Ethernet 进行 了 比较 ， 结果 发现 轻载 时 延迟 高于 Ethernet ， 重载 时 通量 略低于 协议 。 因此 ， 协议 优于 这些 混合 协议 。 
 基金项目 ： 国家自然科学基金 和 山东省 自然科学 基金项目 
 作者简介 ： 白 成林 （ 1965 ～ ） ， 男 ， 副教授 ， 主要 研究 方向 ： 多媒体技术 、 计算机 通信 
 作者 单位 ： 山东 聊城 师范学院 通信 工程系 ， 聊城 252059 
 参考文献   
 1   Albanese   A . Star   Network   with   Collision - avoidance   Circuits . BallSystem   Tech .   J . , 1993 , 62 ( 3 ) 
 2   ChenJ   S   J , Li   V   O   K . Reservation   CSMA / CD : A   Multiple   Access   Protocol   for   LAN ' s . IEEE   J . On   Select . Areas   in   Commun . , 1989 ,   17 ( 2 ) 
 3   Chamtac   I , Franta   W   R . Message - based   Priority   Access   to   Local   Networks . Comput . Commun . , 1996 - 03 
 4   Closs   F , Lee   R   P . A   Multi - star   Broadcast   Network   for   Local   Area   Communication . Local   Networks   for   Computer   Communication , 1997 
 收稿 日期 ： 1999 - 02 - 13 
