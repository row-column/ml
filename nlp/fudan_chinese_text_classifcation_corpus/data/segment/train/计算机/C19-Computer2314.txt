计算机 研究 与 发展 
 JOURNAL   OF   COMPUTER   RESEARCH   AND   DEVELOPMENT 
 1999 　 Vol.36 　 No.6 　 P.664 - 667 
 
 
 
 神经网络 在 汉语 两字词 韵律 规则学习 中 的 应用 
 朱廷劭 　 高文 　 凌晓峰 
 摘 　 要 ： 韵律 规则 主要 包括 基频 和 音长 变化规律 ， 目前 的 韵律 规则 大多 是 通过 人工 得到 的 一些 定性描述 . 为了 学习 汉语 两字词 的 韵律 规则 ， 文中 将 韵律 规则 看做 是 孤立 音节 语音 和 其 在 词中 发音 两者之间 的 映射 关系 ， 从而 使用 神经网络 来 学习 这种 映射 . 文中 将 介绍 这种 方法 的 神经网络 结构 并 给出 实验 结果 . 
 关键词 ： 语音 合成 ， 韵律 规则 ， 时间 规整 ， 神经网络 
 分类号 ： TP18 
 NEURAL   NETWORK   IN   LEARNING   MANDARIN   
 TWO - WORD   PHRASES   FULL   PITCH   VARIATION   PATTERNS 
 ZHU   Ting - Shao ， GAO   Wen 
 ( Institute   of   Computing   Technology , Chinese   Academy   of   Sciences , Beijing   100080 ) 
 Charles   LING 
 ( Department   of   Computer   Science , University   of   Western   Ontario   London ,   Ontario ,   Canada ,   N6A   5B7 ) 
 Abstract ： Prosodic   model   includes   pitch   model   and   duration   model , and   these   models   being   used   are   described   qualitatively . In   order   to   learn   the   prosodic   patterns   from   Chinese   two - word   phrases , the   patterns   are   regarded   as   the   mapping   between   the   isolate   syllable   and   the   same   one   when   it   is   spoken   in   phrases , and   the   mapping   can   be   learned   by   using   neural   network . In   the   paper   here , the   architecture   of   learning   neural   networks   is   introduced , and   the   results   are   also   given . 
 Key   words ： speech   synthesis ,   prosodic   rules ,   time   wrapping ,   neural   network ▲ 
 1 　 问题 的 提出 
 　 　 为了 合成 高 自然 度 高清晰度 的 语音 必须 有 完善 的 韵律 规则 ， 而且 韵律 规则 的 总结 应该 采用 定量 的 方法 . 汉语 的 韵律 规则 主要 表现 在 音节 的 时长 分布 、 音高 的 变化 、 能量 的 变化 及 适当 的 停顿 等 几个 方面 ， 其中 音高 和 音长 的 变化 对 自然 度 的 影响 最 显著 ［ 1 ］ . 吴宗济 ［ 2 ］ 曾 对 汉语 的 两 字组 的 声调 模式 做过 很多 研究 , 给出 了 一些 定性 的 描述 . 林茂灿 等 ［ 3 ］ 通过 对 普通话 两 字组 正常 重音 的 声学 分析 ， 得到 关于 普通话 两 字组 中 前后 音节 的 音长 和 音高 的 关系 描述 . 初敏 ［ 1 ］ 利用 存储 的 14 种 单音节 的 音高 模式 和 22 种 两字词 声调 模式 进行 合成 时 的 音高 曲线 修改 ， 对 声母 段 时长 不 做 修改 ， 韵母 段 时长 按照 不同 层面 的 时长 系数 进行 调整 . 目前 的 音高 和 音长 变化规律 大多 是 根据 语言学 的 研究 得出 的 一些 定性 的 描述 或者 是 对 韵律 规则 的 部分 定量 描述 . 
 　 　 韵律 规则 主要 描述 了 音节 在 各种 组合 情况 下 的 音高 和 音长 的 变化 ， 音节 在 孤立 发音 和 在 词中 发音 两种 情况 下 的 基频 和 音长 有 很大 变化 ， 韵律 规则 可以 看做 是 对 孤立 音节 和 词中 发音 的 一种 映射 关系 的 描述 . 基于 这种 思路 ， 我们 使用 误差 逆 传播 神经网络 学习 孤立 音节 和 该 音节 在 词中 发音 时 的 基频 和 时长 的 映射 关系 ， 利用 训练 后 得到 的 网络 直接 计算 出所 需 的 基频 . 
 　 　 神经 网络系统 是 由 大量 的 、 同时 也 是 简单 的 处理单元 （ 或称 神经元 ） 广泛 地 互相 连接 而 形成 的 复杂 网络系统 . 至今 为止 ， 人们 提出 了 很多 神经网络 模型 . 误差 逆 传播 网络   ( back   propagation 
 , BP ) 是 一种 多层 结构 的 映射 网络 ， 更 由于 它 的 一些 特点 使得 其 成为 目前 应用 最 广泛 的 一种 神经网络 模型 ［ 4 ］ . 
 2 　 神经网络 结构 
 　 　 汉语 中 两字词 出现 的 概率 最大 ， 因此 我们 对 汉语 中 两字词 的 音频 和 音长 变化规律 分别 进行 了 学习 . 一般 在 两字词 中 基频 发生 很大 变化 的 是 前 音节 ， 后 音节 的 变化 不如 前者 的 那样 明显 . 
 　 　 我们 使用 了 两个 网络 进行 学习 ， 一个 是 学习 两字词 中前 音节 基频 的 变化 ， 另 一个 是 学习 后 音节 基频 的 变化规律 ， 此外 在 时长 学习 中 ， 将 训练 例 分为 阴平 和 其他 声调 两类 分别 进行 学习 . 这样 共有 6 个 网络 ， 可以 分为 两组 ， 3 个 学习 前 音节 的 基频 和 音长 变化 ， 3 个 用于 后 音节 有关 规律 的 学习 . 在 每组 的 3 个 网络 中 ， 一个 学习 所有 两字词 中 对应 音节 的 基频 变化规律 ， 另 两个 分别 学习 对应 音节 中 所有 声调 为 阴平 或 其他 声调 情况 下 的 时长 变化规律 . 图 1 给出 了 结构图 . 
 
 
 图 1 　 基频 和 音长 规律 的 训练 与 使用 
 　 　 同一 音节 的 基音 周期 数在 孤立 发音 情况 下 和 在 词中时 是 有所不同 的 ， 对 某些 合成 算法 而言 ， 以 基音 周期 为 单位 进行 合成 ， 因此 基音 周期 数 的 变化 也 就 反映 了 时长 的 变化 . 对于 时 长 变化规律 的 学习 可以 通过 学习 基音 周期 数即 基频 数 的 变化 来 实现 . 
 　 　 使用 神经网络 进行 语音 韵律 规则 的 学习 主要 是 将 音节 在 孤立 发音 以及 在 词中 发音 的 前后 变化 看作 是 一种 映射 关系 ， 从而 使用 BP 网络 来 学习 这种 映射 . 图 1 ( a ) 是 进行 训练 的 流程 ， 图 1 ( b ) 给出 了 进行 测试 和 使用 的 流程 . 
 3 　 数据 预处理 
 　 　 语音 数据库 采用 的 是 语音 合成 语料库 CoSS - 1 ， 它 是 “ 八 六三 ” 支持 项目 ， 由 清华大学 计算机系 、 中国科学院 声学 研究所 和 社会科学院 语言 研究所 共同完成 的 . CoSS - 1 包括 1268 个 有 调 音节 和 640 个 两字词 ， 并且 同步 录制 语音 声压 波形 和 声门 波阻抗 波形 . 声门 波阻抗 波形 是 将 说话 人 的 声带 处 的 振动 波形 记录下来 ， 因此 与 语音 波形 比较 起来 周期性 更 明显 . 目前 虽然 有 很多 基频 计算方法 ， 但 精确度 都 不 高 ［ 5 ］ . 我们 通过 对 声门 波 的 基音 标注 ， 可以 得到 准确 的 基音 周期 值 . 由 数据库 中 提取 出 的 基频 取值 范围 为 50 ～ 260 ， 而 对于 神经网络 来说 ， 训练 数据 的 取值 范围 应该 是 - 1.0 ～ + 1.0 ， 因此 对 标注 后 得到 的 基频 数据 必须 进行 标准化 处理 . 
 　 　 为了 满足 神经网络 训练 的 要求 ， 必须 将 长度 不同 的 各个 训练 例中 的 基频 串 规整 到 同一 长度 ， 即 对于 长度 为 PitchLen 的 基频 串 Pitch 将 其 规整 为 长度 WrapLen . 假设 规整 后 的 基频 ， 对于 0 ≤ j < WrapLen ， 其 在 PitchLen 中 的 相应 位置 应该 为 Loc = j   *   PitchLen / WrapLen ， 因此 规整 后 的 基频 串中 j 位置 的 基频 应该 为 Pitch 对应 的 基频 曲线 中 Loc 所 对应 的 数值 . 为了 计算 基频 曲线 中 Loc 位置 的 数值 ， 我们 采用 了 插值 的 方法 ， 即 找出 Loc 附近 的 4 个 基频 点 ， 然后 使用 这 4 个 节点 通过 插值 得到 Loc 对应 的 数值 . 
 4 　 韵律 规则学习 
 4.1 　 基频 变化规律 的 学习 
 　 　 用于 基频 变化规律 学习 的 网络 分为 3 层 ： 输入 层 、 隐含 层 和 输出 层 ， 各层 之间 全 互连 . 网络 的 学习 率取 0.25 ， 使用 Sigmoid 函数 作为 输出 函数 ， 隐含 层 节点 数为 100 ， 使用 两个 神经网络 分别 学习 两字词 训练 例中前 音节 和 后 音节 的 基频 变化规律 . 
 　 　 在 输入 节点 中 包括 音节 单独 发音 时 的 基频 值及 前后 声调 ， 由于 汉语 共有 4 种 声调 ， 在 输入 层 使用 8 个 节点 表示 前后 音节 的 声调 ， 其中 前 4 个 节点 表示 第 1 个 音节 的 声调 ， 后 4 个 节点 表示 第 2 个 音节 的 声调 ， 如 ： 01001000 表示 第 1 个 音节 为二声 ， 第 2 个 音节 的 声调 为 一声 . 输出 节点 为 该 音节 在 两字词 中 发音 时 的 基频 值 ， 这些 基频 值 是 经过 首先 对 两字词 进行 切分 、 基频 标注 、 时间 规整 和 标准化 后 得到 的 数据 . 输入 节点 和 输出 节点 的 个数 随 规整 的 长度 而 不同 ， 取 所有 孤立 音节 的 基音 周期 数 的 平均值 作为 输入 层 的 基频 数据 的 规整 长度 ， 二字词 中 所有 前 音节 的 基音 周期 数 或 后 音节 的 基音 周期 的 平均值 作为 相应 网络 的 输出 层 的 节点 个数 . 
 4.2 　 时 长 变化规律 的 学习 
 　 　 学习 时 长 变化规律 的 神经网络 与 基频 变化 学习 网络 相似 ， 共 分为 3 层 ： 输入 层 、 隐含 层 和 输出 层 ， 各层 之间 实行 全 互连 . 网络 的 学习 率取 0.25 ， 采用 Sigmoid 函数 作为 输出 函数 ， 隐含 层 节点 数为 20 . 
 　 　 一共 有 4 个 网络 用于 学习 时长 的 变化规律 ， 其中 两个 是 学习 所有 训练 例 的 前 音节 的 时长 的 变化 ， 所有 阴平 音节 的 时长 变化规律 使用 一个 网络 进行 学习 ， 其他 声调 则 使用 另 一个 网络 ； 后 音节 也 使用 同样 的 两个 网络 进行 训练 和 测试 . 对 两字词 中 的 前后 音节 ， 其 输入 层 参数 不仅 包括 该 音节 孤立 发音 时 的 基频 数 ， 而且 包括 其 所在 两字词 的 前后 音节 的 声调 和 声 韵母 . 输出 节点 为 该 音节 在 两字词 中 发音 时 的 基频 数 . 
 5 　 实验 结果 
 　 　 为了 对 训练 后 的 网络 进行 测试 ， 我们 从 CoSS - 1 中 随机 选择 了 一批 数据 作为 实验 数据 ， 分别 用于 基频 和 时长 的 训练 和 测试 ， 其中 测试 例 并 没有 包括 在 训练 例中 . 
 　 　 表 1 中 的 统计 是 基于 规整 后 的 两字词 中 音节 的 基频 值 与 经过训练 后 由 神经网络 计算 得到 的 基频 值 的 基础 上 进行 的 ， 最大 最小值 的 统计 是 针对 两者 差 的 绝对值 进行 的 ， 其他 的 统计 是 在 原始 基频 与 计算 基频 差 的 基础 上 直接 进行 的 ， 从 两者 的 比较 可以 直接 看出 学习 的 效果 . 表 2 给出 了 时长 的 部分 实验 结果 . 
 　 　 对 一些 测试 结果 不好 的 测试 例 ， 通过 显示 其词 中 的 基频 曲线 看出 往往 是 由于 基频 标注 的 误差 很大 . 如果 对 所有 训练 数据 进行 平滑 处理 后 ， 学习效果 会 有 进一步 的 提高 . 由 时长 测试 结果 可以 看出 ， 阴平 的 学习 结果 并 不是 很 理想 ， 其他 声调 的 测试 结果 与 实际 数据 比较 接近 . 
 　 　 为了 更 方便 地 查看 学习效果 ， 我们 还 设计 了 一个 显示 程序 ， 将 测试 结果 以 图形 显示 ， 将 实际 基频 值 与 计算 后 得到 的 基频 值 直观 地 显示 出来 ， 可以 很 清楚 地 看到 两者 的 吻合 程度 . 由于 篇幅 所 限 ， 在 此 就 不 给出 显示 实例 . 
 6 　 结束语 
 　 　 韵律 规则 对于 合成 高质量 语音 非常 重要 ， 而 目前 所 使用 的 一些 韵律 规则 多 是 一些 语言学 方面 的 定性描述 . 我们 采用 神经网络 并 结合 数据挖掘 技术 对 两字词 中 的 基频 和 时长 变化规律 进行 了 学习 ， 取得 了 较 好 的 学习 结果 . 利用 机器 学习 的 方法 进行 规则 的 提取 ， 不仅 使得 对 大规模 语音 数据 进行 处理 成为 可能 ， 而且 通过 使用 知识 发现 的 新 算法 可以 更好 地 提高 学习效果 . 我们 希望 利用 机器 学习 方法 得到 更 全面 更 系统 的 语音 变化规律 ， 以 有利于 提高 合成 语音 的 质量 . 
 表 1 　 基频 实验 结果 
 
 　 拼音 MaxMinMean 均 方差 
 前 音节 chuang1 
 shan440 - 1.4772064 . 376950 
 jin4 
 zhan4130 - 0.24121042 . 273769 
 liu2 
 xie4180 - 4.52561615 . 284344 
 gong1 
 hui41502.65648310 . 662880 
 wang2 
 pai2902.0161557 . 791716 
 后 音节 zhi4 
 xun260 - 0.0010932 . 958961 
 bing3 
 yao4140 - 3.63853923 . 004646 
 bao3 
 xian370 - 0.52798410 . 082108 
 la1 
 suo3700.1686617 . 902920 
 xiao4 
 you31904.45394624 . 817568 
 
 表 2 　 时 长 实验 结果 
 
 　 　 拼音 在 词中 数值 测试 结果 
 前 音节 阴平 la1suo35150 
 cao1yan33549 
 chong1ren42941 
 chuan1ma33650 
 a1pian43642 
 其他 tu2an43130 
 chuo4hao43229 
 shu4e22729 
 cuo4shou33735 
 fu3ai43530 
 后 音节 阴平 ta1yang15051 
 xiang1Yue17551 
 sui2jun14151 
 qie4sheng14043 
 ban4yin15052 
 其他 can2ren34440 
 du1fu33336 
 wei2ao44237 
 yi2zhi43540 
 fu2fu23939 
 
 ■ 
 基金项目 ： 本 课题 得到 “ 中国科学院 百 人 计划 ” 项目 基金 资助 . 
 作者简介 ： 朱廷劭 ， 男 ， 1971 年 12 月生 ， 博士 研究生 ， 研究 方向 为 数据挖掘 、 数据库 和 语音 合成 . 
 　 　 　 　 　 高文 ， 男 ， 1956 年 4 月生 ， 教授 ， 博士生 导师 ， 现任 中国科学院计算技术研究所 所长 ， 国家 “ 八 六三 ” 计划 智能 计算机 主题 专家组 组长 ( 首席专家 ) ， 联想 中央研究院 院长 ， 主要 研究 领域 为 人工智能 和 多媒体技术 ， 侧重于 计算机 视觉 、 模式识别 与 图像处理 、 多媒体 数据压缩 等 . 
 　 　 　 　 　 凌晓峰 ， 男 ， 加拿大 西 安大略 大学 计算机系 副教授 ， 研究 方向 为 机器 学习 和 数据挖掘 . 
 作者 单位 ： 朱廷劭 （ 中国科学院计算技术研究所 　 北京 　 100080 ） 
 　 　 　 　 　 高文 （ 中国科学院计算技术研究所 　 北京 　 100080 ） 
 　 　 　 　 　 凌晓峰 （ 西 安大略 大学 计算机科学 系 　 加拿大 安大略省 　 N6A   5B7 ）   
 参考文献 ： 
 ［ 1 ］ 敏 . 高清晰度 高 自然 度 汉语 文语 转换 系统 的 研究 ［ 博士论文 ］ ． 中国科学院 声学 研究所 , 北京 ， 1995 
 ( Chu   Min .   Research   on   Chinese   TTS   system   with   high   intelligibility   and   naturalness   ( in   Chinese ) .   Institute   of   Acoustics ,   Chinese   Academy   of   Sciences ,   Beijing , 1995 ) 
 ［ 2 ］ 宗济 . 普通话 语句 中 的 声调 变化 . 中国 语文 , 1982 , ( 6 ) : 439 ～ 449 
 ( Wu   Zongji .   The   tone   variation   in   Mandarin .   Chinese   Grammar   ( in   Chinese ) ,   1982 ,   ( 6 ) :   439 ～ 449 ) 
 ［ 3 ］ 茂灿 , 颜景助 , 孙 国华 . 北京 话 两 字组 正常 重音 的 初步 实验 . 方言 , 1984 , ( 1 ) 
 ( Lin   Maocan ,   Yan   Jingzhu ,   Sun   Guohua .   Experiment   of   the   normal   accent   in   Beijing   dialect . Dialect   ( in   Chinese ) .   1984 , ( 1 ) ) 
 ［ 4 ］ 伟 . 人工神经网络 原理 — — 入门 与 应用 . 北京 ： 北京航空航天大学 出版社 , 1995 
 ( Wang   Wei .   Principle   of   Artificial   Neural   Network — — Primer   and   Implementation   ( in   Chinese ) .   Beijing : Beijing   University   of   Aeronautics   and   Astronautics   Press ,   1995 ) 
 ［ 5 ］ 行峻 , 迟惠生 等 . 语音 信号 数字 处理 . 北京 ： 电子 工业 出版社 , 1990 
 ( Yang   Xingjun   Chi   Huisheng   et   al .   Speech   Signal   Digital   Processing   ( in   Chinese ) .   Beijing : Publishing   House   of   Electronic   Industry , 1990 ) 
 收稿 日期 ： 1998 - 07 - 14 
 修稿 日期 ： 1998 - 11 - 02 
