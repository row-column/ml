计算机 应用 研究 
 APPLICATION   RESEARCH   OF   COMPUTERS 
 2000 　 Vol.17 　 No.5 　 P.96 - 100 
 
 
 
 Windows   2000 活动 目录 技术 
 梁晋 　 施仁 　 梁峰 　 彭波 　 刘洋 
 摘     要     介绍 了 Windows   2000 的 活动 目录 技术 。 活动 目录 是 Windows   2000 的 目录 服务 ， 是 Windows   2000 分布 网络 的 基础 ， 它 存储 网络 对象 的 信息 ， 使 用户 可以 方便 地 访问 这些 信息 。 活动 目录 采用 一个 结构化 的 数据 存储 ， 集成 了 登录 验证 、 访问控制 的 安全性 。 只 需要 一次 登录 用户 就 可 访问 基于 策略 授予 的 所有 网络资源 访问 权限 。 
 关键词     活动 目录     目录 服务 
 1     前言 
 　 　 随着 网络 技术 的 发展 ， 网络管理 的 目录 服务 逐渐 深入人心 。 与 传统 的 大型 主机 的 模式 相比 ， 客户机 / 服务器 的 模式 更加 优越 ， 因为 在 这 一 模式 下 ， 网络管理员 和 用户 具有 了 更 大 的 灵活性 ， 更好 的 扩展性 和 更加 广泛 的 应用软件 选择性 。 但是 客户机 / 服务器 模式 的 灵活性 也 有 一定 的 弊病 ， 比如 用户 经常性 地 在 网络 中 迷失 自己 ， 找 不到 诸如 打印机 之类 的 网络资源 ； 网络管理员 也 没有 一个 统一 的 网络 资源管理 方法 ， 往往 充当 救火员 的 角色 ， 宏观 的 疏导 和 配置 能力 不够 。 
 　 　 微软 在 Windows   NT   Server   4.0 中 就 已经 贯彻 了 目录 服务 的 思想 ， NT 的 “ 域 ( Domain ) ” 的 概念 是 目录 服务 的 一个 基本 单元 。 “ 一次 登录 ( Single   London ) ” 在 Windows   NT   Server 的 环境 下有 了 具体 的 应用 ， 比如 Internet   Information   Server 、 Exchange   Server 、 SQL   Server 等 都 可以 与 Windows   NT   Server 的 帐号 验证 集成 起来 ， 用户 一次 登录 就 可以 获得 Web 、 E _ mail 和 数据库 等 多种多样 的 网络服务 。 
 　 　 Windows   2000   Server 在 Windows   NT   Server   4.0 的 基础 上 ， 进一步 发展 了 “ 活动 目录 ( Active   Directory ) ” 。 Microsoft   Windows   2000 把 现在 的 Windows   NT   目录 发展 为 一个 完全 可 扩展 ， 可 伸缩 的 目录 服务 ， 既 能 满足 商业 ISP 的 需要 ， 又 能 满足 企业 内 互联网 的 需要 。 
 2     活动 目录 介绍 
 　 　 目录 是 一个 存储 网络 对象 信息 的 分层 结构 。 诸如 活动 目录 的 目录 服务 则 提供 存储 目录 数据 及 网络 用户 和 管理员 使用 这些 数据 的 方法 。 例如 ， 活动 目录 存储 诸如 姓名 、 口令 和 电话号码 等 有关 用户 帐户 的 信息 。 并 使 同一 网络 中 的 其他 授权 用户 可以 访问 这些 信息 。 
 　 　 活动 目录 是 Windows   2000   Server 可 扩展 和 调整 的 目录 服务 。 它 存储 有关 网络 对象 的 信息 并 使 管理员 和 用户 可以 方便 地 查找 和 使用 该 信息 。 活动 目录 的 目录 服务 将 结构化 数据 存储 作为 目录 信息 逻辑 和 分层 组织 的 基础 。 安全性 通过 登录 验证 以及 对 目录 中 对象 的 访问控制 与 活动 目录 相 集成 。 使用 单个 网络 登录 ， 活动 目录 管理员 可以 通过 自身 的 网络管理 目录 数据 和 组织 ， 并且 授权 网络 用户 可以 访问 网络 中 各处 的 资源 。 基于 策略 的 管理 可以 使 即便 是 最 复杂 的 网络管理 变得 轻而易举 。 活动 目录 的 设计 思想 和 目标 ， 是 将 一个 企业 的 所有 计算机设备 和 人员 管理 ， 按照 类型 、 功能 分层 ( 树 或林 ) 管理 ， 简化 日常 管理 操作 。 
 　 　 要 查看 和 管理 活动 目录 主要 需 使用 系统 提供 的 三个 管理工具 ： 
 　 　 ( 1 ) Active   Directory 用户 和 计算机 ； 
 　 　 ( 2 ) Active   Directory 域 和 信任 关系 ； 
 　 　 ( 3 ) Active   Directory 站点 和 服务 。 
 　 　 另外 ， 系统 的 Active   Directory   Schema 和 ADSI 工具 主要 用于 活动 目录 的 开发 使用 。 由于 “ Active   Directory 域 和 信任 关系 ” 和 “ Active   Directory 站点 和 服务 ” 工具 用于 管理 多个 服务器 或 多个 域 之间 的 关系 和 设置 ， 我们 暂时 不管 。 “ Active   Directory 用户 和 计算机 ” 工具 是 用户 对 活动 目录 进行 配置 时 使用 最 频繁 的 工具 。 使用 “ 网络邻居 ” 可 查看 网络 发布 的 活动 目录 信息 。 
 2.1     活动 目录 特点 
 　 　 活动 目录 是 在 Windows   NT   4.0 域 的 基础 上 发展 起来 的 ， 是 Windows   2000 的 核心 。 使用 活动 目录 具有 以下 优点 ： 
 　 　 ( 1 ) 信息 安全性 
 　 　 安全性 与 活动 目录 完全 集成 在 一起 。 不仅 可以 针对 目录 中 的 每个 对象 定义 访问控制 ， 还 可 对 其 每个 属性 进行 操作 。 可以 指定 哪些 组 、 用户 具有 查看 或 使用 对象 的 权限 ， 可 针对 对象 进行 何种 操作 。 例如 ， 某个 人 可能 具有 更改 对象 属性 的 权限 ， 另 一个 人则 可以 查看 属性 ， 而 第三个 人则 可能 根本 没有 查找 对象 的 权限 。 
 　 　 可以 授予 对 对象 每种 单个 属性 选择性 访问 的 权限 。 例如 ， 可以 授予 所有 用户 查看 网络 中 用户 姓名 和 电话号码 的 权限 ， 而 与此同时 却 限制 对 用户 对象 所有 其它 属性 的 访问 。 默认 情况 下 ， 权限 是 可 继承 的 。 指定 给 某 特定 对象 的 权限 会 自动 应用 于 该 对象 的 所有 子 对象 ， 也 可以 封锁 权限 的 继承性 。 
 　 　 活动 目录 为 安全策略 提供 应用程序 的 存储 和 范围 。 安全策略 可以 包括 帐户 信息 ， 诸如 域 宽 口令 限制 或 对 某 特定 域 资源 的 权利 。 安全策略 通过 组策略 执行 。 
 　 　 管理员 可 将 某些 特殊 管理 权利 分派 到 其他 个人 和 组 。 这种 权限 分派 允许 明确 谁 具有 管理 部分 网络 的 权限 。 可以 将 特殊 部分 的 管理 分派 给 单个 管理员 ， 而 不必 拥有 对 大部分 网络 具有 广泛 权限 的 管理员 授权 。 
 　 　 Windows   2000   Server 支持 多种 网络安全 协议 ， 这些 协议 提供 了 更 强大 、 更 有效 的 安全性 ， 以及 对 Internet 安全 协议 的 支持 和 与 早期 Windows 协议 的 兼容性 。 
 　 　 Windows   2000 支持 的 安全 协议 包括 ： 
 　 　 ① Kerberos   v5 ； 
 　 　 ② SSL   ( Secure   Sockets   Layer — 安全套 接字 层 ) ； 
 　 　 ③ DPA ( Distributed   Password   Authentication — 分布式 口令 验证 ) ； 
 　 　 ④ Windows   NT   NTLM 。 
 　 　 Kerberos   v5 协议 是 Windows   2000 中 网络 验证 的 默认 协议 。 Kerberos 协议 是 一个 已经 成熟 的 安全 标准 ， 适用 于 客户机 和 服务器 的 相互 验证 ， 以及 与非 Windows 平台 的 可操作性 。 
 　 　 Windows   2000 支持 基于 公用 密钥 的 协议 ， 提供 Internet 之上 的 保密性 和 可靠性 。 这 包括 对 SSL   3.0 的 支持 ， 以及 Internet 浏览器 和 网络 服务器 间连接 的 标准 。 Windows   2000 还 支持 DPA 技术 。 可以 利用 ISP 管理 自己 企业 的 用户 帐户 信息 。 支持 Windows   NT   version   4.0 和 早期 版本 使用 的 NTLM 协议 ， 是 为 确保 Windows   2000   Server 与 运行 Windows   NT 和 Windows   NT 网络 的 客户机 软件 的 计算机 做到 完全 内部 可 操作 。 
 　 　 ( 2 ) 基于 策略 的 管理 
 　 　 活动 目录 的 目录 服务 包括 数据 存储 和 逻辑 、 分层 结构 。 作为 逻辑 结构 ， 为 策略 应用 提供 上下文 关联 的 分层 结构 。 组策略 用于 确定 ： 对 目录 对象 和域 资源 的 访问 ， 用户 可 使用 哪些 域 资源 ( 诸如 应用程序 ) ， 这些 域 资源 是 如何 配置 的 。 
 　 　 例如 ， 组策略 可 确定 用户 登录 后 在 计算机 上 可 看到 哪些 应用程序 ， 当 Microsoft   SQL   Server 在 服务器 上 启动 时 ， 有 多少 用户 可 与其 连接 ， 以及 当 文档 或 服务 移至 不同 部门 或 组时 ， 用户 可 访问 哪些 内容 。 组策略 使 管理员 只 需 管理 少数 策略 ， 而 不是 管理 大量 的 用户 和 计算机 。 
 　 　 ( 3 ) 扩展性 
 　 　 活动 目录 是 可 扩展 的 ， 这 意味着 管理员 可以 将 对象 的 新类 添加 到 架构 ( Schema ) 中 ， 而且 还 可以 将 新 属性 添加 到 现有 的 对象 类中 。 例如 ， 可以 将 “ 购买 权限 ” 属性 添加 到 用户 对象 类型 中 ， 而后 将 每个 用户 的 购买 权限 作为 用户 帐户 进行 存储 。 可以 使用 活动 目录 架构 ( Active   Directory   Schema ) 控制台 ， 或 通过 创建 基于 ADSI 、 LDIFDE 、 CSVDE 的 命令行 程序 的 脚本 ， 将 对象 和 属性 添加 到 目录 中 。 
 　 　 ( 4 ) 可 调整 性 
 　 　 活动 目录 可 包括 一个 或 多个 域 ， 每个 域 又 可 带有 一个 或 多个 域控制器 ， 允许 调整 目录 以 满足 任何 网络 的 要求 。 多域 可 组合成 域 目录 树 或林 。 目录 将 架构 和 配置 信息 分配 给 目录 中 的 所有 域控制器 。 该 信息 存储 在 初始 域控制器 中 ， 而且 可 复制到 目录 中 任何 其它 域控制器 中 。 
 将 目录 配置 成域 目录 树 或林 ， 可以 针对 不同 策略 对 目录 的 名称 空间 进行 分区 ， 并 调整 目录 使 其 容纳 大量 资源 和 对象 。 
 　 　 ( 5 ) 信息 复制 
 　 　 活动 目录 使用 多主 复制 ， 目录 存储 在 初始 域控制器 中 并 可 复制到 域 、 域 目录 树 或 林 的 每个 域 中 ， 对 目录 数据 所作 的 更改 将 复制到 所有 域控制器 中 ， 每个 域控制器 存储 和 保留 一个 目录 的 完整 副本 。 
 　 　 复制技术 保证 信息 的 有效性 、 容错性 ， 提供 网络 的 负载平衡 。 在 一个 域 中 的 多个 域控制器 ， 可 提供 容错 和 网络 负载平衡 。 如果 域 中 的 某个 域控制器 减慢 、 停止 或 失败 ， 同一 域 中 的 其它 域控制器 可 提供 必要 的 目录 访问 ， 因为 它们 包含 着 相同 的 目录 数据 。 域 中 的 多个 站点 可 提高 目录 的 性能 ， 在 广域网 中 ( WAN ) ， 目录 访问 由 每个 网络 客户机 最近 的 域控制器 执行 。 
 　 　 ( 6 ) 与 DNS 集成 
 　 　 活动 目录 使用 DNS ( Domain   Name   System - 域名解析 系统 ) 。 DNS 是 一个 Internet 的 标准 服务 ， 它 可以 很 容易 地 将 翻译 主机 名称 ， 如 computer . microsoft . com 翻译成 数字 的 TCP / IP地址 。 DNS 域 和 计算机 名称 使用 分层 结构 的 “ 友好 ” 名称 ， 例如 ， 名称 maincampus . microsoft . com 既 是 DNS 也 是 Windows   2000 域名 。 
 　 　 ( 7 ) 与 其它 目录 服务 的 内部 操作 
 　 　 由于 活动 目录 是 基于 工业 标准 的 目录 访问 协议 ， 如 Lightweight   Directory   Access   Protocol   ( LDAP )   version   3 和 Name   Service   Provider   Interface ( NSPI ) ， 可以 与 使用 这些 协议 的 其它 目录 服务 实现 内部 操作 。 LDAP 是 用于 查询 和 检索 活动 目录 信息 的 目录 访问 协议 。 由于 它 是 基于 工业 标准 的 目录 服务 协议 ， 使用 LDAP 的 程序 可以 与 其它 目录 服务 共享 活动 目录 信息 ， 这些 目录 服务 同样 支持 LDAP 。 NSPI 协议 用于 Microsoft   Exchange   4.0 和 5 . x 客户机 ， 活动 目录 对 其 进行 支持 以便 为 交换 目录 提供 兼容性 。 
 　 　 ( 8 ) 灵活 的 查询 
 　 　 用户 和 管理员 可 使用 搜索 菜单 或 “ 网络邻居 ” 来 快速 查找 网络 上 的 对象 。 可 通过 使用 活动 目录 生成 的 全局 编录 优化 查找 信息 。 
 2.2     活动 目录 的 理解 
 　 　 图 1 描述 了 活动 目录 的 对象 ， 活动 目录 的 架构 ( Schema ) 定义 了 活动 目录 的 各个 对象 的 类 。 
 
 图 1 活动 目录 的 对象 
 　 　 每个 类 由 各种 属性 构成 。 活动 目录 有 默认 的 架构 ， 用户 也 可以 使用 Active   Directory   Schema 工具 来 修改 对象 的 类 和 属性 。 在 活动 目录 中 ， 根据 架构 定义 ， 创建 各个 对象 的 实例 。 但是 并不一定 分配 存储空间 ， 只有 在 输入 内容 时才 占用 一定 的 存储空间 。 
 　 　 为了 使得 管理 更 简单 灵活 ， Windows   2000 目录 使用 了 一个 结构化 数据库 。 这一 数据库 基于 Microsoft   Exchange 目录 存储 库 作为 其 数据 存储 库 。 可 扩展 存储 引擎 ( ESE ) 的 使用 ， 使得 目录 可以 从 一个 单一 数据 存储 而 攀升 到 1 千万个 对象 。 这 就 克服 了 Windows   NT   4.0 中 基于 注册表 的 安全 帐目 管理器 ( SAM ) 数据库 的 限制 。 
 　 　 目录 的 结构 定义 了 该 目录 中 可以 被 创建 的 对象 和 属性 。 在 活动 目录 中 ， 结构 由 三张 表 组成 ， 每张 表 对应 下面 的 一项 ： 对象 、 属性 、 语法 对象 。 
 　 　 例如 ， 在 一个 用户 的 定义 中 ， 活动 目录 定义 了 一个 用户 对象 ， 它 包含 了 一些 属性 的 链接 ， 这些 属性 能够 被 设置 给 用户 ， 如名 属性 、 姓 属性 和 密码 属性 。 
 　 　 活动 目录 允许 你 扩充 结构 ， 创建 新 的 属性 和 对象 。 开发者 可以 利用 这一 可扩展性 在 应用软件 目录 下 创建 他们 自己 的 数据结构 ， 从而 把 目录 作为 一个 数据 存储 来 使用 。 例如 ， 一个 人力资源 应用软件 已经 在 目录 中 找到 了 关于 一个 职员 的 大量 信息 ， 这些 信息 包括 这个 职员 的 姓名 、 电话号码 、 办公室 号 和 家庭 住址 。 在 活动 目录 下 ， 这个 应用软件 可以 通过 扩展 结构 来 增加 一些 必要 的 属性 ， 例如 这个 职员 的 薪水 属性 。 
 　 　 此外 ， 活动 目录 的 扩展 安全 模型 允许 你 非常 精细 地 定义 安全 度 。 在 刚才 提到 的 人力资源 应用软件 的 例子 中 ， 主管 人力资源 的 职员 能够 访问 用户 对象 ， 因为 这 对 他们 的 工作 非常 重要 ， 而 管理人员 尽管 可以 创建 或 删除 用户 ， 却 不 能够 访问 对象 的 薪水 属性 。 
 　 　 活动 目录 为 访问控制 许可 提供 了 丰富 的 模式 ， 这些 模式 在 许多 方面 类似 于 文件 和 目录 的 许可 管理 。 
 　 　 你 可以 通过 随意 设定 访问控制 列表 来 设定 对 任何 组织 单位 中 的 对象 的 管理 。 例如 ， 你 可以 授权 一个 电脑 管理员 重新 设置 密码 ， 但 不 把 增加 或 删除 帐号 的 权力 授给 他 。 如图 2 所示 ， 访问控制 列表 ( Access   Control   Lists ， 简称 ACLs ) 保存 了 活动 目录 各种 对象 的 访问控制 权限 ， 用于 控制 用户 对 活动 目录 对象 的 访问 。 可以 通过 访问控制 入口 ( Access   Control   Entries ， 简称 ACEs ) 来 指定 对象 的 属性 。 ACEs 提供 了 更 颗粒化 的 控制 功能 。 
 
 图 2 访问控制 列表 控制 活动 目录 各种 对象 的 访问控制 权限 
 3     活动 目录 的 概念 
 3.1     Windows   2000 域 的 含义 
 　 　 域 在 活动 目录 中 定义 安全 边界 。 活动 目录 由 一个 或 多个 域 组成 ， 每个 域 均 拥有 与 其它 域 相关 的 安全策略 和 安全 关系 。 域 提供 以下 特点 ： 
 　 　 ( 1 ) 两个 不同 域 的 安全策略 和 设置 ( 如 管理权限 和 访问控制 列表 ) 不能 相互 交叉 。 
 　 　 ( 2 ) 指派 管理权限 ， 不 需要 许多 拥有 广泛 管理权限 的 管理员 。 
 　 　 ( 3 ) 将 对象 分成 不同 的 组 放入 域 中 ， 有助于 在 网络 中 反映 公司 的 组织 结构 。 
 　 　 ( 4 ) 每个 域 只 存储 该域 中 对象 的 信息 ， 活动 目录 可 通过 拆分 目录 信息 的 存储 扩展 至 数量 庞大 的 对象 。 
 　 　 由于 Windows   2000 兼容 支持 Windows   NT 的 域 ， 所以 按照 域 中 是否 有无 Windows   NT 域 服务器 ， 将域 分为 单纯 由 Windows   2000 域 服务器 组成 的 本机 模式 ( native   mode ) ， 以及 由 Windows   NT 和 Windows   2000 域 服务器 组成 的 混合 模式 ( mixed   mode ) 。 由于 Windows   2000 的 域 服务器 包含 Windows   NT 域 服务器 功能 ， 并 有 重大 改进 和 提高 ， 所以 由 混合 模式 ( mixed   mode ) 组成 的 域 的 功能 受到限制 ， 本 机 模式 ( native   mode ) 的 功能 最 完善 ， 因此 建议 用户 尽快 将 企业 的 Windows   NT 域 服务器 迁移 到 Windows   2000 的 域 服务器 。 
 3.2     组织 单位 
 　 　 目录 服务 代理 ( DSA ) 运行 于 平铺 数据库 之上 ， 实现 了 一个 分 层次 的 名字 空间 。 有 了 这样 的 分 层次 名字 空间 ， 活动 目录 从 现有 的 域 模型 向前 发展 为 一种 新 的 “ 树 的 树 ” 模型 。 通过 把 名字 空间 进化 为 层次结构 ， 再也 不 需要 在 一个 平铺 列表 上 观察 上万个 用户 了 。 在 一个 Windows   2000 域 中 可以 创建 组织 单位 ， 它们 是 活动 目录 中 装 对象 的 容器 。 组织 单位 ( OU ) 中 包含 用户 、 组 、 打印机 等 对象 ， 这些 对象 能够 被 组织 成 一种 逻辑 结构 ， 这种 逻辑 结构 与 用户 运转 和 组织 业务 的 方式 相适应 。 另外 ， 你 可以 利用 组织 单位 来 设定 管理权 。 
 　 　 通过 给 一个 管理人员 仅 在 一个 容器 中 创建 或 修改 对象 的 权力 ， 就 可 把 他 限制 在 那个 容器 中 。 这种 许可 的 颗粒化 管理 允许 你 提供 对 管理 职责 和 边界 的 很 精细 的 控制 。 目录 层次 中 组织 单位 的 使用 减少 了域 的 数量 ， 同时 能够 达到 需要 的 管理 层次 。 
 3.3     活动 目录 的 名字 空间 
 　 　 为了 确保 Windows   2000 能够 支持 多个 操作系统 和 目录 下 的 目录 同步 和 互操作性 ， 活动 目录 使用 轻量 目录 访问 协议 ( LDAP ) 作为 客户 访问 协议 。 在 活动 目录 中 实施 了 用于 客户 访问 的 LDAP 版本 2 和 版本 3 。 因为 复制 的 标准化 进程 还 没有 最后 定稿 ， 活动 目录 在 第一个 版本 中 实施 了 一个 独有 的 复制 协议 。 一旦 有 了 可以 使用 标准 复制 协议 ， 后面 的 版本 将 马上 使用 用于 目录 复制 的 LDAP 。 
 　 　 在 一个 LDAP 目录 中 ， 名字 空间 可以 被 组织 成 相连 的 或者 不 相连 的 名字 空间 。 
 　 　 在 一个 相连 的 名字 空间 中 ， 子域 的 名字 总是 包含 父域 的 名字 ， 父域 的 名字 是 子域 名字 的 一部分 。 例如 ， 如果 一个 LDAP 名字 为 DC = Sales ， DC = Microsoft ， DC = com 的 活动 目录 域 。 它 是 名字 为 DC = Microsoft ， DC = com 的 域 的 子域 ， 那么 名字 空间 是 相连 的 。 在 相连 的 名字 空间 中 ， 总是 可以 通过 移掉 子域 名字 的 第一 部分 来 得到 父域 的 名字 。 
 　 　 在 一个 不 相连 的 名字 空间 中 ， 父域 与 子域 的 名字 之间 没有 直接 的 关系 。 例如 ， 活动 目录 域 DC = MSN ， DC = com 可能 是 一个 名字 为 DC = Microsoft ， DC = com 的 域 的 子域 。 在 这种 情况 下 ， 子域 不 把 父域 的 名字 作为 它 的 名字 的 一部分 。 
 　 　 使用 相连 名字 空间 或者 不 相连 名字 空间 会 影响 LDAP 查找 操作 。 在 一个 相连 名字 空间 中 ， 域控制器 总是 创建 对 子域 的 提名 。 然而 ， 在 不 相连 的 名字 空间 中 进行 LDAP 查找 操作 ， 从来不 会 创建 对 子域 的 提名 ， 查找 操作 将 被 终止 。 
 　 　 如果 在 同 一棵树 中 既 使用 相连 的 名字 空间 又 使用 不 相连 的 名字 空间 ， 是 会 令人 迷惑 的 ： 在 这棵 树中 查找 操作 到底 是 怎样 进行 的 ？ 因为 这个 原因 ， 活动 目录 对树 模型 进行 了 精炼 ， 引入 了 树 和 森林 的 概念 。 
 3.4     组 的 概念 
 　 　 组 ( Groups ) 是 活动 目录 或 本地 计算机 对象 ， 它 包含 用户 、 联系 、 计算机 和 其它 组 。 组 用于 以下 几个 方面 ： 
 　 　 ( 1 ) 管理 用户 和 计算机 对 共享资源 的 访问 ， 如 活动 目录 对象 及其 属性 、 网络共享 、 文件 、 目录 、 打印机 队列 等 。 
 　 　 ( 2 ) 筛选 组策略 ( Filter   Group   Policy ) 。 
 　 　 ( 3 ) 创建 E _ mail 分配 列表 。 
 　 　 当为 资源 ( 文件共享 、 打印机 等等 ) 指定 权限 时 ， 管理员 应 将 权限 指定 给 组而 不是 单个 用户 。 权限 应 一次性 指定 给 组 ， 而 不是 分 几次 指定 给 单个 用户 。 添加 到 组 的 每个 帐户 接收 为 该组 的 权利 和 权限 。 操作 组而 不是 单个 用户 ， 有助于 简化 网络 维护 和 管理 。 
 　 　 使用 组 筛选 组策略 ， 授予 用户 权利 或 分配 E _ mail ， 在域 中 创建对象 管理 集合 ， 要 使用 组织 单位 ( Organizational   Units ) ， 组和 组织 单位 因 其 使用 的 域 边界 不同 而 不同 。 组 可以 包含 用户 、 计算机 、 本地 服务器 上 的 共享资源 、 单个 域 、 域 目录 树 或 目录 林 ； 组织 单位 则 只 表示 单个 域 中 的 对象 集合 ( 可 包括 组 对象 ) 。 
 　 　 一个组 可以 是 安全 组 ( Security   Group ) 或 分布 组 ( Distribution   Group ) 。 安全 组 ( Security   Group ) 显示 在 访问控制 列表 ( ACL ) 中 ， 定义 对 资源 和 对象 的 权限 。 安全 组 可以 作为 电子邮件 的 实体 ， 当向 一个组 发送 一个 电子邮件 消息 时 ， 将 给 该组 的 所有 成员 发送 电子邮件 消息 。 分布 组 没有 安全性 ， 不 显示 在 访问控制 列表 ( ACL ) 中 ， 只能 通过 电子邮件 应用程序 ( 如 Exchange ) 向 用户 自己 收集 的 用户 发送 电子邮件 。 
 3.5     活动 目录 用户 和 计算机 帐户 的 概念 
 　 　 活动 目录 用户 和 计算机 的 帐户 是 为 用户 或 计算机 提供 安全 的 凭据 ， 以便 用户 和 计算机 能够 登录 到 网络 并 访问 域 资源 ， 用于 验证 用户 或 计算机 的 身份 ， 授权 对域 资源 的 访问 ， 对 用户 或 计算机 帐户 的 操作 进行 审核 。 
 　 　 ( 1 ) 活动 目录 用户 帐户 
 　 　 Windows   2000 提供 一些 预定 义 用户 帐户 ， 可 用于 登录 到 Windows   2000 的 计算机 。 这些 预定 义 帐户 是 ： 管理员 帐户 ( Administrator   account ) 、 来宾 帐户 ( Guest   account ) 。 预定 义 帐户 是 默认 的 用户 帐户 ， 它 用于 使 用户 登录 到 本地 计算机 和 访问 其上 的 资源 。 这些 主要 是 为 初始 登录 和 本地 计算机 配置 而 设计 的 。 每个 预定 义 帐户 都 有 不同 的 权利 和 权限 组合 。 管理员 帐户 具有 最 广泛 的 权利 和 权限 ， 而 来宾 帐户 则 只有 有限 的 权利 和 权限 。 
 　 　 ( 2 ) 计算机 帐户 
 　 　 每个 加入 域 的 Windows   2000 和 Windows   NT 计算机 都 具有 计算机 帐户 。 与 用户 帐户 类似 ， 计算机 帐户 提供 验证 和 审核 计算机 登录 到 网络 ， 以及 访问 域 资源 过程 的 方法 。 
 　 　 Windows   98 和 Windows   95 计算机 不 具备 Windows   2000 计算机所 具有 的 高级 安全 特性 ， 无法 在 Windows   2000 域 中 为 其 指定 计算机 帐户 ， 但 可以 登录 到 网络 并 在 活动 目录 域 中 使用 Windows   98 和 Windows   95 计算机 。 
 4     Windows   2000 活动 目录 域 模型 
 　 　 可以 从 两个 着眼点 观察 域树 ： 一个 着眼点 是 为域 树 进行 的 名字 空间 的 划分 ( 这是 目录 的 物理 结构 ) ； 另 一个 着眼点 是域 或 树 之间 的 信任 关系 ( 这是 目录 的 逻辑 结构 ) 。 
 4.1     活动 目录 的 物理 结构 
 　 　 在 Windows   2000 活动 目录 中 ， 一个 域 是 名字 空间 中 的 一个 分隔 。 同一个 域 中 所有 的 域控制器 都 包含 了域 的 整个 目录 ， 它们 的 数据库 是 相同 的 。 复制 对象 通常 发生 在域 层次 上 。 域控制器 从来不 复制 域 对象 给 其它 域 中 的 域控制器 。 这 使得 一个 域 既 是 名字 空间 中 的 一个 名字 上下文 关联 ， 又 是 名字 空间 中 的 一个 分隔 。 
 4.2     活动 目录 的 逻辑 结构 
 　 　 一棵 活动 目录 树由域 的 层次 组成 ， 这些 域 相互之间 有 信任 关系 。 一个 域 能够 在 自己 内部 实现 一棵 组织 单位 树 ， 这些 组织 单位 在 树 中 创建 了 两个 层次 ： 域 的 层次 与域 内 组织 单位 ( OU ) 的 层次 。 一个 域 内 的 组织 单位 层次 独立 于 其它 域 的 结构 ， 每个 域 都 能 实现 它 自己 的 组织 单位 层次 。 
 因为 域树 具有 双重 层次结构 ， 所以 对域 树 的 管理 具有 极大 的 灵活性 。 例如 ， 一棵 完整 的 域 树 能够 被 一个 中心 IT 组 拥有 和 管理 。 这个 中心组 可以 在 所有 的 域 中 创建 同样 的 组织 单位 ， 比如 一个 注 有 当地 IT 用户 帐户 的 IT 组织 单位 ， 或者 一个 用于 支持 职员 的 技术支持 组织 单位 ， 可以 建立 另外 的 组织 单位 以 适应 用户 在 特殊 领域 的 需要 。 
 　 　 在 总部 域 中 ， 可以 创建 一个 人力资源 组织 单位 和 一个 财政 组织 单位 。 在 一个 地方 办事处 域 中 ， 可以 创建 一个 组织 单位 用于 办事处 销售 组 。 可以 把 对 这些 特殊 组织 单位 的 管理权 授 给 特殊 的 用户 或组 ， 这样 ， 这些 用户 可以 在 不 影响 IT 的 情况 下 管理 他们 自己 的 领域 。 而且 ， 因为 这些 用户 仅仅 在 他们 自己 的 组织 单位 上 有 管理权 ， 所以 ， 他们 决不 可能 干涉 IT 的 全局 权力 和 责任 。 
 因为 逻辑 结构 非常灵活 ， 所以 企业 可以 创建 出 与 它 的 组织 相适应 的 环境 。 活动 目录 既 支持 集中化 或 分散化 的 业务 模型 ， 又 支持 集中化 与 分散化 相 混合 的 业务 模型 。 例如 。 你 可以 先用域 结构 来 提供 一个 集中化 的 框架 ， 然后 ， 再在域 内 使用 组织 单位 ( OU ) 结构 来 支持 分散化 的 业务 。 
 将 多域 组合 到 一起 的 结构 ， 称为 域 目录 树 和 目录 林 。 
 　 　 ( 1 ) 域 目录 树 
 　 　 目录 树中 的 第一个 域 称为 目录 树 的 根域 。 同一 目录 树中 的 其它 域 则 称为 子域 。 恰 位于 某域 之上 的 另 一个 域 被 认为 是 子域 的 父类 。 
 　 　 单个 域 目录 树中 的 所有 域 共享 一个 等级 命名 结构 。 一个 子域 的 域名 就是 将 该 子域 的 名称 添加 到 父域 的 名称 中 。 例如 ， headquarters . mycompany . com 是 mycompany . com 域 的 子域 。 共享 公用 根域 的 域 被 认为 共享 邻近 的 名称 空间 。 
 　 　 目录 树中 的 域 通过 双向 、 传递 的 委托 关系 连接 在 一起 。 由于 这些 委托 关系 是 双向 和 传递 的 ， 因此 加入 目录 树 的 域 会 立即 与 目录 树中 的 每个 域 建立 委托 关系 。 这些 委托 关系 允许 单个 用户 登录 以 验证 用户 并 授权 验证 用户 访问 整个 网络 。 这 使得 目录 树中 所有 其它 域 中 具有 适当 凭据 的 用户 和 计算机 可以 使用 目录 树 所有 域 中 的 所有 对象 。 
 　 　 域 目录 树中 管理权 的 传递 特性 并非 固有 的 。 可以 通过 限制 域 管理权 的 范围 添加 额外 的 安全 层 。 
 　 　 ( 2 ) 目录 林 
 　 　 目录 林 包含 一个 或 多个 目录 树 ， 目录 林中 的 目录 树 不 共享 公用 根域 。 例如 ， headquarters . com 和 sales . com ， com 是 它们 公共 的 根域 ， 但是 它们 之间 无 明显 的 关系 。 不 共享 公用 根域 的 目录 树 被 认为 是 脱开 的 。 
 　 　 目录 林 所有 目录 树中 的 所有 域 必须 共享 以下 特性 ： 
 　 　 ① 域间 的 传递 委托 关系 。 
 　 　 ② 域 目录 树间 的 传递 委托 关系 。 
 　 　 ③ 公用 规划 。 
 　 　 ④ 公用 全局 编录 。 
 　 　 域 目录 树 和 目录 林 的 组合 可 为 邻近 和 脱开 的 命名 约定 提供 相当 的 灵活性 。 这 一点 在 某些 情况 下会 非常 有用 ， 例如 ， 公司 中 各 独立 部门 必须 保持 各自 的 DNS 名称 。 
 　 　 要 使域 或域 目录 树中 的 资源 得到 广泛应用 ， 只 需将域 加入 目录 树中 或 创建 额外 的 与 目录 林 相关联 的 域 目录 树 。 当域 加入 目录 树后 ， 将 在 加入 域 和 父域 间 创建 信任 关系 。 当 在 目录 林中 创建 新 目录 树时 ， 将 在 每个 目录 树 的 根域 间 创建 信任 关系 。 基本 信任 关系 是 透明 的 。 对 其 无需 进一步 地 管理 。 
 　 　 由于 链接 于 目录 林中 的 域 目录 树是 通过 传递 、 双向 Kerberos 信任 关系 链接 的 ， 故 用户 可以 访问 整个 目录 林 任何 域 中 的 资源 。 使用 活动 目录 安装 向导 将 新 的 域 加入 目录 树中 ， 新域 将 与 该 树 其它 域 相联 组成 目录 林 ， 并 创建 双向 、 可 传递 的 Kerberos 信任 关系 。 
 5     结论 
 　 　 活动 目录 是 Windows   2000 的 基础 ， 活动 目录 统一 管理网络 上 各 对象 的 信息 ， 提供 了 安全性 保证 ， 即 简化 了 网络管理 ， 又 加强 了 网络 安全性 ， 是 目前 网络 发展 的 趋势 ， 是 Windows   2000 各种 服务 、 功能 的 核心 。 通过 对 活动 目录 的 了解 ， 可以 更好 地 理解 Windows   2000 的 设计 思想 和 应用 。 
 梁晋 ( 西安交通大学     西安   710049 ) 
 梁晋 ( 陕西省 邮电 学校     西安   710000 ) 
 施仁 ( 西安交通大学     西安   710049 ) 
 施仁 ( 陕西省 邮电 学校     西安   710000 ) 
 梁峰 ( 西安交通大学     西安   710049 ) 
 梁峰 ( 陕西省 邮电 学校     西安   710000 ) 
 彭波 ( 西安交通大学     西安   710049 ) 
 彭波 ( 陕西省 邮电 学校     西安   710000 ) 
 刘洋 ( 西安交通大学     西安   710049 ) 
 刘洋 ( 陕西省 邮电 学校     西安   710000 ) 
 参考文献 
 1 ， 梁     晋 .   中文版 Windows   2000   Server ( 服务器版 ) 实用 大全 .   西安 :   西安 电子科技 出版社 ,   1999.12 
 2 ， 梁     晋 .   中文版 Windows   2000   Professional ( 专业版 ) 实用 大全 .   西安 :   西安 电子科技 出版社 ,   1999.11 
 3 ， 梁     晋 .   中文版 Windows   2000   Server ( 服务器版 ) 简明 教材 .   西安 :   西安 电子科技 出版社 ,   2000.2 
 4 ， 梁     晋 .   中文版 Windows   2000   Professional ( 专业版 ) 简明 教材 .   西安 :   西安 电子科技 出版社 ,   2000.2 
 5 ， www . microsoft . com / windows / server 
 收稿 日期 ： 1999 - 11 - 19 
