计算机 工程 
 COMPUTER   ENGINEERING 
 1999 年     第 25 卷   第 7 期   Vol.25   No.5   1999 
 
 
 
 桌面 会议 系统控制 与 管理 主动 模型 的 研究 与 实现 
 汤庸   区海翔   李显济   田新有 
 摘要   会议 控制 与 管理 是 桌面 会议 系统 的 一个 重要 内容 ， 参考 线路 交换 视频会议 系统 的 地板 控制 模型 与 网络通信 软件 的 客户 / 服务器 模型 ， 设计 了 一个 会议 控制 与 管理 的 主动 模型 ， 并 在 此基础 上 实现 对 桌面 会议 的 控制 与 管理 。 
 关键词   计算机 支持 的 协同工作   客户 / 服务器 模型   主动   视频 编码 系统   协作 
 The   Research   and   Implementation   of   Active   Model   for   Control   and   Management   of   Desktop   Conferencing   System 
 Tang   Yong   Ou   Haixing   Li   Xianji   Tian   Xinyou 
 Department   of   Computer   Science   and   Engineering ， Guangdong   University   of   Technology   Guangzhou   510090 
 Abstraet ： The   control   and   management   model   is   an   important   part   of   desktop   conferencing   systems . This   paper   puts   forward   an   active   model   of   conferencing   system ' s   control   by   analyzing   the   floor   control   model   of   line   switched   video   conferencing   system   and   the   Client / Server   model   of   network   communication   software . Based   on   the   active   model , the   basic   controlling   and   management   functions   of   GdDCS   have   been   implemented . 
 Key   words ： Computer   supported   cooperative   work ; Client / Server   model ; Active ; Video   coding   and   decoding   system ; Cooperation 
 1 　 会议 系统 简介 
 1.1 　 线路 交换 视频会议 系统 
 　 　 早期 的 视频会议 系统 都 带有 专用 性质 ， 基于 线路 交换 ， 通常 是 会议室 或 演播室 模型 。 专用 的 线路 交换 视频会议 系统 在 会议 控制 与 管理 上 多 采用 基于 中央 集线器 的 地板 控制 模型 ， 会议 终端 采用 专用设备 ( 其 核心部件 是 视频 编码 译码器 ) 并 安装 在 会议室 ， 通信 上 铺设 或 租用 专用线路 ， 采用 专用 的 中央 集线器 进行 会议 管理 和 多点 交互 。 参与 会议 的 站点 ( Station ) 可以 呼叫 专用 的 视频 集线器 或 位于 ISDN 公共 线路 上 的 公共 视频 集线器 ， 所有 参与 会议 的 视频 编码 译码 系统 都 要 和 中央 集线器 建立 连接 ， 如果 位于 集线器 站点 的 视频 编码 译码 系统 参与 会议 ， 它 也 要 和 中央 集线器 连接 ， 集线器 之间 还 可以 建立 关联 。 这种 模型 如图 1 所示 。 其 优点 是 视频 、 音频 质量 好 ， 实时性 得以 保证 ， 控制 严密 ， 缺点 是 费用 高 ， 不 适合 在 一般 企事业 单位 或 部门 中 应用 。 
 
 图 1   线路 交换 视频会议 系统 通过 视频 集线器 建立 连接 
 1.2 　 基于 分组 交换 网络 的 桌面 会议 系统 
 　 　 基于 分组 交换 网络 的 桌面 会议 系统 在 实现 策略 上 与 线路 交换 视频会议 系统 完全 不同 ， 它 基于 现有 的 共享 网络 ( 部门级 的 Intranet 或 更 大 范围 的 Internet ) ， 建立 多条 实时 通信 的 逻辑 信道 ， 在 桌面 PC 上 配备 音频 、 视频 辅助 设备 构成 硬件 环境 ， 通过 软件 实现 会议 管理 与 控制 。 随着 多媒体通信 技术 与 多媒体 压缩 技术 [ 2 ] 的 迅速 发展 ， 在 桌面上 实现 实时 的 视频会议 系统 条件 已经 具备 ， 预期 实用型 的 桌面 会议 系统 将 出现 在 Internet / Intranet 上 ， 成为 人们 信息 交互 的 另 一 重要 工具 。 
 　 　 基于 分组 交换 网络 的 桌面 会议 系统 不 需要 专门 的 视频 集线器 ， 也 不 需要 使用 专门 线路 建立 双向 连接 。 一个 站点 ( 通常 是 会议 的 发起者 ) 除了 用作 一个 视频会议 的 端系统 以外 ， 还 可以 作为 一个 视频 集线器 ， 它 也 可以 作为 反射器 。 分组 会议 端系统 也 不 需要 建立 点对点 的 物理 连接 ， 多点通信 通过 在 分组 网络 上 建立 多条 逻辑 信道 进行 ， 视频 、 音频 服务 与 其他 数据通信 应用 共享 分组 网络 。 该 模型 如图 2 所示 。 
 
 图 2   多方 分组 视频会议 
 　 　 我们 在 开发 桌面 会议 系统 ( GdDCS ) 的 过程 中 ， 参考 了 线路 交换 视频会议 系统 的 地板 控制 模型 与 客户 / 服务器 模型 ， 设计 了 一个 会议 控制 与 管理 主动 模型 ， 并 在 此基础 上 初步 实现 了 桌面 会议 的 控制 与 管理 。 
 2 　 会议 控制 与 管理 的 主动 模型 
 　 　 传统 的 客户 / 服务器 模型 服务器 总是 被动 地 等待 客户 的 请求 ， 提供 服务 ， 服务器 不 主动 向 客户 发送信息 ， 进行 协作 ， 显然 不 适应 视频会议 系统 的 协作 要求 。 视频会议 系统 的 协作关系 要求 主席 ( 通常 运行 于 服务器端 ) 主动 对 会议 进行 控制 与 管理 ， 例如 向 与会者 发送 会议 邀请 ， 主席 邀请 客户 发言 ， 主席 公布 会议主题 ， 发言权 管理 等 。 
 　 　 开发 桌面 会议 系统 ( GdDCS ) 的 过程 中 ， 在 客户 / 服务器 模型 的 基础 上 ， 参考 线路 交换 视频会议 系统 的 地板 控制 模型 ， 在 客户 / 服务器 模型 上 加入 主动性 ， 设计 了 会议 控制 管理 的 主动 模型 ， 在 实 
 时 的 视频 音频 交互 的 基础 上 ， 主席 可以 对 会议 进行 管理 和 控制 ， 客户 站点 通过 服务器进行 协作 。 
 　 　 服务器 启动 后 分别 在 前台 与 后台 工作 ， 后台 等待 客户 的 连接 请求 、 服务 请求 、 进行 视频 、 音频 数据 的 多点 转发 ， 前台 为 会议 主席 ( 会议 发起者 ) 所 见 ， 可以 执行 简单 的 、 必要 的 会议 控制 与 管理 ， 如 发出 会议 邀请 、 发言权 显式 控制 等 。 考虑 到 会议 主席 本身 也 要 参加 会议 ， 发送 自己 的 视频 、 音频 信息 ， 为了 系统 的 效率 和 通信 简单 ， 我们 在 服务器端 将 后台 服务 模块 、 前台 控制 管理 模块 与 视音频 模块 进行 了 集成 。 该 模型 如图 3 所示 。 
 
 图 3   会议 控制 与 管理 的 主动 模型 
 3 　 会议 控制 与 管理 主动 模型 的 实现 
 　 　 GdDCS 系统 中 ， 通信协议 采用 TCP / IP 协议 ， 编程 方法 采用 Windows   Socket 规范 实现 网络通信 。 程序 编写 分为 服务器软件 - VideoServer 和 客户 软件 - VideoClient 两个 独立 运行 的 程序 。 所谓 " 服务器 " 并 不是 指 一台 特定 的 机器 ， 理论 上 ， 连网 的 任 一台 机器 都 可以 成为 服务器 ( 运行 VideoServer 软件 ) ， 其他 机器 ( 运行 VideoClient 软件 ) 与 它 连接 就 构成 了 客户 / 服务器 的 体系结构 。 考虑 到 服务器 需要 进行 会议 的 管理 和 控制 ， 转发 客户 方 的 视频 音频 数据 ， 维护 历史记录 数据库 ， 实际上 的 服务器 的 机器 档次 不应 太低 。 以下 从 两个 方面 讨论 会议 控制 与 管理 的 主动 模型 在 GdDCS 系统 中 的 实现 。 
 3.1 　 客户 与 客户 之间 的 协作 
 　 　 服务器 对 客户 之间 交互 的 数据 进行 转发 ， 服务器 充当 反射器 的 角色 。 在 客户 与 服务器 建立 网络通信 连接 后 ， 在 中央 服务器 上 形成 多组 Socket 套 列表 ， 其中 的 每 一个 Socket 套 与 客户端 对应 的 Socket 套 构成 一条 通信 虚 电路 。 客户 与 客户 之间 没有 直接 通信 的 虚 电路 。 服务器 接收 到 客户 A 的 视频 、 音频 数据 后 ， 在 它 的 Socket 套 列表 上 向 其他 站点 多点 播送 ( 除源 发方外 ) 。 过程 如图 4 所示 。 
 
 图 4   客户 与 客户 通过 服务器 协作 
 3.2 　 主席 与 客户 之间 的 协作 
 　 　 主席 与 客户 协作 集中体现 在 会议 控制 与 管理 模块 上 ， 在 GdDCS 系统 中 已经 实现 了 基本 的 会议 控制 与 管理 功能 ， 主要 包括 ： 
 　 　 1 ) 主席 发出 会议 邀请 　 如图 5 所示 ， 主席 向 有 资格 参加 会议 的 客户 站点 发送 会议 邀请 ， 客户 站点 接收 到 邀请 后 ， 可以 选择 参加 会议 或 不 参加 会议 。 如果 不 参加 会议 ， 连接 过程 中断 ； 如果 选择 参加 ， 客户 向 服务器发送 连接 请求 ， 建立 客户端 的 Socket 套 ， 发送 客户 的 用户 信息 。 服务器 接收 到 客户 的 肯定 应答 后 ， 建立 Socket 套 并 插入 Socket 套 列表 ， 接收 客户 的 用户 信息 并 插入 用户 列表 ， 然后 在 网络 上 广播 用户 列表 。 这是 一个 典型 的 由 主席 发起 的 3 次 握手 协议 的 协作关系 。 
 
 图 5   服务器 邀请 客户 参加 会议 
 　 　 2 ) 客户 退出 会议 　 客户 向 服务器发送 退出 会议 的 请求 ， 服务器 接收 到 此 请求 后 更新 用户 列表 ， 并 在 网络 上 广播 。 
 　 　 3 ) 主席 删除 客户 站点 　 主席 保留 将 与会 客户 " 踢 " 出 会议 现场 的 权力 ， 如果 主席 认为 某 客户 不再 具备 参加 会议 的 资格 ， 它 可以 将 客户 从 用户 列表 中 删除 ， 并 在 网络 上 广播 ， 同时 删除 Socket 套 列表 中 的 对应 子集 。 
 　 　 4 ) 客户 身份 认证 　 在 登录 用户 信息 到 用户 列表 时 ， 服务器 可以 对 客户 的 身份 进行 认证 ， 这 避免 了 没有 资格 的 客户 进入 会议 现场 窃取 会议 情报 ， 保证系统 的 保密性 和 安全性 。 
 　 　 5 ) 会议主题 公布 　 在 VideoServer 初始化 时 ， 主席 形成 会议主题 。 会议主题 的 广播 集成 到 用户 列表 的 广播 中 去 。 客户 在 接收 到 用户 列表 后 ， 从 报文 中 提取 出 会议主题 并 显示 。 
 　 　 6 ) 发言权 控制 　 发言权 采用 Push   to   talk 的 互斥 控制策略 ， 每 一个 时刻 只有 一个 用户 可以 发言 ， 逻辑 信道 上 只有 一个 站点 的 音频 数据 在 传输 。 
 　 　 具体 实现 中 可以 把 音频 发言权 设 为 系统资源 ， 通过 资源 的 加锁 、 解锁 操作 实现 互斥 ， 图 6 显示 了 客户 站点 成功 地 申请 和 释放 发言权 的 过程 。 
 
 图 6   客户 成功 请求 发言权 与 成功 释放 发言权 
 　 　 当 资源 空闲 时 ， 客户 站点 平等竞争 发言权 ， 在 服务器端 分配 发言权 资源 的 同时 对 资源 加锁 ， 向 客户 站点 发送 肯定 应答 ， 其他 客户 不能 再 申请 发言权 。 客户 发言 结束 后 必须 释放 发言权 ， 向 服务器发送 释放 发言权 的 请求 ， 服务器 核对 客户 ID 与 资源 加锁 状态 ， 匹配 则 对 资源 解锁 ， 与会 站点 进行 下 一轮 发言权 竞争 。 
 　 　 发言权 资源分配 策略 可以 是 优先权 机制 ， 也 可以 是 先到 先得 机制 。 在 DMVCS 系统 中 ， 采取 了 优先权 加先到 先得 的 控制策略 。 优先级 分为 两个 级别 ， 服务器 具有 最高 优先权 ， 客户 优先权 在 同一 层次 上 ， 服务器 处理 客户 请求 按先到 先得 策略 。 服务器 具有 最高 优先权 符合实际 需要 ， 同时 也 便于 主席 对 发言权 进行 管理 。 例如 主席 可以 剥夺 某 客户 的 发言权 ， 避免 客户 过久 地 占用 音频 发言权 。 
 4 　 小结 
 　 　 在 分析 了 专用 视频会议 系统 的 地板 控制 模型 与 客户 / 服务器 模型 的 基础 上 ， 我们 对 客户 / 服务器 模型 加入 主动性 ， 让 服务器 在 接收 客户 请求 和 提供 服务 的 同时 ， 主动 介入 会议 的 控制 和 管理 ， 这是 会议 控制 与 管理 的 主动 模型 。 在 GdDCS 系统 中 采用 此 模型 的 效果 表明 ， 此 模型 可以 有效 地 保证 参加 视频会议 各个 站点 良好 的 协同 ， 主席 可以 有效 地 对 会议 进行 控制 与 管理 。 目前 ， 我们 正在 实现 会议 控制 与 管理 模块 的 其他 功能 ， 并 开始 对 历史 文档 数据库 的 研究 工作 。 
 * 本 课题 受 广东省 自然科学 基金 、 广东省 重点 攻关项目 和 广东省 重点学科 项目 的 支持 
 作者简介 ： 汤庸   男 ， 35 岁 ， 副教授 ， 主要 从事 多媒体数据库 与 CSCW 研究 
 作者 单位 ： 广东 工业 大学 计算机系   广州   510090 
 参考文献 
 1 　 Fluckiger   F . 网络 多媒体 开发 与 应用 . 北京 ： 机械 工业 出版社 ， 1997 
 2 　 张明敏 . 网络 多媒体技术 与 应用 . 北京 ： 清华大学出版社 ， 1998 
 收稿 日期 ： 1998 - 03 - 01 
