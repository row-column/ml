软件 学报 
 JOURNAL   OF   SOFTWARE 
 1999 年   第 6 期   第 10 卷   Vol.10   No.6   1999 
 
 
 
 工程图纸 图像 图文 自动 分割 工具 SegChar * 
 江 　 早 　 刘积仁 　 刘晋军 
 　 　 摘要 　 文章 分析 了 工程图纸 图像 图文 分割 的 技术 特点 、 关键步骤 和 基本 框架 , 着重 介绍 了 图文 自动 分割 工具 SegChar 采用 的 技术 ， 如 : ( 1 )   自动 字符 尺寸 阈值 过滤 技术 , 可 使 图文 分割 过程 自动化 和 智能化 ; ( 2 )   任意 方向 、 任意 长度 字符串 检测 技术 , 通过 精确 HOUGH 空间 需求 、 松弛 共线 、 基于 字符串 的 HOUGH 域 更新 等 策略 , 提高 了 字符 分割 的 处理速度 ， 降低 了 处理 的 空间 复杂度 ， 能够 使 复杂 的 中西文 字符串 得以 完整 提取 . 文章 最后 给出 了 性能 评价 . 
 　 　 关键词 　 图纸 图像处理 , 图文 分割 , HOUGH 变换 , 自动 阈值 . 
 　 　 中图法 分类号 　 TP391 
 　 
 SegChar — — a   Tool   for   Automatic   Text / Graphics   Segmentation   of   
 Engineering   Drawing   Images 
 JIANG   Zao 　 LIU   Ji - ren 　 LIU   Jin - jun 
 ( Software   Center   Northeastern   University   Shenyang   110006 ) 
 　 　 Abstract   　 In   this   paper ,   the   technical   characteristics   of   text / graphics   segmentation   of   engineering   drawings ,   its   critical   steps   and   basic   processing   framework   are   analyzed .   The   SegChar ,   a   practical   tool   for   automatic   text / graphics   segmentation   developed   by   the   authors ,   is   presented .   The   emphasis   is   put   on   two   technical   respects :   ( 1 )   the   automatic   text   size   threshold   method ,   which   makes   the   processing   procedure   automatic   and   intelligent ;   ( 2 )   the   probing   strategy   for   extraction   of   text   strings   of   arbitrary   direction   and   length ,   which   can   extract   Chinese / Western   character   strings   integrally ,   and   enhances   its   performance   in   processing   speed ,   space   complexity   by   introducing   the   concepts   of   accurate   HOUGH   space   requirements ,   collinear   relaxation   and   the   string   based   HOUGH   field   refreshing   method .   The   performance   evaluation   of   SegChar   is   given   finally . 
 　 　 Key   words 　 Drawing   image   processing ,   text / graphics   segmentation ,   HOUGH   transform ,   automatic   threshold . 
 　 　 工程图纸 中 的 图形 和 文字 在 逻辑 上 具有 不同 含义 和 功能 , 通常 图形 部分 采用 矢量化 方法 进行 处理 , 而 字符 部分 采用 OCR ( optical   character   recognition ) 技术 进行 识别 . 图文 分割 可以 提供 基本 的 待 识别 单元 , 是 进一步 进行 文字 符号 识别 、 图形 矢量化 、 图纸 检索 乃至 图纸 理解 的 基础 . 
 　 　 图文 分割 与 字符识别 是 密切相关 的 . 通常 的 做法 是 : 首先 基于 字符 的 某些 共同 特征 进行 字符 的 提取 , 然后 送入 OCR 识别器 , 最后 利用 识别 的 结果 进行 校正 . 其中 的 字符 提取 可以 称为 一种 粗 分割 . 由于 字符 具有 某些 公共 特征 , 即使 脱离 OCR 过程 , 粗 分割 仍然 可以 获得 较 好 的 分离 结果 , 本文 的 图文 分割 也 是 以此 为 依据 的 . 其 目的 在于 : 对于 西文 , 找到 图纸 中 用于 注释 的 字符串 、 组成 字符串 的 单个 字符 ; 对于 中文 , 找到 单个 的 汉字 及 汉字 所在 的 短语 或 句子 . 关于 字符 的 识别 , 留给 OCR 部分 处理 . 
 　 　 工程图纸 的 处理 属于 光栅 文档 处理 的 一个 子 领域 . 对于 普通 光栅 文档 的 分析 , 已经 存在 大量 方法 进行 文档 的 结构 分割 、 字符 提取 , 典型 的 方法 有 RLSA 等 ［ 1 ］ . 这类 方法 的 特点 在于 , 基于 已知 的 文档 编排 特性 , 自顶向下 进行 分析 . 先 提出 文字 块 、 图形 块 , 进一步 得到 字符 行 、 字符串 直至 单个 字符 . 
 　 　 工程图纸 中 的 字符 通常 存在 以下 几个 特点 ［ 2 ～ 4 ］ : ( 1 )   属于 手写体 范畴 , 在 同 一张 图纸 中 , 大小 不 统一 ; ( 2 )   位置 分散 、 方向 不 一 ; ( 3 )   部分 字符 与 图形 在 尺寸 及 拓扑 模式 上 相似 ; ( 4 )   部分 与 图形 粘连 ; ( 5 )   经常 存在 噪声 干扰 . 因此 ， 字符 提取 和 识别 的 难度 比 普通 光栅 文档 更大 , 不能 采用 传统 的 处理 方法 和 步骤 . 必须 考虑 处理 方法 对 字符 尺寸 变化 的 适应性 、 处理 任意 字符串 方向 的 能力 、 抗 噪声 干扰 性能 以及 区分 字符 与 特殊 图形 的 能力 . 根据 工程图纸 的 特点 , 通常 采用 一种 与 普通 光栅 文档 处理过程 相反 、 自 底向上 的 处理 方法 ， 即 首先 找到 单个 字符 , 甚至 字符 的 某些 部分 , 然后 通过 组合 生成 字符 及 字符串 , 进一步 生成 文字 段 等 ［ 3 ］ . 
 　 　 对于 工程图纸 中 字符 的 处理 , 目前 主要 有 基于 轮廓 的 方法 ［ 5 ］ 、 基于 连通 检测 的 方法 ［ 2 ］ 、 基于 区域 增长 的 方法 ［ 6 ］ 和 基于 聚类 的 方法 ［ 7 ］ , 其中 文献 ［ 2 ］ 提出 的 方法 揭示 了 图纸 字符 处理 的 一种 典型过程 . 该 方法 有 以下 几个 关键步骤 : 连 通体 的 标识 、 字符 过滤器 的 设计 、 字符串 的 成组 以及 后处理 . 
 　 　 本文 采用 了 文献 ［ 2 ］ 中 提出 的 处理 基本 框架 . 为了 实现 系统 整体 较 高 的 性能 , SegChar 特别 采用 了 如下 几项 技术 : ( 1 )   快速 连 通体 标识 技术 ; ( 2 )   连通 目标 区域 树 存储技术 ; ( 3 )   字符 尺寸 自动 阈值 技术 ; ( 4 )   噪声 自动 过滤 技术 ; ( 5 )   任意 方向 字符串 检测 技术 . 其 特点 是 ， 能够 全自动 地 完成 字符 分割 , 并 获得 满意 的 字符串 提取 效果 和 处理速度 . 
 　 　 连 通体 标识 是 在 分离 字符 与 图形 之前 而 采用 的 基本 处理 技术 ， 其 算法 性能 是 关键 . 而且 在 实用 过程 中 ， 交互 增删 也 十分必要 . 我们 采用 了 基于 区域 树 的 存储 结构 来 方便 、 快速 、 准确 地 实现 这种 功能 , 关于 ( 1 ) 、 ( 2 ) 两项 , 详细 内容 可 参见 文献 ［ 8 ］ . 
 　 　 本文 将 主要 介绍 图文 分割 过滤器 的 尺寸 阈值 设计 和 任意 方向 字符串 检测 技术 , 重点 阐述 字符 过滤 的 自动 阈值 技术 以及 基于 HOUGH 变换 的 字符串 检测 技术 . 
 1   字符 分割 自动 尺寸 阈值 
 　 　 字符 的 重要 特征 在于 相同 尺寸 单体 的 聚类 效应 , 这种 尺寸 门 阈 的 确定 , 国外 类似 软件 采用 了 手动 输入 的 方法 . 我们 在 提供 手动 输入 功能 的 同时 , 还 提供 了 一种 自动 阈值 技术 . 利用 该 技术 , 可以 在 不设 初始 参数 的 条件 下 , 全自动 地 完成 字符 的 分离 过程 . 
 　 　 通常 , 线状 图中 字符 的 尺寸 分布 是 规律 的 , 因此 , 采用 自动 分割 技术 省去 了 试验 选取 门限 参数 的 麻烦 , 智能性 得以 提高 . 手动 门限 的 选取 , 通常 是 绝对值 选取 , 这一 绝对值 往往 适应性 差 , 而 自动门 阈 采用 的 是 相对值 , 适应性 良好 . 
 该 技术 是 通过 统计 字符 尺寸 特征 来 实现 的 . 一个 典型 的 机械零件 图如图 1 所示 . 如 不 考虑 颗粒 噪声 , 连 通体 按 区域 面积 大小 出现 的 频率 分布 如图 2 所示 ( 采用 15 点 邻近 平滑 , 图 3 与 此 相同 ) , 可以 认为 是 一个 正态分布 . 由于 ［ 9 ］ 
 P { ｜ X - μ ｜ ＜ 3 σ } = 0.9937 , 
 其中 X 为 某 一 大小 连 通体 , μ 为 均值 , σ 为 标准差 , 这 表明 , 可以 认为 字符 一定 落 在 ( μ - 3 σ , μ + 3 σ ) 范围 内 , 因此 , 可以 采用 迭代 方法 计算 自动 阈值 . 即 
 　 　 ( 1 )   先 计算 μ , σ ; 
 　 　 ( 2 )   去除 落 在 ( μ - 3 σ , μ + 3 σ ) 之外 的 连 通体 ; 
 　 　 ( 3 )   重新 计算 μ , σ ; 
 　 　 ( 4 )   重复 步骤 ( 2 ) 、 ( 3 ) ， 直至 没有 新 的 连 通体 可以 去除 ， 
 则 最终 的 ( μ - 3 σ , μ + 3 σ ) 即 为 自动 筛选 字符 的 阈值 . 
 
 　 　 　 　 　 
 图 1   典型 机械工程 光栅 图 
 
 　 　 　 　 　 
 图 2 　 连 通体 区域 面积 频率 分布 
 　 　 连 通体 的 区域 面积 分布 曲线 的 实际 情况 要 复杂 一些 . 经过 实验 观察 , 一种 普遍 的 情况 是 : 存在 两个 峰值 , 一个 是 点状 噪声 区 , 另 一个 是 字符 聚集区 , 如图 3 所示 . 两个 区域 是 容易 区别 的 . 点 噪声 连 通体 区域 面积 较 小 , 故 位于 坐标 低端 范围 ; 字符 聚集区 的 区域 面积 相对 较 高 . 如果 单纯 采用 上述 方法 进行 阈值 估计 , 必然 产生 较大 的 偏差 , 使 分割 结果 受到 严重 影响 . 为此 , 可以 采用 简单 的 固定 阈值 ， 首先 过滤 颗粒 噪声 , 然后 计算 字符 的 阈值 . 由于 事先 有 连 通体 检测 作为 基础 , 过滤 该类 噪声 并 不 占用 额外 的 计算 . 
 
 图 3 　 存在 颗粒 噪声 的 连 通体 区域 面积 频率 分布 
 　 　 本文 考虑 自动 地 同时 统计 噪声 和 字符 阈值 . 设图 3 中 两个 区域 均 为 正态分布 , 则 可以 采用 下列 步骤 计算 自动 阈值 : 
 　 　 （ 1 ）   计算 连 通体 整体 平均值 μ all ; 
 　 　 （ 2 ）   以 μ all / 10 为 步长 由 最大 连 通体 向下 搜索 , 确定 4 个 分开 的 坐标值 X0 , X1 , X2 , X3 ; 
 　 　 （ 3 ）   采用 前 文 方法 分别 在 （ X0 , X1 ） 和 （ X2 , X3 ） 内 估计 阈值 范围 ( μ noise - 3 σ noise , μ noise + 3 σ noise ) , ( μ char - 3 σ char , μ char + 3 σ char ) . 
 2   任意 方向 、 任意 长度 字符串 检测 
 　 　 字符 是 以串 的 形式 存在 的 . 分析 字符 的 字符串 归属 能够 方便 字符串 整体 的 交互 修改 、 增删 ; 能够 为 字符识别 提供 方向 信息 、 上下文 信息 . 字符串 成组 通常 采用 的 方法 有 两种 , 一种 是 相邻 检测 ［ 3 ］ , 另 一种 是 利用 HOUGH 变换 进行 共线 检测 ［ 2 ］ . 相邻 检测 属于 一种 局部 方法 , HOUGH 变换 是 一种 整体 方法 . 本文 采用 的 是 后 一种 方法 , 主要 涉及 了 HOUGH 变换 、 基于 字符串 的 HOUGH 域 更新 等 方法 , 能够 满足 任意 方向 、 任意 长度 字符串 的 要求 . 其 特点 是 ， 通过 选取 适当 的 HOUGH 域 分辨率 , 计算 量 较 小 , 因此 可以 获得 很快 的 检测 速度 , 同时 也 符合 人为 审图 习惯 . 在 实现 过程 中 , 本文 分析 并 解决 了 以下 几个 关键问题 : 
 　 　 （ 1 )   HOUGH 变换 的 空间 复杂度 较大 , 在 选择 合适 的 分辨率 的 情况 下 , 需要 确定 HOUGH 空间 的 最大 范围 . 本文 提出 了 一个 计算公式 , 合理 解决 了 这 一 问题 , 使 内存 需求 降低 近 1 倍 . 
 　 　 （ 2 ）   由于 字符串 并非 严格 的 共线 , 因此 , 采用 单纯 的 HOUGH 变换 无法 获得 正确 的 结果 . 本文 提出 一种 称为 松弛 共线 的 策略 , 有效 改善 了 字符 的 串 归属 . 
 　 　 （ 3 ）   由于 字符串 的 多 方向 、 非 严格 共线 给 HOUGH 变换 带来 了 问题 , 所以 , HOUGH 空间 必须 反复 刷新 , 而且 更新过程 中 的 次序 也 非常 重要 . 为此 , 本文 提出 一种 基于 字符串 的 检测 次序 , 使 字符串 的 提取 更趋 精确 , 对于 检测 交叉 字符串 和 处理 中文 字符 十分 有效 . 
 2.1   HOUGH 变换 
 　 　 HOUGH 变换 将 笛卡尔 域 的 直线 变换 成 HOUGH 域 的 点 . 笛卡尔 域 直线 可以 表示 为 
 ρ = xcos θ + ysin θ , （ 1 ） 
 
 则 对应 的 HOUGH 域 的 点 为 （ ρ , θ ） , ρ , θ 分别 表示 极径 和 角度 坐标 . 与 此 相 类似 , 笛卡尔 域 的 每个 点 （ x , y ） 与 HOUGH 域 的 一条 曲线 相对 应 . 图纸 图像 中 某 字符串 中 的 字符 通常 位于 一条 直线 上 , 对 共线 字符 的 中心 分别 作 HOUGH 变换 , 则 HOUGH 域 相应 的 曲线 必然 交 于 一点 （ ρ , θ ） . 在 具体实施 过程 中 , 需将 HOUGH 域 离散 化 , 并 将 每 一 坐标 点 称为 累加 单元 , 在 每个 累加 单元 相交 的 曲线 个数 称为 聚集 数 . 
 2.2   字符 检测 基本 步骤 
 　 　 ( 1 ）   设置 HOUGH 域 分辨率 . 在 用于 共线 检测 过程 中 , HOUGH 域 的 分辨率 选取 直接 影响 检测 的 结果 . 本文 采用 的 分辨率 为 1 ° . ρ 必须 是 字符 尺寸 的 相对 量 , 过大 的 极径 将 使 不 共线 的 部分 产生 混淆 , 过 小 的 极径 使 同一 字符串 分成 多组 . 极径 最好 是 选为 局部 字符串 尺寸 的 函数 , 但 由于 共线 检测 前该 尺寸 未知 , 因此 , 本文 采用 全局 字符 尺寸 的 综合 平均值 , 尺寸 选为 字 高 h （ 由于 字符 方向 未知 , 字 高为 字符 的 纵向 尺寸 ） . 本文 的 试验 表明 , 极径 选为 （ 0.2 ～ 0.4 ） * h 效果 较 好 . 
 　 　 ( 2 ）   对 给定 区域 进行 HOUGH 变换 . 根据 人为 字符 书写 的 习惯 , 取 角度 变化 范围 为 0 ° ～ 180 ° . 
 　 　 ( 3 ）   统计 松弛 因子 ， 计算 平均 字符 尺寸 . 统计 的 次序 按照 先大后 小 的 原则 , 先取 聚集 数多 的 累加 单元 进行 组合 , 主要 是 为了 避免 交叉 共线 字符 的 丢失 ［ 2 ］ . 计算 平均 字符 尺寸 是 为了 进一步 分割 同一 共线 组上 的 字符串 . 
 　 　 ( 4 ）   字符串 成组 并 分离 字符 . 该 步骤 只是 简单 地 计算 共线 单元 的 字符串 归属 . 
 　 　 ( 5 ）   更新 HOUGH 域 . 将 已经 成组 的 字符串 从 HOUGH 域 中 删除 , 避免 下 一 循环 重复 统计 . 
 2.3   HOUGH 空间 确定 
 　 　 HOUGH 空间 的 存储 要求 由 ρ , θ 维数 决定 . θ 已 选定 为 180 ° , 因此 , 需要 适当 选取 ρ 的 范围 , 也 就是 获得 ρ 的 最大值 , 从而 请求 需要 的 内存 量 . 
 　 　 式 （ 1 ） 为 HOUGH 变换 的 基本 公式 , 其中 （ x , y ） 为 某点 的 直角坐标 . 我们 的 问题 可以 表述 为 : 已知 式 （ 1 ） 中 的 x , y 的 取值 范围 和 θ 的 极值 , 求 ρ 的 最大值 . 
 　 　 通常 , 因为 cos θ ≤ 1 , sin θ ≤ 1 , 所以 有 
 ρ maxl = ( xmax + ymax ) ／ R , （ 2 ） 
 
 这是 一个 比较 粗略 的 估计 . 当 图纸 较大 时 , 空间 需求 仍然 很大 . 我们 采用 二元 不等式 求 极值 的 方法 , 得到 了 一个 较为 精确 的 值 , 如式 （ 3 ） , 
 （ 3 ） 
 
 其中 R 表示 ρ 的 分辨率 . 
 　 　 经过 比较 , 式 （ 3 ） 的 计算结果 比式 （ 2 ） 的 结果 小 近乎 1 倍 . 例如 , 当 xmax = ymax 时 , .   这 对 节约 空间 是 很 有效 的 . 
 2.4   松弛 共线 
 　 　 由于 字符串 中 单个 尺寸 和 位置 的 复杂性 , 单纯 统计 单个 累加 单元 的 聚集 数将会 漏掉 字符串 中 的 某些 字符 . 采用 合适 的 分辨率 R , 可以 使 共线 具有 一定 的 动态 范围 , 但是 对于 类似 上下 标的 处理 是 不够 的 . 事实上 , 属于 同一 字符串 的 字符 即使 不是 聚集 在 同一 累加 单元 上 , 其 所在 单元 一般 在 θ 坐标 上 也 是 相邻 的 . 为此 , 累加 单元 数 的 统计 可以 采用 将 相邻 的 累加 单元 合并 的 方法 , 以 增加 统计 的 松弛 性 . 具体 的 调整 方法 是 ， 找到 一个 松弛 因子 δ , 保持 ρ 不变 , 将 θ 的 动态 范围 调整 成 { （ 1 - δ / 2 ） * θ , （ 1 + δ / 2 ） * θ } . 很 明显 , 分辨率 越高 , 动态 范围 越小 , 因此 δ 应 增大 , 以 提高 动态 范围 ; 如果 字符 平均 高度 较大 , δ 也 应 相应 增加 . δ 可以 描述 成 分辨率 R 和 字符 平均 高度 h 的 函数 : 
 δ = λ h ／ R , （ 4 ） 
 
 其中 λ 是 系数 , λ = 1 ～ 1.5 . 由 试验 得到 . 
 　 　 经过 松弛 共线 处理 , 可以 较 好 地 处理 具有 上下 标 、 特殊符号 的 字符串 归并 . 
 2.5   基于 字符串 的 HOUGH 域 更新 
 　 　 文献 ［ 2 ］ 在 字符串 的 提取 过程 中 , 采用 了 先长 后 短 的 原则 , 目的 是 防止 误 提取 . 在 同一 图纸 中 , 字符串 有长有短 , 处理 的 顺序 非常 重要 . 下面 的 例子 表明 了 这 一 情况 . 
 　 　 由图 4 可以 看出 , 当 不同 方向 的 字符串 出现 交叉 时 , 如果 不 考虑 次序 , 则 thres + m 可能 将 被 提取 . 而 与 之 相交 的 横向 字符串 中 的 m 也 被 取 走 , 结果 determined 字 将 被 识别 成 deter 和 ined 两个 字 , 虽然 采用 后处理 可以 解决 一些 问题 , 但 如果 采用 先 处理 长 字符串 的 方法 , 就 可以 避免 这 类 问题 . 因此 , 在 整个 检测 过程 中 , 可以 采用 从大到 小 逐层 筛选 的 策略 . 具体做法 是 : 设定 阈值 , 然后 逐层 减 1 , 先 处理 长串 , 后处理 短串 . 
 
 　 　 　 　 　 
 图 4   HOUGH 域 检测 顺序 的 影响 
 　 　 在 实施 这一 算法 的 过程 中 , 我们 注意 到 一个 新 的 问题 , 如图 4 所示 ， 字串 thre 共有 4 个字符 , 而 当 一组 字符 形成 文字 段 形式 时 , 在 段 方向 上 字符 累计数 有时 大于 字符串 本身 的 字符 数 . 因此 , 依照 先长 后 短 的 原则 , 我们 提取 到 的 是 一串 字符 e . 这 表明 , 单纯 采用 先长 后 短 的 原则 还 不够 , 必须 进行 进一步 的 限定 . 
 　 　 经过 分析 , 我们 认为 以 字符串 大小 作为 限定 是 非常 合适 的 . 也就是说 , 在 我们 得到 一个 足够 长 的 共线 组后 , 还 必须 继续 将 其 分解 为 字符串 , 只有 被 分解 的 字符串 长度 符合 限定 时 , 这个 字符串 才 可以 被 提取 . 
 　 　 具体实施 过程 是 在 长串 分割 成字 的 过程 中 , 再次 引进 门 阈 Rthreshold , 当 最终 字符串 的 长度 大于 Rthreshold 时 , 进行 最终 提取 . 字符串 的 判断 采用 近邻 检测 方法 , 门 阈 依据 局部 字 高 判断 . 由于 在 一段 字符 中 , 行距 通常 大于 字符 间距 , 采用 近邻 检测 将 上面 提到 的 一串 字符 e 分割 成 只有 一个 字符 e 的 串 , 因而 先 不 被 提取 , 保证 了 结果 的 正确性 . 
 　 　 单纯 采用 先长 后 短 的 检测 方法 所 存在 的 另 一个 问题 是 对 中文 字符 的 处理 . 中文 字符 有 一个 特点 是 ， 它 常常 由 多个 部分 组成 , 当仅 以 连 通体 个数 进行 字符串 统计 时 , 有时 一个 中文 字符 的 连 通体 个数 就 相当于 一个 英文 字符串 的 连 通体 个数 , 因此 必然 引起 误判 . 例如 ， 对于 上文 的 字符 e , 若 将 其 替换 为 中文 字符 “ 行 ” , 则 与 一个 英文 串 “ long ” 的 连 通体 个数 4 相当 , 完全 可能 先 被 提取 . 本文 的 方法 是 : 在 统计 字符串 过程 中 引进 连 通体 的 字符 属性 归并 , 通过 计算 连 通体 的 相对 位置 确定 其 字符 归属 , 从而 调整 字符 统计 结果 , 形成 正确 的 字符 记数 , 进而 使 提取 顺序 正确 . 
 3   性能 评价 
 　 　 SegChar 能够 有效 地 将 工程 图档 中 的 文字 与 图形 部分 分离 , 将 文字 和 图形 分别 进行 存储 . 对于 文字 符号 , 可以 提取 任意 大小 、 任意 方向 的 字符 , 且 不受 盐粒 噪声 的 干扰 . 能够 提取 单个 字符 并 识别 相应 的 字符串 , 保存 字符 的 位置 信息 、 方向 信息 、 像素 和 尺寸 信息 以及 字符串 归属 信息 ; 识别 结果 存储 在 区域 树结构 中 , 可以 方便 地 实现 交互 增删 , 满足用户 对 分割 结果 进行 修整 的 要求 . 其中 ， 字符串 的 归属 准确 程度 高 , 对 上下 角标 、 符号 , 由 多个 部分 组成 的 字符 归属 问题 处理 得当 , 能 较 好 地 处理 典型 的 i 问题 以及 中文 中 的 点划 等 问题 . 
 　 　 SegChar 采用 C语言 编程 , 在 UNIX 工作站 上 实现 , 整体 性能 较 好 , 灵活性 较强 . 下面 仅 提供 自动 阈值条件 下 的 分离 正确率 计算速度 指标 . 分离 的 正确率 不 包括 与 图形 粘连 字符 的 情况 . 关于 字符 粘连 的 处理 , 我们 已经 提供 一定 的 自动 分离 策略 , 但 对于 大图 而言 , 效率 尚有 待 改进 , 因此 , 该 工具 中 尚未 包括 . 经过 对 多幅 图像 的 识别 测试 ， 字符 分割 平均 正确率 可达 94% 以上 . 图 5 表示 了 原型 系统 分割 结果 的 一个 场面 , 其中 左上角 倾斜 的 字符串 R2.5 也 得以 正确 分割 , 而且 得到 了 相应 的 方向 参数 . 图中 为了 显示 方便 , 仍 按 字符 所 占 矩形框 画出 . 
 
 　 　 　 　 　 
 图 5   字符 分割 例子 
 　 　 SegChar 的 计算速度 在 一台 SGI   Indy 上 进行 测试 . 其 主要 指标 为 CPU : MIPS   R4600 ,   132MHz ;   RAM : 32MB . 测试 样图 的 局部 如图 1 所示 . 整图 大小 为 4420 × 3836   pixles ( 300dpi , 374.65 × 328.87 mm2 ) ; 字符 单体 156 个 ; 字符串 55 个 ; 计算 时间 为 12s . 采用 多幅 样图 的 测试表明 , 字符 多少 并非 影响 速度 的 主要 因素 , 而图 的 尺寸 都 起 着 决定 作用 . 因此 可以 推算 , 处理 一个 A0 尺寸 的 图 大约 需要 96s , 实际上 则 往往 低于 此值 . 而 处理 一个 选定 为 1000 × 1000pixels 的 窗口 大小 的 图像 仅 需 不足 1s . 因此 , SegChar 处理 效率 上 是 满足 一般 要求 的 . 
 4   结束语 
 　 　 图纸 分层 处理 是 一个 基本 步骤 . 典型 处理 就是 字符 与 图形 的 分割 . 为了 适应 图纸 中 字符 分割 的 特点 , 本文 采用 了 自 底向上 的 一整套 处理 方法 , 提出 了 有效 的 字符 自动 分割 阈值 技术 . 在 采用 HOUGH 变换 进行 字符串 检测 的 实践 中 , 提出 了 精确 HOUGH 空间 需求 、 松弛 共线 、 基于 字符串 的 HOUGH 域 更新 等 技术 , 使 字符 分割 的 处理速度 显著 提高 ， 内存 用量 有效 降低 ， 处理结果 明显改善 , 从而 形成 了 实用工具 SegChar . 
 * 　 本文 研究 得到 国家 “ 九五 ” 科技 攻关项目 基金 和 中国 博士后 基金 资助 . 
 作者简介 　 江早 , 1965 年生 , 博士后 , 副教授 , 主要 研究 领域 为 图像 图形处理 , CAD / CAM 及 数控技术 . 
 　 　 　 　 　 刘积仁 , 1955 年生 , 博士 ， 教授 , 博士生 导师 , 主要 研究 领域 为 分布式 多媒体 信息处理 , 图像 图形处理 , 协议 工程 . 
 　 　 　 　 　 刘晋军 , 1970 年生 , 工程师 , 主要 研究 领域 为 工程图纸 自动 输入 处理 . 
 本文 联系人 : 江早 , 沈阳   110006 , 东北大学 软件 中心 308 信箱 
 作者 单位 ： 东北大学 软件 中心   沈阳   110006 
 参考文献 
 　 1 　 Wang   P   S   P ,   Bunke   H .   Handbook   on   Optical   Character   Recognition   and   Document   Image   Analysis .   Singapore :   World   Scientific   Publishing   Company ,   1996 
 　 2 　 Fletcher   L   A ,   Kasturi   R .   A   robust   algorithm   for   text   string   separation   from   mixed   text / graphics   images .   IEEE   Transactions   on   PAMI ,   1988 , 10 ( 6 ) : 910 ～ 918 
 　 3 　 Oliver   L .   Automatic   indexing   of   line   drawings   for   content   based   information   retrieval   ［ Ph . D .   Thesis ］ .   ETH   No .   11870 ,   Dipl .   Informatik - Ing .   ETH .   1996 
 　 4 　 Filipski   A   J ,   Flandrena   R .   Automated   conversion   of   engineering   drawings   to   CAD   form .   Proceedings   of   IEEE ,   1992 , 80 ( 7 ) : 1195 ～ 1209 
 　 5 　 杜建强 , 陈月林 , 刘少媚 等 . 工程图纸 上 的 字符 提取 和 识别系统 . 计算机 工程 , 1995 , 21 ( 1 ) : 62 ～ 65 
 （ Du   Jian - qiang ,   Chen   Yue - lin ,   Liu   Shao - mei   et   al .   A   system   for   character   extraction   of   engineering   drawings .   Computer   Engineering ,   1995 , 21 ( 1 ) : 62 ～ 65 ） 
 　 6 　 陈建国 , 罗伯朋 , 魏小鹏 等 . 对 扫描 图像 的 一种 新型 图文 分离 方法 . 见 : 谭建荣 主编 . 计算机 工程图 学 的 探索 与 实践 . 杭州 : 浙江大学 出版社 , 1994.340 ～ 343 
 ( Chen   Jian - guo ,   Luo   Bo - peng ,   Wei   Xiao - peng   et   al .   A   new   method   for   text / graphics   segmentation   of   scanning   images .   In :   Tan   Jiang - rong   ed .   Exploring   and   Practice   of   Computer   Engineering   Drawings .   Hangzhou :   Zhejiang   University   Press ,   1994 .   340 ～ 343 ) 
 　 7 　 Fan   K ,   Lu   J   M ,   Wang   L   S   et   al .   Extraction   of   characters   from   form   documents   by   feature   point   clustering .   Pattern   Recognition   Letters ,   1995 , 16 ( 9 ) : 963 ～ 970 
 　 8 　 江早 , 刘积仁 , 王冬 等 . 一种 可 交互 删改 的 二值 图像 快速 连通 标识 方法 研究 与 实现 . 东北大学 学报 （ 自然科学 版 ） , 1998 , 19 （ 3 ） : 251 ～ 254 
 ( Jiang   Zao ,   Liu   Ji - ren ,   Wang   Dong   et   al .   Study   and   implementation   of   a   fast   interactive   modifiable   method   for   connected   component   labeling   of   binary   image .   Journal   of   Northeastern   University   ( Natural   Science   edition ) ,   1998 , 19 ( 3 ) : 251 ～ 254 ) 
 　 9 　 王淑琴 . 概率论 与 数理统计 . 沈阳 : 东北工学院 出版社 , 1988 
 ( Wang   Shu - qin .   Theory   of   Probability   and   Statistics .   Shenyang :   Northeastern   University   Press ,   1988 ) 
 本文 1997 - 10 - 20 收到 原稿 , 1998 - 09 - 02 收到 修改稿 
