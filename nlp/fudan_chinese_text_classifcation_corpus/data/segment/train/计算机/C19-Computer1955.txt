微型机 与 应用 
 MICROCOMPUTER   &   ITS   APPLICATIONS 
 1999 年   第 18 卷   第 1 期   Vol.18   No.1   1999 
 
 
 
 提高 局域网 工作站 访问速度 的 一种 简便 方法 
 陈庆章 
 　 　 摘 　 要 ： 学校 中 一般 使用 计算机 的 环境 是 机房 ， 而且 很多 情况 下 是 许多 学生 同时 去 访问 服务器 ， 由此 造成 访问速度 上 的 瓶颈 状态 ， 用户 纷纷 抱怨 网络 速度 太慢 ， 尤其 是 运行 基于 Windows 环境 的 软件 和 访问 Internet 网 。 本文 提供 一种 简便 方法 ， 不 需要 增加 投资 去 安装 新 的 硬件 或 软件 ， 只要 改变 网络 的 结构 ， 就 可以 大幅度提高 访问 网络 的 速度 。 
 　 　 关键词 ： 局域网络 　 工作站 　 访问速度 　 网络 吞吐量 
 1 　 问题 
 　 　 CERNET 的 建立 ， 将 全国 许多 大专院校 的 校园 网络 和 科学研究 机构 的 网络连接 在 一起 ， 给 用户 提供 一个 教育 和 研究 资源共享 的 环境 。 如今 ， 使用 电子邮件 ( EMail ) 、 文件传送 ( FTP ) 、 电子 布告栏 ( BBS ) 、 全球 信息网络 ( WWW ) 的 用户 与日俱增 。 由此 带来 的 不 适应 是 ： 许多 学校 的 局部 计算机网络 本来 速度 就 慢 ， 现在 更是 雪上加霜 ， 在 机房 上机 用户 总是 抱怨 速度 太慢 ， 实际上 已经 影响 到 用户 工作 的 效率 和 耐心 。 
 　 　 提高 用户 访问 服务器资源 的 速度 、 降低 传输 拥塞 现象 、 提高 网络 的 吞吐量 ， 已 成为 计算机机房 必须 重视 的 问题 。 解决 这一 问题 的 方法 可以 很 简单 ， 只要 网络 升级 ， 如 将 现在 的 10Mb / s 网络 升级 到 100Mb / s 网络 ， 或 提高 服务器 和 网络 工作站 的 CPU 速度 和 内存 即可 。 但 学校 普遍 面临 经费不足 ， 无法 实现 这一 耗费 可观 的 升级 。 所以 ， 如何 在 不 投资 的 条件 下 ， 加快 访问速度 是 计算机机房 管理者 煞费苦心 的 事 。 
 　 　 目前 多数 学校 的 计算机机房 都 是 采用 通过 文件 服务器 将 许多 计算机 连接 到 一起 ， 然后 再 通过 校园 网络 和 电信局 专线 与 CERNET 连接 。 其 结构 如图 1 。 
 
 图 1 　 传统 的 计算机机房 的 网络结构 （ 以细缆 为例 ） 
 　 　 这种 连接 方式 的 主要 缺点 在于 网络 交通 瓶颈 限制 计算机 的 数据 传输速度 。 因此 ， 多人 在 网络 上 同时 执行 基于 Windows 程序 的 速度 要 比 个人 在 单机 上 使用 时 缓慢 得 多 。 当然 ， 造成 计算机房 网络 执行 速度 缓慢 的 原因 还有 ， 如 文件 服务器 速度 不够 快 、 连接 计算机 数量 过多 、 计算机 内存不足 、 网络结构 不当 等 。 在 连接 计算机 数量 与 计算机 内存 固定 的 情况 下 ， 网络 执行 的 速度 主要 取决于 文件 服务器 的 速度 和 网络 的 频宽 。 一般而言 ， 文件 服务器 的 速度 随着 CPU 速度 的 增快 而 提高 ， 而 计算机网络 因 使用 的 结构 与 设备 不同 ， 其所 提供 的 频宽 也 有 差异 。 在 没有经费 限制 的 情况 下 ， 使用 较 快 的 主机 和 网络设备 、 增加 计算机 内存容量 当然 可以 提升 在 网络 上 执行 的 速度 ， 但 在 经费 限制 的 情况 下 ， 巧妙 地 规划 网络结构 ， 同样 能 达到 提高 网络 使用 速度 的 目标 。 
 2 　 解决 方法 
 　 　 以 我校 为例 ， 计算机 中心 原来 有 2 间 计算机机房 ， 分别 将 计算机 用 网络 串 接到 2 部 基于 486 的 文件 服务器 上 ， 上 计算机课 时 经常 感到 执行 基于 Windows 的 程序 速度 过 慢 ， 而且 2 间 教室 文件 服务器 上 的 数据 内容 也 随着 长时间 使用 而 逐渐 不 一致 ， 给 老师 和 学生 造成 若干 困扰 。 为 提高 网络 的 访问速度 ， 我们 进行 了 一些 实验 ， 通过 在 服务器 中 安装 数量 不同 的 网卡 而 形成 不同 的 网络结构 ， 对 网络 的 访问速度 有 重大 影响 。 所 做 的 实验 有 ： 
 　 　 ( 1 ) 文件 服务器 速度 测试 ； 
 　 　 ( 2 ) 不同 网络结构 下 数据 存取 碰撞 率 和 延迟时间 测试 ； 
 　 　 ( 3 ) 单 服务器 与 双 服务器 CPU 使用率 比较 。 
 　 　 表 1 所示 为 2 间 计算机机房 在 使用 不同 文件 服务器 及 网络结构 的 情况 下 ， 同时 执行 基于 Windows 程序 的 测试 结果 。 其中 延迟时间 的 计算 是 以 教室 内 最后 1 部 计算机 完成 进入 系统 的 时间 为准 ， 而 CPU 的 使用率 则 是 以 高峰 用量 所测 得 数据 为准 。 网络 卡 数量 是 指 安装 在 服务器 中 的 网卡 数量 。 
 　 　 表 1 的 结果显示 ， 增加 文件 服务器 中 网络 卡 的 数量 可 明显 地 减少 网络 瓶颈 和 延迟时间 ， 而 在 CPU 使用率 饱和 之前 ， 网络 执行 速度 主要 取决于 网络 的 结构 ( 即 网络 卡 数量 ) 。 于是 ， 我们 决定 用 1 部 基于 586CPU 的 文件 服务器 ， 其中 插 4 块 网卡 来 连接 2 间 计算机 教室 的 计算机 ， 这 中间 当然 也 同时 考虑 到 方案 的 经济性 。 图 2 所示 为 网络 结构图 ， 其中 计算机 教室 部分 由细 同轴电缆 和 4 块 网卡 与 文件 服务器 连接 ， 每块 网卡 分别 串接 了 20 部 个人 计算机 ( 注意 ! 是 每间 计算机机房 各 10 部 ) ， 而 文件 服务器 与 校园 网络 部分 则 通过 另 1 块 网络 卡 与 路由器 ( Router ) 相连 。 用户 可 通过 路由器 与 传输 控制 通信协议 ( Transmission   Control   Protocol ) 及 互连网 协议 ( Internet   Protocol ) 的 设定 与 Internet 网 连接 ， 直接 使用 CERNET 上 的 各项 资源 。 
 表 1 　 同时 执行 基于 Windows 程序 的 测试 结果 
 基于 486 文件 服务器 + 80 部 个人 计算机 
 
 网络 卡 数量 / 块 延迟时间 / sCPU 使用率 
 1 ( 接 80 台 计算机 ) 24520% ～ 30% 
 2 ( 各接 40 台 计算机 ) 12540% ～ 50% 
 4 ( 各接 20 台 计算机 ) 8580% ～ 90% 
 
 基于 586 文件 服务器 + 80 部 个人 计算机 
 
 网络 卡 数量 / 块 延迟时间 / sCPU 使用率 
 1 ( 接 80 台 计算机 ) 16510% ～ 20% 
 2 ( 各接 40 台 计算机 ) 8520% ～ 30% 
 4 ( 各接 20 台 计算机 ) 5040% ～ 50% 
 
 
 图 2 　 改进 后 的 网络 结构图 （ 以细缆 为例 ） 
 　 　 为什么 每块 网卡 连接 不同 计算机机房 的 10 部 计算机 ， 而 不是 同一 间 计算机机房 的 20 部 计算机 呢 ? 从 机房 的 使用 情况 来 分析 ， 当 一间 计算机机房 空下来 不用 时 ， 另 一间 计算机机房 可 同时 通过 4 块 网卡 来 访问 文件 服务器 上 的 数据 ， 即使 是 2 间 教室 同时 使用 ， 根据 概率分析 ， 2 间 教室 老师 同时 下 命令 要 同学 操作 的 机率 也 比较 低 ， 所以 这种 连接 方式 在 大部分 时间 都 可 保持 每块 网卡 有 较 低 的 负载 和 碰撞 率 ， 若 是 将 每块 网卡 串 接到 同一 间 计算机 教室 的 20 部 计算机 上 ， 则 经常 会 出现 有 一半 的 网络 通道 非常 忙碌 ， 而 另一半 网络 通道 闲置不用 的 情况 ， 此一 现象 在 先前 测试 不同 网络结构 时 已 充分 显示 出其 差异性 。 用 一部 高效率 文件 服务器 和 多块 网络 卡 的 优点 ： 
 　 　 ( 1 ) 可 保持 单一 教学 环境 ； 
 　 　 ( 2 ) 减少 网络 碰撞 率 和 延迟时间 ； 
 　 　 ( 3 ) 简化 通往 CERNET 的 TCP / IP 与 IPX 的 设定 ； 
 　 　 ( 4 ) 几乎 不 需要 任何 投资 。 
 　 　 另外 ， 最好 能 将 计算机 教室 的 网络 交通流量 与 校内 其他 使用 单位 适当 地 隔开 ， 以免 影响 整个 校园 网络 的 速度 。 因为 计算机 教室 在 上课时 其 网络 上 的 交通流量 非常 大 ， 尤其 是 在 使用 基于 Windows 的 应用 时 。 隔开 的 方式 可 在 文件 服务器 的 上 一层 加装 桥接器 ， 若 其 上层 已经 有 路由器 就 不用 再 加装 桥接器 ， 因为 二者 都 有 过滤 不同 区段 信号 的 功能 。 
 作者 单位 ： 杭州 浙江工业大学 信息 工程学院 ( 310014 ) 
 ( 收稿 日期 ： 1998 - 07 - 03 ) ( 上接 第 30 页 ) 
