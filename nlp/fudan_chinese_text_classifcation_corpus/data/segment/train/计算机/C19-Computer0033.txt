计算机 应用 
 Computer   Applications 
 1999 年   第 19 卷   第 7 期     Vol.19   No.7   1999 
 
 
 
 基于 注释 的 视频 索引 * 
 郑 　 鹏 　 李订方 　 刘海 青 
 
 　 　 摘 　 要 　 本文 提出 了 表示 视频 数据库 的 数据模型 ， 该 模型 通过 视频 注释 来 描述 视频 数据 ， 并 利用 注释 建立 索引 ， 以 实现 按 内容 访问 视频 数据库 。 
 　 　 关键词 　 视频 数据库 ， 镜头 ， 注释 ， 索引 
 　 　 
 ANNOTATION - BASED   INDEX   IN   VIDEO   DATABASE 
 
 Zheng   Peng 　 Li   Dingfang 　 Liu   Haiqing 
 Department   of   Computer   Science   and   Technology   , 
 Wuhan   University   of   Hydraulic   and   Electrical   Engineering ,   Hubei * Wuhan   430072 
 
 　 　 Abstract 　 In   this   paper ,   a   kind   of   data   model   to   represent   video   database   and   describe   video   data   by   annotation   is   presented ,   which   builds   up   index   by   the   annotations   so   that   we   can   access   video   database   based   on   content . 
 　 　 Keywords 　 Video   database , Shot , Annotation , Index 
 
 　 　 在 传统 的 关系 型 数据库 管理系统 中 ， 呈现 给 用户 的 数据库 是 表示 关系 的 二维 表 ， 利用 关键字 对 数据 进行 索引 。 由于 关键字 不 可能 描述 视频 数据 的 时空 关系 ， 不能 完全 表示 语义 信息 ， 并且 不 支持 继承性 、 相似性 ， 不能 进行 描述 间 的 推理 ， 因此 选择 关键字 集合 来 索引 视频 数据 不是 一种 好 方法 。 
 　 　 考虑 到 视频 数据 的 特点 ， 我们 提出 了 基于 特征 的 视频 索引 。 这种 方法 的 主要 缺点 是 特征 缺乏 语义 信息 ， 例如 一些 用 统计 矩 表示 的 特征 ， 使得 用户 在 对 视频 数据库 查询 时 感到 不便 。 为此 ， 我们 提出 了 基于 注释 的 视频 索引 。 
 1 　 数据模型 与 上下文 
 　 　 在 视频流 中有 两个 固有 的 抽象层次 ： 整个 视频流 和 单个 帧 。 对 大多数 应用 来说 整个 视频流 作为 一个 抽象层次 太 粗糙 ； 另一方面 ， 一个 单独 的 帧 很少 是 感兴趣 的 单元 。 于是 我们 把 原始 视频流 按 镜头 ( shot ) 分段 ［ 1 ］ ， 以 镜头 作为 视频流 的 基本 单位 ， 把 这些 基本 单位 存储 在 媒体 上 ， 形成 一个 存储 的 媒体 段库 。 镜头 是 摄像机 在 一次 拍摄 过程 中 所 记录 下 的 视频 帧 序列 ， 加上 特征 和 注释 组成 镜头 库 。 有 了 镜头 库后 ， 我们 就 可 根据 应用 的 需要 建立 视频 文档 库 ， 形成 用户 视图 。 视频 文档 可以 是 场景 、 序列 、 复合 单元 等 。 这些 视频 区间 在 不同 的 精细 程度 上 反映 了 视频 信息 。 我们 把 视频 数据库系统 看成 是 由 存储 的 媒体 段 、 镜头 和 视频 文档 三个 层次 组成 。 对 镜头 库 和 视频 文档 库 都 可 采用 如下 的 数据模型 ： 
 　 　 V   ： 视频 区间 ： ( oid , tb , te ) 
 　 　 　 ： 特   征 ： ( F1 , F2 , … Fn ) 
 　 　 　 ： 注   释 ： ( A1 , A2 , … Am )   　 ( 1 ) 
 　 　 其中 ， oid 表示 区间 标识符 ， tb , te 分别 表示 起始 帧 与 终止 帧 。 
 　 　 对 镜头 库 而言 ， 特征 是 指 每个 镜头 所 独有 的 ， 与 其它 镜头 没有 关系 , 我们 称之为 上下文 无关 ； 注释 也 是 针对 单个 镜头 进行 的 。 对 视频 文档 库 而言 ， 特征 考虑 到 了 视频 区间 之间 的 关系 ， 离开 了 视频 区间 的 环境 ， 特征 也 就 不复存在 。 对 视频 区间 的 注释 依赖于 上下文 。 而 这 一点 正好 反映 了 视频 数据 的 时间 维度 。 
 　 　 正如 前面 数据模型 中 指出 的 那样 ， 视频 数据库 中 包含 许多 不同 类型 的 信息 。 我们 采用 面向对象 的 方法 ， 把 每 一类 信息 都 定义 成 对象 ， 相同 类型 的 对象 构成 一个 集合 ， 几个 集合 的 集合 就 构成 视频 数据库 。 为了 便于 浏览 和 查询 ， 需要 引入 现实 世界 的 关系 实体 对 媒体 流 进行 解释 。 视频 文档 可以 包含 结构 信息 ， 结构 可用 结构 元素 集来 表示 ， 每 一个 元素 可 识别 一个 视频流 区间 。 层次模型 支持 对 视频 结构 的 描述 ， 这样 允许 用户 在 不同 的 层次 上 对 视频 进行 检索 ， 以 满足 不同 用户 的 要求 。 
 　 　 为了 对 基本 段 进行 注释 ， 引入 几个 语义 实体 ： 
 　 　 人物 ：   包括 姓名 、 年龄 、 国籍 和 职业 等 属性 。 
 　 　 地点 ：   包括 国名 、 省名 和 城市 名 等 属性 。 
 　 　 事件 ：   包括 事件 类型 、 事件 发生 的 时间 和 对 事件 的 描述 等 属性 。 
 　 　 物理 对象 ：   包括 对象 类型 和 对象 描述 的 属性 。 
 　 　 由于 视频 数据 还 具有 时间 维度 ， 所以 在 进行 注释 时 ， 还应 考虑 视频 段 之间 的 关系 ， 即 视频 段 所处 的 上下文 ( context ) ［ 2 ］ 。 因为 对 视频 数据 的 注释 与其 上下文 密切相关 ， 对 上下文 的 控制 显得 尤为重要 。 建立 视频 数据库 的 目的 是 有效 地 管理 和 利用 视频 ， 由于 视频 数据量 的 庞大 ， 对 视频 段 的 共享 和 重用 也 是 十分必要 的 。 为此 ， 我们 把 上下文 分成 三个 层次 ： 
 　 　 基本 上下文 ：   对 存储 的 媒体 段 中 的 单个 段 进行 的 描述 。 存储 的 媒体 段 是 真正 存储 在 物理 设备 上 的 视频 实体 。 
 
 
 
 图 1 　 基于 注释 的 索引 
 
 　 　 初级 上下文 ：   把 存储 的 媒体 段 进行 编辑 合成 后 ， 形成 视频 文档 ， 视频 文档 是 呈现 给 用户 的 视图 ， 是 逻辑 上 的 。 对 视频 文档 的 访问 最后 要 映射 到 存储 的 媒体 段 上 ， 物理 存储 与 逻辑 视图 的 分离 有利于 视频 数据 的 共享 和 重用 。 对 一个 具体 的 视频 文档 进行 的 描述 称为 初级 上下文 。 
 　 　 次级 上下文 ：   一个 视频 文档 ( D1 ) 中 的 某些 段 被 另 一 视频 文档 ( D2 ) 所 共享 ， 即 出现 在 另 一 视频 文档 ( D2 ) 中 ， 则 在 视频 文档 ( D2 ) 中 对此 共享 段 的 描述 称为 视频 文档 ( D1 ) 的 次级 上下文 。 
 　 　 提出 三级 上下文 的 原因 是 这样 做 可以 更好 地 控制 视频 数据 的 共享 和 对 视频 数据 的 描述 。 在 基本 上下文 中 的 注释 ， 可 被 使用 此 存储 媒体 段 的 所有 视频 文档 “ 看 ” 到 和 共享 ， 在 某 一 视频 文档 的 初级 上下文 中 的 注释 不会 与 其它 视频 文档 的 初级 上下文 中 的 注释 混淆 ， 即使 两者 使用 了 某些 相同 的 存储 媒体 段 ， 在 必要 时 ， 可 使用 次级 上下文 来 搜索 与 当前 上下文 中 的 注释 使用 了 相同 存储 媒体 段 的 其它 视频 文档 。 
 2 　 视频 注释 
 　 　 我们 可以 利用 这 几个 语义 实体 对 基本 段 进行 注释 。 注释 就是 与 特定 视频 段 相关 的 语义 属性 集 。 不同 的 视频 段 ， 其 注释 是 不同 的 。 
 　 　 在 存储 的 媒体 流中 ， ms 是 存储 的 媒体 段 ， ( ms . SID ) 是 其 标识符 ， ( ms . TS ) 是 其 绝对 的 起始 时间 ， ( ms . TE ) 是 其 绝对 的 终止 时间 ， ( ms . TimeUnitSize ) 是 其 时间 坐标 系统 的 时间 单位 。 存储 的 媒体 段 的 集合 称为 MS — Set 。 
 　 　 视频 文档 中 的 每 一段 和 每 一个 镜头 都 称为 视频流 区间 ( StreamInt ) ， 所有 的 视频流 区间 构成 视频流 区间 集 ( StreamInt — Set ) 。 StreamInt 定义 如下 ： 
 　 　 StreamInt ＝ ( oid , MS — ref , TS , TE )   其中 
 　 　 　 TS ≤ TE ∧ 存在 ms ∈ MS — Set 
 　 　 　 ( MS — ref = ms ∧ ms . TS ≤ TS ∧ ms . TE ≥ TE ) 　 　 　 ( 2 ) 
 　 　 MS — ref 是 ms 的 标识符 ， oid 是 视频流 区间 的 标识符 ， TS 、 TE 分别 表示 起始 帧 和 终止 帧 。 从 ( 1 ) 式 可以 看出 视频流 区间 可以 是 相关 视频 存储 段 的 一部分 或 全部 。 在 此基础 上 定义 视频 注释 如下 ： 
 　 　 Annot = ( oid , a1 , a2 , ... , am , SI — ref )   其中 
 　 　 SI — ref ∈ StreamInt — Set ∧ a1 , a2 , ... , am 
 　 　 　 　 是 具体 的 属性 类型 　 　 　 　 　 　 　 ( 3 ) 
 　 　 在 视频 数据库 中 ， 除了 语义 注释 可以 帮助 理解 视频 信息 以外 ， 视频 结构 也 有助于 理解 视频 信息 。 前面 提出 的 层次模型 支持 对 视频 结构 的 解释 。 一般 可 把 视频 文档 定义 成 镜头 、 场景 、 序列 和 复合 单元 。 结构 元素 的 一个 重要 方面 就是 能够 表示 不同 精细 程度 的 上下文 ， 如 表示 镜头 的 上下文 比 表示 序列 的 上下文 要 精细 一些 。 
 　 　 结构 元素 是 结构 元素 集合 ( Struct — Set ) 的 一个 成员 ， 定义 如下 ： 
 　 　 StructComp = ( oid , Type , a1 , a2 , ... , am , SI — ref )   其中 
 　 　 　 SI — ref ∈ StreamInt — Set 
 　 　 　 ∧ э vs ∈ VS — Set ( SI — ref . MS — ref = vs ) 
 　 　 　 ∧ Type ∈ { cu , seq , sence , shot } ∧ a1 , a2 , ... , am 是 类型 说明 的 属性 　 　 　 ( 4 ) 
 　 　 视频 结构 是 与 视频 文档 相关 的 ， 与 存储 的 媒体 段 不 相关 ， 在 我们 的 模型 中 指出 了 视频流 有 镜头 、 场景 、 序列 、 复合 单元 等 。 
 　 　 图 1 说明 了 基于 注释 的 索引 。 其中 Ⅰ 、 Ⅱ 是 两个 视频 文档 ， Ⅲ 、 Ⅳ 、 Ⅴ 是 存储 的 视频 段 ， （ Ⅲ ， 50 ， 950 ） ， （ Ⅳ ， 100 ， 700 ） ， （ Ⅴ ， 200 ， 600 ） 分别 是 Ⅲ 、 Ⅳ 、 Ⅴ 的 基本 上下文 ， （ Ⅰ ， 100 ， 1600 ） ， （ Ⅱ ， 200 ， 1201 ） 分别 是 Ⅰ 、 Ⅱ 的 初级 上下文 ， 由于 Ⅰ 、 Ⅱ 中 对 Ⅳ 共享 ， 它们 互为 次级 上下文 ， 次级 上下文 是 一个 虚拟 的 概念 ， 所有 的 描述 都 是 在 基本 上下文 和 初级 上下文 中 完成 。 
 　 　 注释 a1 - a6 是 在 存储 的 媒体 段 上 的 基本 上下文 进行 的 ， Rowe 等 ［ 2 ］ 使用 术语 感觉 索引 ( sensory   indexes ) 表示 这 类 信息 ， 这 类 索引 是 独立 于 初级 上下文 的 ， 反映 了 视频 的 语法 信息 。 注释 a7 、 a8 是 在 视频 文档 的 初级 上下文 中 进行 的 ， Rowe 等 使用 术语 主题索引 来 表示 这 类 信息 ， 这 类 索引 依赖于 用户 对 视频 材料 的 使用 方式 和 目的 ， 反映 了 视频 的 语义 信息 。 
 3 　 结束语 
 　 　 随着 多媒体 、 电视 、 通信 技术 的 迅猛发展 ， 视频 数据 日益 增多 。 为了 有效 地 管理 和 利用 视频 数据 ， 人们 自然 想到 建立 视频 数据库 。 由于 视频 数据 的 信息 含量 非常 丰富 ， 结构复杂 多样 ， 因此 要 想 有效 地 检索 视频 数据 ， 必须 对 视频 数据 建立 索引 。 世界 上 对 视频 数据库 的 研究 只是 最近 几年 的 事 ， 目前 还 没有 成熟 的 商用 系统 。 我们 根据 目前 机器 视觉 的 技术水平 和 视频 数据 的 特点 ， 提出 了 一种 利用 注释 建立 视频 数据 索引 的 方法 。 这一 方法 的 优点 是 很 好 地 反映 了 视频 数据 的 语义 特性 ， 缺点 是 注释 往往 要 手工 进行 ， 这 就 使得 注释 的 成本 较 高 并且 与 注释 者 有关 ， 这一 问题 的 解决 依赖于 人工智能 的 新进展 。 由于 视频 数据库 是 一个 较 新 的 领域 ， 其 索引 方法 有待 进一步 研究 。 
 　 　 
 　 　 郑 　 鹏 　 博士 研究生 。   研究 方向 ： 机器 视觉 与 图像处理 。 
 　 　 *   本文 受 国家 电力公司 计算机 应用 重点学科 专项基金 的 资助 。 
 　 　 作者 单位 ： 郑 　 鹏 　 李订方 　 刘海 青 （ 武汉 水利电力 大学 计算机科学 与 技术 系 　 湖北 ． 武汉 430072 ） 
 参考文献 
 ［ 1 ］ 　 Arun   Hampapur .   Design   Video   Data   Management   System .   Ph . D   thesis ,   1995 
 ［ 2 ］ 　 L . A . Rowe ,   J . S . Boreczky ， C . A . Eads .   Indexes   for   User   Access   to   Large   Video   Databases .   In   Proceedings   of   the   IS & T / SPIE   Symposium   on   Electronic   Imaging   Science   and   Technology ,   Conference   on   Storage   and   Retrieval   for   Image   and   Video   Databases Ⅱ ,   San   Jose , CA , February   1994 
 ［ 3 ］ 　 Rune   Hjelsvold .   Sharing   and   Reuse   of   Video   Information .   In   Proceedings   of   the   ACM   Multimedia ′ 94   Conference   Workshop   on   Multimedia   Database   Management   Systems , San   Francisco ,   California ,   October   1994 
 收稿 日期 : 1999 - 01 - 22 
