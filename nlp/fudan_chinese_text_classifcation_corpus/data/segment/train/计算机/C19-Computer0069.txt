计算机 工程 
 COMPUTER   ENGINEERING 
 1999 年   第 25 卷   第 8 期   Vol.25   No.8   1999 
 
 
 
 手写 速记 符 的 识别 与 特征 匹配 研究 
 聂瑞华 ， 邬家炜 
 摘要 ： 着重 介绍 了 中 文笔 式 人群 速记 电脑系统 中 速记 符 的 笔画 分类 和 数据结构 及其 特征 匹配 处理 的 方法 ， 并 对 速记 符 的 笔画 识别 的 主要 算法 进行 了 研究 。 
 关键词 ： 人群 速记 符 ； 笔画 识别 ； 特征 匹配 
 Research   on   Discrimination   and   Characteristics   Match   of   Handwritten   Shorthand   Symbol 
 Nie   Ruihua , Wu   Jiawei 
 ( Department   of   Computer   Science , South   China   Normal   University , Guangzhou   510631 ) 
 【 Abstract 】 This   paper   introduces   handling   method   of   stroke   classification , data   structure   and   characteristics   mathch   on   Chiniese   handwritten   RenQuen   shorthand   symbol   computer   system , research   into   main   algorithms   for   stroke   discrimination   of   shorthand   symbol . 
 【 Key   words 】 RenQuen   shorthand   symbol ; Stroke   discrimination ; Characteristics   match 
 　 　 速记 是 根据 民族语言 的 特点 ， 运用 一套 系统 的 简便 符号 和 有 规律 的 缩略 方法 ， 迅速 记录 语言 、 译写 文字 、 笔录 思维 的 先进 书写 技术 。 速记 广泛应用 于 经济 、 新闻 、 政法 、 科技 等 领域 。 人群 速记法 是 我国 目前 最新 创立 的 一种 流线型 椭圆 系统 速记 方式 ， 其 优点 是 它 的 基本 符号   (   声符   )   只有   “   两级 比例 ， 一个 角度 ， 一个 总 方向   ”   ， 简单 易学 、 易 掌握 ， 是 一种 易于 推广 的 速记 方法   [ 1 ]   。 随着 计算机技术 的 推广应用 ， 人们 希望 能 将 速记 符 快速 地 输入 计算机 ， 并 翻译 其中 文 含义 。   
 　 　 中 文笔 式 人群 速记 电脑系统   (   以下 简称 系统   )   研究 的 目的 在于 ： 书写 者 只要 严格 按照 人群 速记 符 的 书写 标准 ， 从 书写 板上 输入 速记 符 ， 计算机 读取 来自 书写 板 的 书写 轨迹 信息 并 进行 预处理 ， 再 经过 笔画 识别   [ 2 , 3 ]   和 特征 匹配 ， 得到 标准 速记 符 ， 并 根据 速记 符与 汉语拼音 的 对应 关系 翻译 其中 文 含义 。 系统 框图 如图   1   所示 。   
 
 图   1   系统 框图   
 1   速记 符 的 笔画 分类 和 数据结构   
 1.1   笔画 分类   
 　 　 根据 人群 速记 符 的 音符 特点 ， 笔画 主要 有 以下 几种 类型 ， 如表   1   所示 。   
 表   1   速记 符 的 笔画 分类   
 
 　 　 其中 ， 线 和 椭圆 弧有 长符 和 短 符之分 ， 它们 的 倾斜 角度 有 正 、 零 、 负之分   ,   而且 椭圆 弧 本身 也 有 正 和 负之分   ;   圆弧 的 开口 方向 大致 有 向 左   ( D   弧   )   、 向 右   ( C   弧   )   、 向上   ( U   弧   )   和 向下   ( A   弧   ) 4   种 ， 且 每种 圆弧 又 有 大 、 小之分 。   
 1.2   笔画 的 数据结构   
 　 　 设 各 笔画 的 起始 坐标 为   B ( Xb ， Yb )   ， 终止 坐标 为   S ( Xe ， Ye )   ， 取样 点 坐标 为   Q ( X1 ， Y1 )   ， 起始 点 与 终止 点间 的 距离 为   d   ，   笔画 的 倾斜角 为   A   。 笔画 的 数据结构 如下 ：   
 struct   BH   
 {   int   BHType   ；   
 　 int   Length   ；   
 　 int   Angle   ；   
 　 }   ；   
 　 　 其中 ：   ( 1 )   BHType   域 指明 笔画 的 类型 ；   ( 2 )   Length   域 指明 笔画 为 长符   (   值为   1 )   或 短符   (   值为   0 )   ， 尾和点 均 为 短符 ；   ( 3 )   Angle   域 指明 笔画 的 倾斜 角度 或 开口 方向 。   
 2   笔画 识别 的 主要 算法   
 　 　 由于 手写 轨迹 信息 中 包含 有 各种各样 的 干扰 和 噪声 ， 如 ： 人手 的 抖动 、 笔 的 速度 变化 等 ， 而且 不同 的 人 书写 的 轨迹 也 有 较大 的 偏差 ， 因此 ， 从 识别 的 效率 和 实用 效果 考虑 ， 速记 符 的 笔画 识别 是 模糊 识别 ， 即 容许 笔画 的 长度 、 倾斜 角度 等 在 一定 误差 范围 内 的 变形 经过 预处理 后 ， 每个 笔画 的 起始 坐标 、 终止 坐标 以及 笔画 的 取样 点 坐标 均 已 输入 ， 即 是 已知 参数 ， 所以 可以 根据 这些 参数 识别 出 各种类型 的 笔画 。   
 2.1   椭圆 弧 的 识别   
 　 　 人群 速记 符 的 书写 特点 ： 笔画 顺序 是 从左到右 ， 且 大多数 速记 符 的 第一笔 是 线或 椭圆 弧 ， 因此 ， 识别 线 和 椭圆 弧 又 是 笔画 识别 的 基础 。   
 　 　 为了 使 椭圆 弧 的 识别 算法 简单明了 ， 在 预处理 时 取样 点 的 选取 ， 是 取该 点 与 前 一点 的 连线 的 斜率 和 与其 后 一点 的 连线 的 斜率 相差 最大 的 一点 为 取样 点 ， 如图   2   所示 。 算法 描述 如下 ：   
 
 图   2   椭圆 弧 的 取样 点 的 选取   
 　 　 ( 1 )   取得 该 笔画 的 起点 、 终点 和 取样 点 的 坐标值 ；   ( 2 )   过 取样 点   Q ( X1 ， Y1 )   作 一条 平行 于   Y   轴 的 直线   l1   ， 该 直线   l1   与 由 笔画 起始 点 、 终止 点 决定 的 直线   l   相交 于点   P ( Xp ， Yp   )   ， 若 | Y1 - Yp | 在 一定 范围   L   外 ， 则 该 笔画 类型 为 椭圆 弧 ；   ( 3 )   若   Y1 < Yp ,   则 该 笔画 为 正弧   ( BHType = 2 ) ;   若   Y1 < Yp   ,   则 笔画 为 负弧   ( BHType = - 2 )   ；   ( 4 )   若   d > lengthdw   ×   2 / 3 ,   则 该 笔画 为 长符   ( Length = 1 ) ,   否则 为 短符   ( Length = 0 )   ；   ( 5 )   tgA = ( Ye   -   Yb   ) / ( Xe - Xb )   。 若   tgA > 0 ,   则 该 笔画 的 倾斜 角度 为 正   ( Angle = 1 ) ;   若   tgA = 0 ,   则 该 笔画 的 倾斜 角度 为 零   ( Angle = 0 ) ;   若   tgA < 0 ,   则 该 笔画 的 倾斜 角度 为 负   ( Angle = - 1 )   。   
 2.2   圆弧 的 识别 算法   
 　 　 人群 速记 符 的 第二笔 多为 圆弧   ,   而且 圆弧 的 开口 方向 有 多种   ,   每种 不同 开口 方向 的 圆弧 又 有 大小 之分 ， 以 同一 类型 笔画   (   线或 弧   )   起笔 的 速记 符 的 区别 就是 根据 第二笔 圆弧 的 开口 方向 或 大小 来 区别 ， 因此 圆弧 的 识别 是 速记 符 笔画 识别 的 核心 环节 ， 且 识别 算法 有 一定 的 难度 。 由于 手写 速记 符 的 识别 是   “   模糊   ”   的 识别 ， 因此 ， 从 模糊数学 的 角度 来 寻求 圆弧 识别 的 算法 。   
 　 　 设 E 为 一个 集合 ， 集合   A   为 集合   E   的 一个 子集 ，   E   中 一个 元素   X   为   A   的 成员 。 从而 可以 给出 普通 集合 的 定义 [ 5 ] 。   
 　 　 定义 1 对于 集合   A   ， 定义 一个 从   E   到   { 0   ，   1 }   的 函数   μ   A ( X )   ， 有 
 
 　 　 函数   μ   A ( X )   称为 集合   A   的 特征函数 。   
 　 　 显然 ， 在 普通 集合 中 ， 元素 对 集合 的 隶属 关系 只有 两种 状态 ， 要么 为   “   真   ” ( “ 1 ” )   ， 要么 为   “   假   ” ( “ 0 ” )   ， 二者 必居其一 。 如果 将   “   隶属 关系   ”   扩展 为   “   隶属 程度   ”   ， 或者说 特征函数   μ   A ( X )   是从   E   到   { 0   ，   1 }   的 函数 。 现将 其 扩展 到 区间   [ 1 , 0 ] 上 全体 实数 的 函数 ， 从而 也 就 从 普通 集合 引伸出 模糊 集合 了 。   
 　 　 定义   2   集合   E   以及 从   E   到 区间 [ 0 , 1 ] 内 的 函数   μ   A ( X )   ， 序对集   A = { ( X |   μ   A ( X )   ， ∨   X   ∈   E ) }   称为 集合   E   上 的 一个 模糊 子集 ，   μ   A ( X )   称为 模糊 子集   A   的 隶属 函数 。 
 　 　 圆弧 的 开口 方向 如表   2   所示 ：   
 表   2   圆弧 的 开口 方向   
 笔   画 
 开口 方向向 右向 左 向下 向上 
 名   称 C   弧 D   弧 A   弧 U   弧 
 
 　 　 先 把 圆弧 分成 垂直 的   ( C 、 D 弧 )   和 水平 的 ( A 、 U 弧 ) 两种 ， 则 ： 
 A =   arctg ( ( Ye   - Yb ) / ( Xe - Yb ) )   
 　 　 表示 连接 起点 和 终点 的 直线   l   与   X   轴 的 夹角 。 水平 曲线   HC   和 垂直 曲线   VC   两个 模糊 集合 可 分别 由 其 隶属 函数   μ   HC ( A )   和   μ   VC ( A )   表示 ：   
 μ   HC ( A ) = 1 - min {   min [ | A | , |   π   - A | , | 2   π   - A | ] /   π   / 2 , 1   }   
 μ   VC ( A ) = 1 - min {   min [ |   π   / 2 - A | , | 3   π   / 2 - A | ] /   π   / 2 , 1   }   
 　 　 然后   ,   再 根据 取样 点 位于 起点 与 终点 决定 的 直线   l   的 不同 位置 来 判断 圆弧 究竟 属于 哪 一类 。 圆弧 的 识别 算法 描述 如下 ：   
 　 　 ( 1 )   取得 笔画 的 起点 、 终点 和 取样 点 的 坐标值 ；   
 　 　 ( 2 )   该 笔画 为 圆弧   ( BHType = 3 )   ；   
 　 　 ( 3 )   若   d > lengthdw   ×   2 / 3 ,   则 该 笔画 为 长符   ( Length = 1 ) ,   否则 为 短符   ( Length = 0 ) ;   
 　 　 ( 4 )   A =   arctg ( ( Ye   - Yb   ) / ( Xe - Yb ) )   ；   
 　 　 ( 5 )   求 水平 曲线 和 垂直 曲线 的 隶属 函数 值   
 　 　 HC = 1 - min {   min [ | A | , |   π   - A | , | 2   π   - A | ] /   π   / 2 , 1   }   
 　 　 VC = 1 - min {   min [ |   π   / 2 - A | , | 3   π   / 2 - A | ] /   π   / 2 , 1   }   
 　 　 ( 6 )   若   HC > VC   ， 该 笔画 为 水平 曲线   ( A 、 U   弧 )   。 求过 取样 点   ( X1 ， Y1 )   平行 于   Y   轴 的 直线 l1   与 由 笔画 起始 点 、 终止 点 决定 的 直线   l   的 交点   P   的 坐标值   ( Xp ， Yp ) ； 若   ( Y1 > Yp ) ,   则 该 笔画 为   A   弧   ( Angle = 1 ) ;   否则   ,   该 笔画 为   U   弧   ( Angle = 2 ) ;   
 　 　 ( 7 )   若   HC < VC ,   该 笔画 为 垂直 曲线   ( C   、   D   弧   )   。 求过 取样 点   ( X1 ， Y1 )   平行 于   X   轴 的 直线   l1   与 由 笔画 起始 点 、 终止 点 决定 的 直线   l   的 交点   P   的 坐标值   ( Xp   ， Yp   )   ； 若   ( X1   <   Xp   ) ,   则 该 笔画 为   C   弧   ( Angle = 3 ) ;   否则   ,   该 笔画 为   D   弧 ( Angle = 4 ) 。 
 2.3   尾 的 识别 算法   
 　 　 人群 速记 符中 , 大部分 速记 符 之间 的 区别 仅 在于 第三笔   - -   尾 。 尾 笔画 的 主要 特点 ： 笔画 短小 ， 种类 较多且 各类 尾 之间 的 差别 很小 ， 因此 尾 的 识别 的 难点 在于 找出 各类 尾 之间 的 微小 区别 。 从 起始 点 、 终止 点 的 连线   l   的 方向 来分 ， 尾 分为 以下   4   大 类 。 
 　 　 利用 隶属 函数 来 区分   4   大类 的 尾 。 设 笔画 起始 点 （   Xb   ， Yb   ） 、 终止 点   ( Xb   , Yb   )   的 连线   l   与   X   轴 的 夹角 为   A   ，   
 A = arctg ( ( Ye - Yb ) / ( Xe - Yb ) ) 
 　 　 则 上述 除   D   弧外 的   3   大类 尾 的 隶属 函数 分别 定义 为 ：   
 μ   H ( A ) = 1 - min {   min [ | A | , |   π   - A | , | 2   π   - A | ] /   π   / 4 , 1   }   
 μ   P ( A ) = 1 - min {   min [ |   π   / 4 - A | , | 5   π   / 4 - A | ] /   π   / 4 , 1   }   
 μ   V ( A ) = 1 - min {   min [ | 3   π   / 4 - A | , | 7   π   / 4 - A | ] /   π   / 4 , 1   }   
 　 　 给定 一 笔画 的 起始 点 、 终止 点 的 坐标值 ， 则 可以 算出 它 的   μ   H   、   μ   P   、   μ   V   的 值 ， 从而 可 判断 出该 笔画 属于 隶属 程度 最高 的 那个 集合 。   
 　 　 在 判断 出一 笔画 所属 的 大类 以后 ， 再 根据 取样 点 处在 起点 、 终点 的 连线   l   的 不同 位置   ( P   、   N   类   )   或 笔画 的 长短   ( H   、   D   弧类   )   来 细分 该 笔画 具体 属于 哪 一类 。   
 3   特征 匹配 处理   
 　 　 速记 符 的 特征 匹配 就是 根据 手写 速记 符 的 特征 记录   (   由该 速记 符 的 各 笔画 的 特征 产生   ) ,   从 标准 速记 符库 中 找出 与 之 相匹配 的 标准 速记 符 。 根据 前面 的 分析 ， 以 速记 符 的 交点 或 拐点 为 分界 ， 把 一个 速记 符 划分 成 几个 笔画 段 ， 每个 速记 符 一般 由 两到   3   种 笔画 组成 。 按照 笔画 识别 的 原理 可以 得到 各个 笔画 的 长度 、 倾斜角 、 类型 等 特征 ， 再 将 各 笔画 的 有关 特征 按 一定 的 对应 规则 即可 生成 该 速记 符 的 特征 记录 ， 用该 特征 记录 与 标准 速记 符库 相匹配 ， 即可 得到 标准 的 速记 符 。   
 　 　 为了 匹配 的 方便 ， 将 速记 符 的 各种 笔画 都 用 一个 字符 编码 来 表示 ， 每个 标准 速记 符 的 特征 就 由 各段 笔画 对应 的 字符 编码 组成 。 这样 ， 速记 符 的 特征 匹配 就 仅 需 查阅 速记 符 特征 与 速记 符 区位码 的 对照 文件 ， 找出 与 之 相匹配 的 速记 符 特征 记录 ， 即 得到 相应 的 标准 速记 符 的 区位码 。   
 3.1   速记 符 特征 记录 的 生成 与 匹配   
 　 　 基本 的 速记 符有 近   400   个   ,   为了 匹配 的 方便 和 提高 匹配 的 效率   ,   我们 根据 速记 符 的 起始 笔画 的 不同   ,   把 基本 的 速记 符 分为 ：   ( 1 )   以线 起笔 的   ; ( 2 )   以 椭圆 弧 起笔 的   ; ( 3 )   以 圆弧 起笔 的 。 这   3   种 类型 速记 符 分别 存放 在 不同 的 文件 中 ， 这样 ， 在 特征 匹配 的 时候 ， 就 可以 根据 速记 符 的 起笔 的 特征 查找 对应 的 文件 ， 大大 缩小 了 查找 的 范围 ， 提高 了 匹配 的 效率 。   
 　 　 3   种有 规律 的 基本 速记 符 的 特征 记录 的 数据结构 如下 ：   
 　 　 以线 起笔 的 速记 符 的 特征 记录 ：   
 struct   line   
 　 {   char   length   ；   / /   起笔   (   线   )   的 字符 编码   
 　 　 char   circle   ；   / /   第二笔   (   圆弧   )   的 字符 编码   
 　 　 char   tail   ；   / /   第三笔   (   尾   )   的 字符 编码   
 　 　 char   code   [ 4 ]   ；   / /   速记 符 的 区位码   
 　 　 }   
 　 　 以 椭圆 弧 起笔 的 速记 符 的 特征 记录 ：   
 struct   arc   
 　 {   char   curve   ；   / /   起笔   (   椭圆 弧   )   的 字符 编码   
 　 　 char   circle   ；   / /   第二笔   (   圆弧   )   的 字符 编码   
 　 　 char   tail   ；   / /   第三笔   (   尾   )   的 字符 编码   
 　 　 char   code   [ 4 ]   ；   / /   速记 符 的 区位码   
 　 　 }   
 　 　 以 圆弧 起笔 的 速记 符 的 特征 记录 ：   
 struct   circles   
 　 {   char   circle   ；   / /   起笔   (   圆弧   )   的 字符 编码   
 　 　 char   length   ；   / /   线 的 字符 编码   
 　 　 char   curve   ；   / /   椭圆 弧 的 字符 编码   
 　 　 char   tail   ；   / /   尾 的 字符 编码   
 　 　 char   code   [ 4 ]   ；   / /   速记 符 的 区位码   
 　 　 }   
 　 　 将 速记 符 各 笔画 的 特征值 存放 在 一个 数组 中 ， 根据 其 各自 字符 编码 表 的 对应 关系 就 可以 方便 地 生成 该 速记 符 的 特征 记录 。   
 　 　 根据 各 速记 符 的 起笔 不同 ， 顺序 查找 相应 的 文件 ， 若 有 前   3   个域 完全 匹配 的 记录 ， 则 返回 该 记录 的 区位码 域   ( code )   ， 否则 ， 显示 出错 信息 。   
 4   结束语 
 　 　 语言文字 的 信息处理 已 是 计算机 应用 的 一个 重要 方向 。 速记 是 手写 文字 的 简化 和 发展 ， 是 一种 快速 记录 语言文字 的 符号 系统 ， 速记 对 中文 具有 特殊 的 意义 。 本文 旨在 就 中 文笔 式 人群 速记 电脑系统 中 速记 符 的 笔画 分类 及其 数据结构 作 了 详细 的 介绍 ， 并 对 笔画 识别 的 主要 算法 以及 特征 匹配 处理 的 方法 进行 了 深入研究 ， 具有 实用价值 ， 并 为 下 一步 信息 翻译 处理 的 研究 奠定 了 可靠 的 基础 。   
 作者 单位 ： 华南 师范大学 计算机科学 系 
 参考文献   
 1   廖 人群   .   人群 速记   .   广州   :   科学普及 出版社 ，   1985   
 2   张忻中   .   汉字 识别   .   北京   :   清华大学出版社 ，   1992   
 3   胡家 忠   .   计算机 文字 识别 技术   .   北京   :   气象 出版社 ，   1991   
 4   杨泽红 ， 夏莹   .   联机 手写 汉字 识别系统 接口 的 智能化   .   中文信息   .   CIP , 1996 , 2 : 38 - 41   
 5   赵珀璋 ， 徐力   .   计算机 中文信息处理   .   北京   :   宇航 出版社 ，   1989   
