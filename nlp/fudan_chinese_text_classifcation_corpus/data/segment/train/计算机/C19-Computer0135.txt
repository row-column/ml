计算机 应用 
 COMPUTER   APPLICATIONS 
 1999 年   第 19 卷   第 10 期   Vol.19   No.10   1999 
 
 
 
 光 接入网 自愈 结构 
 郭俊能 　 吴翠先 　 陈继努 
 　 　 摘 　 要 　 本文 简要 介绍 了 光 接入网 的 几种 自愈 结构 及其 特点 ,   重点 讨论 了 接入网 中 的 自愈 轮 技术 及其 优点 。 
 　 　 关键词 　 光 接入网 , 自愈 结构 , 自愈 轮 
 SELF - HEALING   ARCHITECTURES   IN   OPTICAL   ACCESS   NETWORK 
 Guo   Junneng 　 Wu   Cuixian 　 Chen   Jinu 
 Scientific   Institute   of   Chongqing   University   of   Posts   and   Telecommunications ，   Chongqing   400065 
 　 　 Abstract 　 This   paper   gives   a   brief   overview   of   the   self - healing   architectures   in   optical   access   network   and   their   characteristics .   And   then   the   analysis   is   made   about   the   self - healing   wheel   technology   and   its   advantages   in   detail . 
 　 　 Keywords 　 Optical   access   network ,   Self - healing   architecture ,   Self - healing   wheel 
 1 　 引言 
 　 　 所谓 光 接入网 , 就是 部分 或 全部 采用 光纤 传输 的 接入网 , 它 可定义 为 用户 ( 指 属于 集团 用户 的 路由器 或 网关 , 或 属于 网络 提供者 的 边缘 路由器 ) 和 本地 交换机 之间 共享 同样 网络 侧 接口 且 由光 接入 传输 系统 支持 的 一系列 接入 链路 , 由 OLT ( 光 线路 终端 ) 、 ODN ( 光 配线 网 ) 、 ONU ( 光 网络单元 ) 及 AF ( 适配 功能 ) 组成 , 可能 包括 若干 与 同一 OLT 相连 的 ODN 。 
 2 　 环型 光 接入网 
 　 　 网络 的 拓扑 和 结构 泛指 网络 的 布局 和 形状 , 在 接入网 环境 中 , 网络 的 拓扑 和 结构 直接 与 网络 的 效能 、 可靠性 、 经济性 和 提供 的 业务 直接 相关 , 具有 至关重要 的 作用 。 在 这里 , 我们 主要 从 接入网 物理 结构 配置 的 角度 介绍 光 接入网 结构 的 特点 。 
 　 　 在 光 接入网 中 , ODN 是 一种 点到 多点 的 结构 , 按照 其 连接 的 不同 可 分为 四种 结构 ： 星型 、 树型 、 总线 和 环型 。 这里 我们 主要 就 环行 接入网 结构 进行 讨论 。 
 　 　 环行 结构 如图 1 所示 。 目前 的 窄带 接入网 的 核心 由 SDH 环 组成 。 由 SDH   ADM ( Add - Drop   Multiplexer , 分插 复用器 ) 构成 的 SDH 环可 具有 通道 保护环 和 复用 段 保护环 , 即 具有 自愈 功能 。 如果 采用 ATM 作为 核心 , 为了 使 宽带 光 接入网 具有 竞争力 , 必须 具有 自愈 功能 。 要求 保护 倒换 时间 小于 50ms , 即能 与 SDH   ADM 构成 的 环 保护 切换 时间 相当 , 才能 与 SDH 环 竞争 。 宽带 光 接入网 的 自愈 功能 可 通过 预 设置 连接 配置 功能表 实现 , 将 一根 光纤 作为 工作 光纤 , 而 另 一根 作为 备用 光纤 , 当 网管 系统 检测 到 工作 光纤 失效 时 , 自动 倒换 到 备用 光纤 上 , 从而 实现 自愈 。 
 
 图 1 　 双向 自愈 环 结构 的 光 接入网 
 　 　 由于 接入网 不 含 交换 功能 , 只具 交叉 连接 、 复用 等 功能 , 所以 接入网 的 核心 设备 只 需 SDH   ADM   或 ATM   ADM 即可 实现 。 自愈 环在 用户 和 交换机 之间 提供 透明 的 承载 通路 。 在 接入网 的 混合式 环 - 星型 或环 - 总线结构 中 , 环 只是 接入网 的 一个 组成部分 。 
 3 　 目前 的 选择 
 　 　 当前 主要 采用 三种 结构 ： 
 　 　 .   STM 集中器 ：   在 这种 结构 中 , SDH 用于 传输 、 复用 以及 承载 通路 恢复 。 自愈 环是 单向 路径 倒换 自愈 环 ( Unidirectional   path   switched   Self - Healing   Ring ,   USHR ) , 对 集中式 业务 需求 来说 , 效率 较 高 。 在 LE 中 的 结点 叫做 头 结点 , 以便 与 外围 结点 相 区别 。 根据 需要 , 由 STM 集中器 提供 给 用户 透明 的 承载 通路 , 一些 用户 可能 用 专线 。 
 　 　 .   ATM   集中器 ： 在 这种 结构 中 , 利用 ATM 和 SDH 进行 复用 。 用 SDH 单向 环来 对 对 虚 容器 进行 传输 和 保护 , 这些 虚 容器 终结 于 ATM 集中器 结点 。 ATM 集中器 将 ATM 虚 通道 复用 到 承载 信道 上去 。 
 　 　 .   ATM 复用 ： 在 这种 结构 中 , 仅 在 ATM 层 进行 复用 , SDH 的 帧 结构 , 如 STM - 1 , 可 用于 通过 环 的 ATM 复用 结点 。 实际上 , 该环 与 分布式 ATM 复用器 相当 。 结果 , SDH   自愈 功能 不能 保护 ATM 虚 通道 , 甚至 为了 防止 物理层 失效 ,   必须 采用 基于 ATM 层 的 恢复 机制 。 在 该 机制 中 , ADM 结点 是 ATM   VP   ADM 。   该 结构 也 称 ATM   自愈 环 结构 。 
 　 　 目前 , 在 接入网 中 采用 SDH 环 主要 考虑 了 以下 因素 : 
 　 　 ①   经过 环 的 传输 和 交换 共享 ; 
 　 　 ②   SDH 环 自愈 功能 简单 ; 
 　 　 ③   SDH 环 传输速率 较 高 , 功能性 变换 所 需 的 端口 和 光纤 少 , 似乎 对 接入网 有利 。 
 　 　 进一步 分析 , 似乎 条件 ① 和 ② 在 交换式 宽带 业务 中起 不到 十分 重要 的 作用 。 在 STM 和 ATM   集中 机制 中 ,   在 所有 结点 中 运用 了 环 带宽 固定 的 划分 。 在 环中 进行 基于 呼叫 的 动态 带宽 分配 需要 对 现存 的 设备 作 较大 、 且 较 复杂 的 修改 。 另一方面 , 虽然 SDH 通道 保护 自愈 环 协议 简单 且 速率 快 , 但 它 不适 用于 跨环 共享 SDH 承载 通道 。 
 4 　 自愈 轮 
 　 　 基于 上述 讨论 , 环 结构 是 在 以 较 高 的 传输率 为 代价 的 条件 下 , 利用 较少 的 光纤 和 头 结点 来 构成 光 接入网 自愈 结构 , 它 可能 对 某些 环境 不 适用 。 在 多数 情况 下 , 网络 供应商 将 考虑 以下 条件 ： 
 　 　 .   外围 结点 的 简化 ; 
 　 　 .   在 保持 简单 的 SDH   1 + 1 保护 机制 的 同时 , 获得 同 ATM 复用 结构 相当 的 使用 等级 ; 
 　 　 .   在 头尾 结点 中 获得 较 星型 拓扑 更优 的 端口数 ; 
 　 　 .   低优先级 和 非 保护 型业务 的 提供 ; 
 　 　 .   从 现存 的 SDH 环 的 移植 以及 加减 复用器 结点 的 重用 。 
 4.1 　 自愈 轮 结构 
 　 　 图 2 表示 了 自愈 轮 的 结构 。 头 - 尾 结点 位于 轮 的 中央 , 叫做 轮 彀 ( Hub ) 。 外围 结点 称作 轮缘 结点 。   承载 着 保护 型业务 , 沿着 轮缘 流动 的 光纤 环 , 称为 轮缘 光纤 。 轮辐 承载 着 工作 业务 。 
 
 图 2 　 自愈 轮 结构 
 　 　 在 图 2 中 , 轮辐 和 轮缘 光纤 是 分开 的 , 但 实际上 , 它们 在 光缆 的 同一个 平面 上 , 或用 相同 的 光缆 承载 的 WDM ( Wave   Division   Multiplex ) 轮辐 信号 。 自愈 轮 的 恢复 协议 必须 考虑 失效 轮辐 和 轮缘 之间 的 相关性 。 轮 彀 也 叫做 ATM 交叉 连接器 或 交换器 , 它 采用 SDH 的 传输 协议 , 并且 用 ATM 来 进行 复用 和 恢复 。 轮缘 结点 叫做 ATM   VP   ADM   结点 , 它 采用 SDH   1 + 1 保护 倒换 机制 。 
 　 　 轮缘 结点 选择 从 轮缘 和 轮辐 来 的 信号 的 拷贝 , 选择 其中 较 好 的 , 作为 从 轮辐 来 的 工作 信号 。 当 工作 信号 失效 时 , 自愈 功能 选择 轮缘 信号 , 当 失效 修复 时 再 将 它 倒换 到 正常 工作 状态 。 
 　 　 当 SDH 层 考虑 1 + 1 保护 时 , 这 两个 信号 互为 拷贝 信号 , 而 信号 的 实际 内容 是 不同 的 。 图 3 显示 了 带有 端到 端 虚 通道 ( VP ) 的 自愈 轮 。 在 每 一个 轮缘 结点 和 轮 彀 之间 有 两类 VP : 保护 型 VP 和 非 保护 型 VP 。 在 正常 操作 状态 下 , 对于 下游 业务 , 轮 彀 将 保护 型 VP 复制到 轮缘 光纤 上 。 轮辐 则 包含 了 保护 型 和 非 保护 型 VP 。 对于 上游 业务 , 每个 轮缘 结点 复制 保护 型 和 非 保护 型 VP 到 其 输出 端口 ( 轮缘 和 轮辐 ) 。 
 
 图 3 　 正常 工作 状态 下 带有 端到 端 VP 的 自愈 轮 
 　 　 我们 可以 看出 , 在 自愈 轮中 , 轮辐 和 轮缘 结点 的 行为 是 截然不同 的 。 特别 地 , 轮缘 结点 设计 较 简单 , 它 仅 利用 了 SDH 和 ATM 中仅 有 的 最小 功能 ( 即 SDH 的 恢复 机制 和 ATM 复用 机制 ) , 而 这些 功能 恰恰 在 其 协议 中较 完善 。 在 轮缘 和 轮辐 上 , SDH 和 ATM 层 侧重于 信号 内容 的 不同 方面 。   SDH 层 考虑 1 + 1 保护 机制 , 轮辐 和 轮缘 信号 是 相同 的 拷贝 ; 而 ATM 层则 留意 1 ： N 保护 系统 , 在 该 系统 中 , 一条 普通 的 路径 ( 轮缘 光纤 ) 用于 多个 点对点 通信 通道 中较 高 优先级 业务 的 恢复 。 这样 可 实现 在 轮缘 结点 上 采用 简单 的 SDH 保护 , 而 同时 维持 与 ATM 复用 结构 相当 , 甚至 更优 的 利用 等级 。 
 　 　 在 正常 工作 状态 下 , 自愈 轮 与 星型 拓扑 相当 。 在 星型 结构 中 , 每个 轮缘 结点 利用 所有 的 轮 带宽 同轮 彀 点 通信 。 该 带宽 既 用于 保护 型业务 , 也 用于 非 保护 型业务 。 在 链路 失效 模式 中 , 轮 将 “ 简化 ” 成 同样 带宽 的 ATM 复用 结构 。 
 4.2 　 自愈 轮 协议 
 　 　 电缆 的 切断 常 引起 多 信号 失效 。 电缆 失效 的 信号 丢失 ( LOS ) 监测点 。 轮缘 和 轮 彀 自愈 协议 可 叙述 如下 ： 
 4.2 . 1 　 在 失效 过程 中 轮缘 结点 的 功能 
 　 　 .   轮缘 结点 中 ,   SDH 层 将 默认 选择 正常 状态 下 的 轮辐 信号 。 
 　 　 .   当 检测 到 输入 的 轮辐 信号 LOS 时 ： 
 　 　 a )   1 + 1 选择器 将 倒换 到 轮缘 光纤 信号 ; 
 　 　 b )   该 结点 同时 设置 上游 轮辐 信号 的 AIS   ( Alarm   Indication   Signal , 告警 指示 信号 ) 。 
 　 　 .   如果 在 轮缘 信号 上 检测 到 LOS ： 
 　 　 a )   不 发生 保护 切换 ; 
 　 　 b )   为 流出 的 轮缘 设置 AIS 。 
 　 　 .   轮缘 结点 检测 到 AIS 后 , 采用 同 LOS 一样 的 保护 切换 协议 , 只是 AIS 不 传播 。 
 　 　 .   如果 在 到达 的 轮辐 和 轮缘 信号 中 都 检测 到 了 AIS , 保护 切换 将 选择 轮缘 信号 ; 如果 只 在 其中 的 一个 检测 到 AIS , 而 在 另 一个 上 检测 到 LOS , 则 必须 选择 带有 AIS 的 信号 。 
 　 　 .   在 ATM 层 , 当 选择 优先级 较 低 的 业务 轮缘 信号 时 , 由于 溢出 , 其中 一些 业务 可能 被 先 占 。 
 4.2 . 2 　 轮缘 结点 数 流动 方向 
 　 　 从轮 彀 的 角度看 , 轮缘 结点 数将 沿着 业务 流动 方向 从 1 ～ Q 递增 。 自愈 算法 可 总结 如下 ： 
 　 　 .   如果 只 在 一条 轮缘 光纤 上 检测 到 LOS 或 AIS , 不 做 任何 操作 ( 除了 可能 将 失效 告知 网络管理 应用 ) 。 
 　 　 .   如果 在 一个 或 多个 流入 轮辐 信号 中 检测 到 LOS , 则 ： 
 　 　 a )   将 最小 的 失效 轮辐 号 赋 给 i ; 
 　 　 b )   为 所有 到 点   i + 1 , i + 2 , … , Q 的 下游 轮辐 信号 设置 AIS ; 
 　 　 c )   将 所有 结点 号 为   i + 1 , i + 2 , i + 3 , … , Q   相关 的 保护 型 VP 倒换 到 结点 i 的 轮辐 信号 上 ; 
 　 　 d )   将 所有 结点 号 为   i + 2 , i + 3 , … , Q   的 相关 保护 型 VP 倒换 到 结点 i + 1 的 轮辐 信号 上去 ( 这样 能 恢复 轮缘 结点 失效 ) ; 
 　 　 e )   在 轮缘 信号 上 接收 所有 来自 结点   i ,   i + 1 , i + 2 , … , Q 的 保护 型 上游 业务 ( 或 相当于 来自 结点 Q 的 轮辐 信号 ) 。 
 　 　 .   如果 检测 到 一个 或 多个 流入 轮辐 信号 上 的 AIS , 则 ： 
 　 　 a )   将 最大 的 失效 轮辐 号 赋 给 j ; 
 　 　 b )   为 所有 到 点 j - 1 , j - 2 , … , 1 的 下游 信号 设置 AIS ; 
 　 　 c )   在 结点 号 为 j 的 流入 轮辐 信号 处 接收 所有 来自 结点 j - 1 , j - 2 , … , 1 的 保护 型 上游 业务 。 
 　 　 注意 ： 如果 在 轮辐 信号 上 既 检测 到 AIS , 又 检测 到 LOS , 并且 j ≥ i ,   则 自愈 轮 将 面临 着 多条 链路 同时 失效 , 并且 一些 连接 将会 丢失 。 
 　 　 如果 自愈 轮 光纤 切断 或 轮缘 结点 失效 , 则 会 有 同样 的 自愈 效果 。 本文 中 所 描述 的 单汇接 自愈 轮 , 不能 恢复 失效 轮 彀 。 
 4.3 　 自愈 轮 与 ATM 环相 比较 
 　 　 选择 自愈 轮 还是 ATM 环 ( 也 就是 前面 讨论 的 ATM 复用 结构 ) 依赖于 不同 的 业务 模式 。 
 　 　 在 非 失效 模式 下 , 自愈 轮 的 带宽 和 星型 拓扑 相当 。 失效 时 , 自愈 轮 将 “ 简化 ” 为 ATM 环 。 在 保护 型业务 中 自愈 轮能 承载 同 ATM 环 相当 的 带宽 , 而 在 非 保护 型 型业务 中 , 它 能 承载 ( Q - 1 ) * C 的 容量 , 其中 Q 代表 轮缘 结点 数 , C 代表 轮 的 带宽 。 在 头尾 结点 中 的 端口数 和 所用 的 光纤 数 方面 , 自愈 轮 结构 不如 ATM 复用 结构 有效 。 在 这点 上 , 它 是 星型 拓扑 和 ATM 复用 结构 之间 的 一种 折衷 。 另一方面 , 由于 自愈 轮 更 简单 的 保护 机制 , 所以 其 轮缘 结点 比 它们 的 ATM 环 副本 更 简单 。 自愈 轮 协议 的 另 一个 优点 是从 SDH   环 结构 移植 时 , 可 实现 ATM   ADM 同 现存 的 SDH   ADM 的 结点 接口 。 
 5 　 结语 
 　 　 当 自愈 轮 从 SDH 环 平台 移植 过来 时 , 它 能 与 现存 的 SDH   ADM 结点 兼容 , 并 能 提供 ATM   环 的 完全 复用 带宽 。   自愈 轮 在 头尾 结点 中 需要 更 多 的 端口 , 但 其 外围 结点 设备 简单 。   对于 非 保护 型业务 , 它 可 达到 星型 结构 相当 的 性能 。 
 作者简介 ： 郭俊能 　 博士 研究生 。 主要 研究 方向 为 ATM 网络 性能 分析 。 
 吴翠先 　 硕士 研究生 。 主要 研究 方向 为 宽带接入 网 、 ATM 网络 性能 分析 。 
 陈继努 　 教授 。 主要 研究 方向 为 宽带接入 网 、 B - ISDN 与 ATM 网络 性能 。 
 作者 单位 ： 重庆 邮电学院 科研所 　 重庆 （ 400065 ) 
 参考文献 
 ［ 1 ］ 　 颜 清华 .   光 同步 数字传输 与 自愈 网络 .   北京 ： 电子 工业 出版社 , 1996 
 ［ 2 ］ 　 裘晓峰 ， 等 .   宽带 网络 技术 及其 应用 .   北京 ： 清华大学出版社 , 1997 
 ［ 3 ］ 　 Farzad   Safaei   and   Bruce   Tonkin .   Self - Healing   Wheels   in   Local   Loop .   ICC ′ 98 , 1998 ； 1 ( 1 ) : 187 - 191 
 收稿 日期 : 1999 - 04 - 19 
