计算机 工程 
 Computer   Engineering 
 1999 年 　 第 25 卷 　 第 9 期 　 Vol.25   No.9     1999 
 
 
 
 网上 教学 中 有关 数学 表达式 输入 问题 解决 途径 的 探讨 
 翁晓霞 　 张 　 骏 　 江 　 源 
 　 　 摘 　 要 ： 对 解决 Web 页面 上 缺少 有效 的 方法 来 表示 数学 表达式 符号 的 总是 进行 了 探讨 ， 现有 3 种 解决 方法 ： 图片 方式 、 MathML 方式 和 插件 方式 ． 阐述 了 这 3 种 方法 的 具体 实现 方式 并 进行 了 详细 的 比较 ， 然后 提出 了 一种 比较 好 的 实现 方式 ． 
 　 　 关键词 ： 网上 教学 ； 插件 ； 数学 标记 语言 ； 文件 上载 
 Comparsion   of   Methods   of   Math   Expressions   on   Web   Pages 
 Weng   Xiaoxia 
 ( Computer   Research   Lab .   of   Post   ＆   Telecommunication   Training   Center ,   Shanghai   200092 ) 
 Zhang   Jun 
 ( Network   Lab .   Dept .   of   Computer   Science ,   Fudan   University ,   Shanghai   200433 ) 
 Jiang   Yuan 
 ( C   ＆   C   Lab .   Dept .   of   Computer   Science ,   Fudan   University ,   Shanghai   200433 ) 
 　 　 Abstract 　 The   Web   lacks   an   effective   means   for   emb .   mathematical   expressions   in   Web   pages .   There   are   three   methods   to   accomplish   the   task .   They   are   picture   upload ,   using   MathML ,   and   plug - in   methods .   Each   has   its   advantages   and   shortcomings .   This   paper   forcuses   on   the   implementation   and   comparsion   of   the   three   methords ,   and   proposes   a   feasible   solution   for   the   current   Web - based   teaching . 
 　 　 Key   words 　 Web - based   course ;   Plug - in ;   MathML ;   File   upload 
 　 　 Web 技术 提供 了 一种 崭新 的 教学方式 。 利用 现有 的 Web 技术 ， 可以 把 传统 的 课堂教学 " 搬 " 到 网上 ， 同时 发挥 它 信息 资源 丰富 和 不受 时间 和 空间 限制 的 优势 。 在 我国 ， 网上 教学 正 处于 起步 阶段 ， 一些 教育工作者 也 开始 尝试 利用 Web 进行 教学 。 许多 大学 都 进行 了 网上 教学 的 实验 ， 一些 有 条件 的 中学 也 建立 了 小规模 的 网上 教学系统 。 
 1 　 一个 棘手 问题 的 提出 － 数学 表达式 的 输入 
 　 　 首先 看 网上 教学系统 的 基本 模型 ( 如图 1 ) 。 该 模型 一般 分为 网上 教学服务 点 、 教学内容 提供者 ( 教师 ) 和 学生 。 学生 可以 访问 多个 网上 教学服务 点 ， 而 教师 只 对 一个 网上 教学服务 点 负责管理 。 
 
 图 1 　 教学系统 基本 模型 
 　 　 在 已 开发 出 的 网上 教学系统 中 ， 一般 是 由 计算机专业 技术人员 按照 教师 的 意图 将 开发 出 的 优秀 课件 存储 在 数据库 中 ， 学生 可以 在 任何 时间 ， 用 浏览器 访问 服务 点 进行 学习 ， 并 能 通过 BBS 和 E - mail 向 教师 提问 或 相互之间 进行 学习 讨论 和 交流 。 学生 或 教师 对于 一般 文本 的 输入 是 不成问题 的 ， 然而 对于 一些 在 数学 物理 中 常用 的 符号 ( 如 积分 符号 ∫ ， 圆周率 符号 π ， 角度 符号 θ ) ， 甚至 连分数 ， 使用 现有 的 HTML 技术 就 无能为力 了 。 因为 HTML 文件 都 是 标准 文本 内容 ， 对于 图片 只能 引用 。 浏览器 中 显示 的 图片 都 是 在 浏览器 解释 < img   src =   picture   URL > 标记 时 ， 根据 src   指定 的 URL ( Unique   Resource   Location ) 通过 HTTP 协议 把 图片下载 到 本地 机器 并 在 浏览器 中 显示 的 。 目前 对于 公式 符号 输入 问题 没有 一个 令人满意 的 解决方案 。 
 2 　 3 种 解决 途径 的 具体 实现 方式 
 2.1   图片 方式 
 　 　 ( 1 ) 图片 制作 　 用 图片 表示 是 最 直截了当 的 方法 。 图片 的 制作 由 教师 和 学生 用 现有 的 工具 ， 如 Word 完成 。 Word 中 提供 了 数学 表达式 ( Equation ) 的 输入 模型 ， 其中 包括 了 我们 常用 的 积分 符号 、 求和 符号 、 希腊字母 、 各种 括号 等 常用 符号 ， 可 基本 满足 一般 数学 式子 的 表示 。 然而 这些 符号 却 不能 像 Word 一样 用 OLE 的 方式 直接插入 Web 页面 中 。 
 　 　 最 常用 的 解决 方法 就是 将 Word 中 的 符号 转换成 图片 。 有 各种 方法 可以 实现 ， 比较简单 的 方法 其 操作过程 简述 如下 ： 在 Word 中 ， 利用 Equation 的 输入 模型 完成 数学 式子 的 表示 ， 把 Word 文档 另存为 HTML 文件 ； 然后 再 找到 该 图片 ， 点击 鼠标 右键 ， 把 它 存为 图片 即可 。 一般 图片 都 保存 为 gif 或 jpg 文件 ， 把 图片 制作 好后 ， 然后 就 可以 进行 第二步 的 图片 上载 。 
 　 　 ( 2 ) 图片 上载 　 图片 上载 由 客户程序 和 服务器端 的 程序 合作 完成 。 在 客户端 用 HTML 中 的 FILE   Upload 对象 实现 文件 上载 功能 ， 它 是 一个 FORM   对象 。 在 上载 前 把 Input 标记 中 的 Type 指明 为 File 。 它 提供 一个 Browse 按钮 和 一个 文本 编辑框 ， 通过 Browse 按钮 查找 到 所要 上载 的 文件 ， 把 文件名 及其 路径 显示 在 文本 编辑框 中 ， 也 可 手工 输入 文件名 及其 路径 ( URL ) 。 在 一个 FORM 中 可以 同时 使用 多个 FileUpload 元素 上载 多个 文件 ， 但 一个 FileUpload 元素 只能 处理 一个 文件 。 由于 上载 的 文件 数据量 大 ， 因而 在 FORM 的 标记 中 ， METHOD 为 POST ， 而 不是 GET 。 FORM 的 格式 如下 所 写 ： 
 　 　 < FORM   ACTION = " picInput . htm "   METHOD = " POST "   ENCTYPE = " multipart / form - data "   > 
 　 　 input   file   name   :   < input   type = file   name = myname > 
 　 　 < /   FORM   > 
 其中 Action 是 服务器端 的 处理 文件 ， 可以 是 一个 Server 端的 HTML 文件 ， 也 可以 是 一个 CGI 程序 。 
 　 　 FORM 提交 之后 ， Server 端的 程序 分析 提交 上来 的 数据 。 首先 分析 出 文件名 ， 因为 要 防止 文件 重名 ， 必须 把 文件 按 一定 的 命名 规则 重新命名 ， 然后 分析 出 文件 的 内容 ， 以新 的 文件名 把 它 存为 文件 。 最后 修改 img 标记 中 的 src ， 使 它 指向 图片 在 服务器 上 的 URL 。 这样 上载 的 过程 就 完成 了 。 
 2.2   数学 标记 语言 
 　 　 为了 解决 数学 符号 在 浏览器 上 的 显示 ,   W3C 在 1998 年 4 月 7 日 发布 了 数学 标记 语言 MathML   1.0 ( Mathematical   Mark   Language ) 的 规范 说明书 。 它 的 目标 是 使 各种各样 的 数学 表达式 能够 在 WWW 上 传送 、 接收 和 处理 。 它 对 XML   ( Extended   Marked   Language ) 作 了 补充 ， 用 标记 的 形式 来 定义 数学 表达式 。 
 　 　 MathML   有 3 种 类型 标记 ： ① 表达 标记 描述 了 数学 符号 结构 ， 如 < mrow >   … < / mrow > 标记 ， 表示 其中 的 字符串 是 水平 显示 。 ② 内容 标记 直接 描述 数学 对象 ， 如 加号 < plus / > 。 表达 标记 和 内容 标记 都 能 分别 表示 数学 表达式 ， 它们 的 不同点 在于 表达 标记 是从 数学 表达式 的 显示 形式 来 描述 ， 而 内容 标记 是从 数学 表达式 本身 的 内在 含义 来 进行 描述 。 ③ 界面 标记 < math > … < / math > 是 最高层 的 标记 ， 它 的 作用 在于 传递 在 < math   … > 中 设置 的 参数 给 MathML   的 处理程序 ， 这些 参数 影响 整个 数学 表达式 的 显示 ， 并 在 MathML   的 处理程序 和 浏览器 之间 传递信息 提供 了 一种 机制 。 
 　 　 数学 表达式 具有 递归性 ， 即 表达式 是 由子 表达式 构成 。 MathML 利用 了 数学 表达式 的 这个 最大 特点 ， 设计 了 它 的 标记 方式 ， 使得 两种 标记 类型 ， 表达 标记 和 内容 标记 也 都 体现 了 递归性 。 而且 MathML 的 表达 也 可 看成 树状 结构 ， 每个 节点 表示 了 一个 MathML 的 标记 ， 每个 树叶 是 数学 表达式 中 的 不可 分 的 单元 ， 如 数字 、 标识符 和 如 < mark _ name / > 类型 的 标记 。 
 　 　 一个 一元二次方程 的 求根 公式   
 用 MathML 的 内容 类型 的 标记 表示 为 如下   。   
 < reln > 
 　 < eq / >   < ci > x < / ci > 
 　 　 < apply >   < over / > 
 　 　 　 < apply >   < fn >   < mo > & PlusMinus ; < / mo >   < / fn > 
 　 　 　 　 < apply >   < minus / >   < ci > b < / ci >   < / apply > 
 　 　 　 　 < apply > < root / > 
 　 　 　 　 　 < apply >   < minus / > 
 　 　 　 　 　 < apply >   < power / >   < ci > b < / ci >   < cn > 2 < / cn >   < / apply > 
 　 　 　 　 　 　 < apply >   < times / > 
 　 　 　 　 　 　 　 < apply >   < times / >   < cn > 4 < / cn >   < ci > a < / ci > < / apply > 
 　 　 　 　 　 　 　 　 < ci > c < / ci > 
 　 　 　 　 　 　 < / apply > 
 　 　 　 　 < / apply > 
 　 　 　 < / apply > 
 　 　 < / apply > 
 　 　 < apply >   < times / >   < cn > 2 < / cn >   < ci > a < / ci > < / apply > 
 　 < / apply > 
 < / reln > 
 2.3 　 插件 方式 
 　 　 ( 1 ) 插件 的 定义   插件 是 一个个 独立 的 代码 库 、 动态 模块 ，   集成 在 浏览器 的 环境 中 ， 用来 扩展 浏览器 处理 各种 数据类型 和 文件格式 的 能力 。 这 使得 用户 可以 开发 自己 的 插件 来 完成 特定 的 应用 。 
 　 　 当 浏览器 启动 时 , 它 搜索 可用 的 插件 , 注册 它们 支持 的 MIME   ( Multi - purposes   Internet   Mail   Extension   protocol ) 类型 。 如果 浏览器 收到 某一 插件 支持 的 MIME 类型 文件 ， 它 就 加载 此 插件 并 将 这个 文件 交给 该 插件 处理 ， 当 离开 该 页面 或 关闭 该 浏览器 窗口 时 ， 就 结束 该 插件 的 运行 。 
 　 　 在 HTML 中 ， EMBED   标记 就是 用来 标明 一个 插件 的 ， 在 高 版本 的 浏览器 中 还 可以 用 OBJECT   标记 。 它 有 以下 主要 属性 值 ： 
 　 　 < EMBED   SRC = " location "   TYPE = " MIMEtype "   HEIGHT = " height "   WIDTH = " width "   NAME = " pluginName "   > 
 　 　 　 　 < / EMBED > 
 其中 必须 包含 SRC 或 TYPE 属性 ， SRC 指明 了 要 运行 的 文件 ， TYPE 指明 了 MIME 的 数据类型 ， 也 可以 是 自己 定义 的 类型 。 根据 需要 可以 自己 在 EMBED   中 定义 其它 属性 值 。 
 　 　 浏览器 对 EMBED   标记 与 IMG   标记 的 处理 基本相同 ， 唯一 的 不同 在于 EMBED   能 响应 用户 事件 如 鼠标 单击 ， 而 IMG 标记 却 不能 。 这一 特点 也 就 决定 了 插件 方式 优于 图片 方式 ， 即 它 能 根据 用户 事件 来 改变 数学 表达式 的 显示 ， 而 图片 不能 做到 这 一点 。 
 　 　 ( 2 ) 用 插件 实现 Web 页面 中 数学 表达式 的 表示 方法   就是 利用 插件 扩展 浏览器 ， 处理 各种 MIME 数据类型 的 功能 ， 使得 浏览器 遇到 登记 的 表示 数据 公式 的 数据类型 时 ， 就 调用 处理 数学 表达式 的 插件 程序 ， 把 文本 形式 的 数学 表达式 在 浏览器 窗口 中 用 图形 的 方式 表示 ， 因而 就 存在 一个 如何 用 语言 形式 文本 表示 数学 表达式 的 问题 。 用 类似 MathML 的 复杂 标记 是 不 适合 用 插件 来 实现 的 ， 数学 表达式 的 表示 应当 简单 易懂 。 因而 把 数学 符号 用 自然语言 来 表达 ， 是 最 直观 、 简单 易懂 的 方法 。 但 必须 对 自然语言 加以 规范 ， 使得 它 明确 、 易懂 、 简洁 ， 并且 不 产生 歧义 ， 有 一定 的 语法 规则 ， 易于 计算机程序 的 实现 。 
 　 　 在 国外 已经 开发 出 了 专门 解决 数学 表达式 的 应用软件 ， 如 EzMath ， 一元二次方程 的 求根 公式 用 EzMath 的 语法 ， 在 HTML 文本 中 表示 为 ： 
 　 　 < EMBED   TYPE = " text / ezmath "   ALIGN = absmiddle   WIDTH =   171   HEIGHT = 63 
 　 　 　 　 ALT = " x   =   { - b   plus   or   minus   sqrt   { b ＾ 2   -   4ac } } / 2a " > 
 　 　 < / EMBED > 
 它 的 ALT 是 自己 定义 的 属性 ， 该 属性 传递 数学 表达式 给 处理 EzMath   的 插件 ， EzMath   的 插件 根据 宽度 值 、 高度 值 和 其它 属性 值 ， 把 数学 表达式 显示 在 浏览器 窗口 中 。 
 3 　 3 种 解决 途径 的 优劣 比较 分析 
 3.1   图片 方式 
 　 　 利用 图片 方式 来 解决 数学 表达式 的 显示 ， 是 一种 比较 原始 、 笨拙 的 方法 ， 它 的 缺点 是 显而易见 的 。 
 　 　 首先 ， 图片 文件 相对 较大 ， 一般 都 要 近 1kB 。 数学 表达式 很多 是 相同 的 ， 图片 就 有 大量 的 冗余 ， 这样 就 消耗 了 大量 的 服务器 存储空间 。 其次 ， 图片 在 浏览器 上 显示 时 ， 其 下载速度 相对 文字 要慢 很多 ， 占用 更 多 的 网络资源 ， 较长时间 的 等待 对 用户 有时 是 难以容忍 的 。 而且 对于 用 Modem   上网 的 学生 来讲 ， 下载速度 慢 意味 更长 地 占用 电话线 ， 支付 更 多 的 电话费 ， 这 显然 不利于 网上教育 的 推广 。 再次 ， 图片 作为 文件 单独 存储 在 服务器 的 文件系统 中 ， 而 教学 的 其它 文字 内容 存储 在 数据库 中 ， 在 管理 上 存在 不一致性 ， 要 同时 管理文件 和 数据库 。 而且 由于 图片 作为 一个 文件 存储 在 服务器 上 ， 就 产生 了 安全 问题 。 如果 上载 的 不是 一个 图片 ， 而是 一个 恶意 的 程序 ， 那么 就 有 可能 造成 巨大 的 破坏 和 影响 。 另外 ， 图片 质量 的 好坏 由 制作者 及其 使用 的 工具 来 决定 的 。 在 Web   页面 上 显示 时 与 背景 和 上下文 很难 溶为 一体 ， 欠 美观 。 最后 指出 的 是 ， 在 处理 图片 上载 时 比较 烦琐 ， 需要 分 两步 。 首先 指明 哪个 地方 存在 数学 表达式 ， 用 特殊 的 符号 标记 ； 然后 分析 输入 的 内容 ， 有 多少 特殊 的 符号 标记 ， 就要 生成 多少 个 FileUpLoad 控件 ， 在 各个 FileUpLoad 中 输入 图片 的 URL ， 再 进行 上载 。 
 　 　 然而 目前 在 Web 页面 上 表示 数学 表达式 的 规范 还 没有 得到 广泛 认可 和 推广 前 ， 这种 解决 符号 输入 问题 的 途径 也 不失为 一种 实用 的 方法 。 学生 和 老师 不 需要 特殊 的 专业知识 和 专业 制作 工具 ， 制作 简单 方便 。 其 最大 的 优点 在于 不用 开发软件 ， 利用 现有 的 工具 即可 完成 。 
 3.2 　 标记 语言 
 　 　 MathML   是 为了 计算机 之间 的 通信 而 设计 的 一种 描述 数学 表达式 的 低层 格式 。 应用 专门 的 工具 编辑 ， 而 不是 手工 去 编写 。 它 标记 的 递归性 和 树状 结构 使得 它 在 计算机程序 的 实现 上 更 方便 、 简单 ， 优于 自然语言 形式 表达 的 插件 方式 。 
 　 　 它 使用 文本 的 形式 ， 不 存在 使用 图片 方式 的 缺点 。 然而 它 的 树状 结构 和 完整 标记 的 优点 同时 也 是 缺点 ， 使得 一个 简单 的 数学 表达式 ， 显得 冗长 、 复杂 而 难懂 。 而且 现在 使用 MathML 还 不行 ， 至少 要 等到 Netscape 和   IE   都 支持 它 才能 得以 普遍推行 。 但 从 长远 的 角度看 ， MathML 是 解决 数学 表达式 的 最好 方法 。 然而 它 只能 解决 公式 的 表示 ， 当 遇到 数学 图表 或 物理化学 图表 的 表示 时 ， 就 只能 使用 图片 的 方式 了 。 
 　 　 虽然 MathML 也 能 用 插件 方式 实现 ， 但 不如 使用 HTML 中 本身 就 有 的 插件 标记 方便 ， 最好 的 实现 方式 是 结合 在 浏览器 内部 实现 ， 成为 HTML 的 一部分 。 
 3.3 　 插件 
 　 　 目前 使用 插件 是 较 好 的 解决 途径 。 它 简单 易懂 ， 并且 由于 使用 文本 的 形式 ， 也 不 存在 使用 图片 方式 的 缺点 ， 不必 作为 文件 存储 在 服务器 上 ， 数据 保存 在 数据库 中 ， 方便管理 。 但 它 也 有 不少 的 困难 ： 
 　 　 ( 1 ) 必须 在 每个 浏览器 的 Plug - in   目录 下 安装 专门 开发 的 插件 ， 只有 安装 该 插件 的 浏览器 才能 看到 数学 表达式 ， 因而 不利于 网上 教学 的 广泛 推广 和 应用 。 
 　 　 ( 2 ) 开发 这 类 插件 是 一件 比较 困难 的 任务 ， 要 费时费力 地 定义 一套 完整 的 无二义 的 数学 表达式 的 表示 语法 。 表示 语法 能否 得到 公认 ， 成为 规范 ， 以便 推广 ， 也 是 一个 短时间 内 不能 解决 的 问题 ， 如果 各自 开发 各自 的 表示 语法 ， 不能 相容 ， 也 不利于 网上 教学 的 推广 和 应用 。 
 　 　 ( 3 ) 插件 只能 解决 公式 的 表示 ， 当 遇到 数学 图表 或 物理化学 图表 时 ， 插件 也 无能为力 ， 只能 借助 图片 的 方式 。 
 　 　 ( 4 ) 虽然 它 的 表示 简单 易懂 ， 但 教师 和 学生 使用 时 也 必须 要 专门 学习 ， 掌握 它 的 表示 语法 。 
 因而 必须 再 开发 专门 的 输入 系统 。 
 3.4 　 输入 器 － － 图片 方式 与 插件 方式 的 组合 
 　 　 为了 克服 单纯 的 图片 方式 和 单纯 的 插件 方式 的 缺点 ， 可以 把 两种 方式 合二为一 ， 开发 与 网上 教学系统 配套 的 输入 器 。 在 输入 公式 时 使用 插件 方式 ； 图表 的 输入 利用 图片 方式 完成 。 由于 图表 应用 的 可能性 和 冗余 要 远远 小于 数学 表达式 ， 可 大大减少 资源 的 消耗 。 而 数学 表达式 表示 的 语法 定义 可以 借鉴 国外 已有 的 产品 ， 并 逐步完善 它 的 语法 定义 。 这样 可 发挥 两种 方式 各自 的 优势 ， 扬长避短 。 
 　 　 目前 ， 数学 表达式 输入 器 需要 解决 ： ( 1 ) 可视化 界面 ； ( 2 ) 方便 地 编辑 任意 的 数学 表达式 ； ( 3 ) 自动 地 调整 数学 表达式 的 显示 与 上下 内容 的 匹配 ， 如 大小 ， 颜色 等 ； ( 4 ) 公式 的 表示 对 教师 和 学生 透明 ， 教师 和 学生 不必 了解 HTML 的 语法 或 数学 表达式 的 表示 语法 ； ( 5 ) 与 浏览器 的 无缝 连接 。 
 4 　 结束语 
 　 　 要 最终 圆满 地 解决 数学 表达式 显示 问题 ， 只能 有待于 HTML 的 进一步 完善 。 推广 MathML 或 插件 方式 的 数学 表达式 表示 语法 的 规范化 ， 彻底改变 使用 图片 进行 数学 表达式 显示 的 方式 。 目前 ， 我国 网上 教学 所 依赖 的 Web 技术 和 网络 基础设施 亟待 提高 ， 网上 教学系统 的 实现 需要 使用方便 、 快捷 、 高效 的 专业 制作 工具 。 网上 教学 作为 辅助 教学 手段 将 为 社会 不同 阶层 的 人员 所 接受 ， 对 我们 传统 的 教学模式 和 教学 观念 将 产生 深远 的 影响 。 
 作者简介 ： 翁晓霞 ( 1973 ～ ) ， 女 ， 助理 工程师 ， 主研 远程教学 ， 远程教学 系统 开发 及 系统管理 
 作者 单位 ： 翁晓霞 　 上海 邮电 培训中心 计算机科学 与 应用 研究室 ， 上海 　 200092 
 　 　 　 　 　 张 　 骏 　 复旦大学 计算机网络 实验室 ， 上海 　 200433 
 　 　 　 　 　 江 　 源 　 复旦大学 C ＆ C 实验室 ， 上海 　 200433 
 参考文献 
 1   Brown   M . WWW   Plug - in   技术开发 指南 . 北京 ： 机械 工业 出版   社 ， 1996 
 2   刘锦楠 ， 万云龙 . WWW 文件 设计 － HTML 语言 实务 . 北京 ： 机械   工业 出版社 ， 1997 
 收稿 日期 ： 1998 - 12 - 02 
