计算机 应用 
 COMPUTER   APPLICATIONS 
 1999 年   第 19 卷   第 9 期   Vol.19   No.9   1999 
 
 
 
 煤矿安全 监视 图像 数据库系统 研究 
 孟倩 　 周延 　 于 洪珍 
 　 　 摘 　 要 　 本文 提出 了 一个 将 安全 监视 图像 分成 背景 图像 与 运动 视频 图像 并 分别 存储 入库 以 提高 图像 数据压缩 比 的 思想 ， 并 研究 了 安全 监视 图像 数据库 的 数据模型 ， 给出 了 系统结构 。 
 　 　 关键词 　 安全 监视 ， 图像 数据库 ， 数据压缩 
 RESEARCH   ON   THE   SAFETY   MONITORING   IMAGE   DATABASE   SYSTEM   IN   COAL   MINE 
 Meng   Qian 
 Computer   Science   Department   of   Xuzhou   Normal   University ,   Jiangsu . Xuzhou   221009 
 Zhou   Yan 　 Yu   Hongzhen 
 China   University   of   Mining   and   Technology ， Jiangsu . Xuzhou   221008 
 　 　 Abstract 　 In   this   paper ,   a   method   for   enhancing   the   image - compressing   rate   is   proposed .   The   basic   thought   of   this   method   is   dividing   the   Safety   Monitoring   Image   into   Background   Image   and   Motive   Video   Image ,   and   inputting   these   two   images   separately   into   the   image   database   after   compressing   the   motive   image .   This   will   highly   enhance   the   image - compressing   rate .   In   addition ,   the   data   model   of   the   Safety   Monitoring   Image   database   is   researched ,   and   a   kind   of   system   architecture   of   the   image   database   system   is   given . 
 　 　 Keywords 　 Safety   monitoring   image ,   Image   database ,   Image   compression 
 　 　 　 　 作为 矿井 现代化 安全 管理 的 关键 一环 ， 很多 煤矿 安装 了 电视 监视系统 ， 并 将 电视 监视系统 与 计算机 联网 。 为了 将 进出 某 采区 的 下井 人员 采样 存档 ， 一旦 发生 事故 ， 可以 快速 检索 在 事故现场 的 井下 人员 ， 为 紧急 救援 提供 帮助 ； 另外 ， 在 事故 发生 前后 一段时间 内 将 现场 情况 录制 下来 ， 以供 事故 分析 和 研究 ， 我们 进行 了 主要 用来 存储 各种 安全 监视 图像 的 安全 监视 图像 数据库系统 的 研究 。 该 系统 是 一个 特定 领域 相关 的 应用 系统 。 
 1 　 安全 监视 图像 的 特点 
 　 　 安全 监视 图像 有 其 自身 的 特点 ， 主要 表现 在 ： 
 　 　 .   安全 监视 整体 图像 变化 小 ， 帧 相关性 极大 
 　 　 整个 安全 监视 图像 画面 可 划分 为 两个 区域 ： 
 　 　 背景 区 　 安全 监视 的 摄像头 一般 安装 在 固定 地点 ， 如主 副井 、 皮带 、 皮带机 头 、 皮带机 尾 等 ， 照明 灯光 基本 不变 ， 所以 第 τ 帧 的 背景 区 与 第 τ - 1 帧 的 背景 区 的 数据 基本相同 ， 这 表明 两帧 背景 区 的 相关性 极强 ， 即 安全 监视 的 背景 区 基本上 是 静止 的 。 
 　 　 运动 物体 运动 区 　 据统计 ， 安全 监视 图像 中 背景 部分 约 占 3 / 4 ， 运动 部分 仅约 占 1 / 4 。 
 　 　 .   安全 监视 一般 不 考虑 音频 、 视频 同步 问题 
 　 　 从 井下 和 井上 传来 的 安全 监视 信号 中 ， 一般 没有 音频 信号 。 
 2 　 安全 监视 图像 数据库系统 结构 
 　 　 系统 处理 的 安全 监视 图像 是 具有 时空 特性 的 动态 影像 ， 由 视频 帧 构成 。 图像 通信 的 接口 功能 是从 网络 获取 影像 媒体 的 数据 以 构成 图像 库 。 图像 库 获取 的 方法 是 把 连续 视频 按 帧 采集 ， 以 视频 帧 序列 表示 视频信号 。 一段 视频 图像 是 由 若干 帧 构成 ， 若干段 视频 图像 序列 ， 构成 了 一个 视频 图像 库 。 
 2.1 　 图像 数据压缩 
 　 　 数字化 图像 信号 的 数据量 是 非常 大 的 ， 不 经过 数据压缩 ， 安全 监视 图像 数据库 就 无法 得到 真正 实现 。 
 　 　 为了 减少 图像 数据 存储量 ， 我们 采取 两种 措施 来 进行 图像 数据压缩 ： 
 　 　 .   将 安全 监视 图像 分成 背景 图像 与 运动 图像 两 部分 ， 因 背景 图像 已知 ， 所以 可 事先 存入 一 背景 图像 库中 ， 即 所有 图像 帧 的 背景 部分 在 库 中 只 存放 一次 。 
 　 　 .   图像 由 图像 通讯 接口 录入 ， 通过 图像处理 模块 提取 出 运动 部分 ， 即 与 背景 库 不同 的 部分 ， 经 数据压缩 后 存入 运动 视频 库 。 
 2.2 　 安全 监视 数据库系统 结构 
 　 　 安全 监视 数据库系统 结构 如图 1 所示 ： 
 
 图 1 　 工业电视 图像 数据库系统 结构 
 　 　 用户 接口 　 用户 接口 实际上 是 用户 与 图像 数据库系统 交互 的 界面 和 窗口 。 用户 接口 首先 对 用户 输入 的 命令 或 操作 进行 检查 ， 把 错误信息 返回 给 用户 ， 而 将 正确 的 命令 或 操作 变换 成 系统 的 内部 形式 ， 由 数据库 管理系统 完成 命令 解释 及 任务调度 。 
 　 　 图像 通讯 接口 　 以 单幅 图像 的 形式 从 视频 源 采集 进来 ， 送 图像 管理系统 处理 。 
 　 　 图像 数据库 管理系统 IDBMS 　 任何 数据库系统 都 离不开 数据库 管理系统 的 支持 ， 同样 IDBMS 是 整个 安全 监视 图像 数据库系统 的 核心 。 对于 从 图像 通讯 接口 输入 进来 的 原始 图像 ， IDBMS 调用 图像处理 模块 进行 处理 ， 提取 出 运动 图像 部分 存入 运动 视频 图像 数据库 ； IDBMS 对于 来自 用户 接口 的 正确 命令 进行 解释 执行 ， 遇到 检索 、 维护 存取 等 事务性 操作 ， 先由 IDBMS   处理 ， 如需 播放 则 调用 图像处理 模块 将 运动 视频 图像 和 与 之 相对 应 的 背景 从 各自 数据库 中 提取 出来 ， 并 进行 图像 合成 ， 再 交由 IDBMS 通过 显示 设备 输出 。 
 　 　 数据 词典 是 关于 数据库 模式 信息 的 数据库 ， 存放 的 是 各种 数据库 模式 的 类型定义 ， 数据库 已知 性 检验 的 约束 规则 、 各种 代码 、 用户 权限 等 ， 是 IDBMS 的 一部分 。 为 使 系统 具有 描述 及易 修改 的 功能 ， 还 可 将 数据 字典 模式 信息 存放 于 另 一 数据库 中 ， 称作 数据 定义 字典 。 
 　 　 图像处理 模块 　 对于 输入 到 系统 的 原始 安全 监视 图像 ， 为了 减少 图像 数据 的 尺寸 以便 于 存储 ， 对 它们 进行 预处理 。 在 背景 图像 库 相应 背景 图像 参与 下 ， 提取 出 运动 视频 图像 ， 并 运用 图像压缩 技术 对 其 进行 压缩 ， 以 一定 的 存储 模式 存入 运动 图像 库 。 需要 图像 输出 时 ， 由该 模块 从 背景 库中 提取 背景 ， 从 运动 视频 图像 库中 提取 相应 的 运动 视频 图像 段 ， 并 进行 背景 图像 与 运动 图像 的 合成 。 
 　 　 数据库 　 数据库 部分 包括 背景 图像 库 、 运动 视频 图像 库 和 常规 数据库 三 部分 。 常规 数据库 中 存放 的 是 图像 的 描述 信息 。 
 3 　 安全 监视 图像 数据库 数据模型 
 　 　 传统 的 关系 数据模型 是 建立 在 严格 的 数学 基础 — — 关系 代数 上 ， 解决 了 数据库 管理 中 的 许多 问题 。 但 在 管理 多媒体 数据 （ 如 图像 、 声音 、 视频 等 ） 方面 显得 力不从心 。 因此 人们 开始 探讨 适合 非 格式化 数据 的 新 的 数据模型 。 总的来说 ， 研究 多媒体 数据模型 途径 主要 由 两种 ： 一种 是 以 研究 崭新 的 数据模型 为 方向 ， 这种 新 的 方法 和 技术 将 面向对象 技术 引入 数据库系统 。 从 表达能力 上 看 ， 面向对象 模型 能够 对 多媒体信息 的 语义 关系 ， 时空 关系 、 空间 关系 进行 更 多 的 模拟 ， 这是 一个 很 有 前途 和 生命力 的 研究 方向 。 但 面向对象 技术 本身 还 处于 研究 发展 阶段 、 缺乏 成熟 的 、 一整套 的 形式化 理论 作 数学 基础 。 因此 ， 利用 面向对象 技术开发 图像 数据库 或 多媒体数据库 尚 处于 研究 、 探索 阶段 。 另 一种 是 以 扩充 现有 成熟 的 数据模型 （ 如 关系 、 层次 ） 为 方向 ， 利用 其 牢固 而 成熟 的 理论 基础 ， 实现 技术 和 应用 背景 ， 开发 面向 应用 的 图像 数据库 或 多媒体数据库 。 
 　 　 在 安全 监视 数据库系统 中 ， 可以 采用 特征描述 法 ， 将 描述 图像 的 一些 信息 ， 如 存入 日期 ， 时间 ， 操作员 ， 摄像头 号 ， 摄像头 安装 地点 等 信息 输入 数据库 ， 在 特征 信息 上 进行 查询 。 因此 ， 这是 基于 结构化 数据 的 简单 逻辑 条件 查询 ， 一般 不 作 基于 语义 的 查询 ， 查询 方式 较为简单 。 建立 数据模型 的 原则 是 简单 实用 ， 我们 选用 了 关系 模型 扩充 的 图像 数据库 数据模型 。 
 　 　 在 常规 的 管理系统 中 ， 主要 使用 的 数据类型 是 数值 型 、 字符 型 、 布尔 型 、 日期 型 等 。 安全 监视 图像 数据库 扩充 了 视频 图像 型 ， 以 存放 运动 视频 图像 。 用 关系 数据模型 管理 常规 数据 ， 用 层次 数据模型 管理 运动 视频 图像 。 
 4 　 安全 监视 图像 DB 的 存储 及 存取 
 　 　 常规 数据 由于 数据量 小 ， 可用 定 长 技术 处理 ， 因而 可以 按定 长 的 字 段 、 记录 、 块 三级 存储单元 方便 地 组织 数据 地 存储 。 而 图像 数据量 大 ， 且 图像 经压缩 后 其 数据量 参差不齐 ， 因而 不能 用定 长 的 字 段 、 记录 、 块 三级 存储单元 组织 存储 ， 这 在 存储 结构 上 大大增加 了 复杂度 ， 我们 可 将 存储 结构 分为 两 部分 。 一部分 是 记录 的 常规 数据 及 视频 图像 数据 的 指针 ， 另 一部分 是 视频 图像 的 多媒体 数据 。 
 　 　 考虑 到 数据压缩 的 需要 ， 我们 以 变长 记录 VLR 作为 动态 视频 图像 库 的 基本 结构 ， 低层 的 变长 记录 对 用户 来讲 是 透明 的 。 这样 引入 变 长 记录 之后 ， 库 长度 将 变得 短得 多 。 在 定长 记录 库 文件 中 查找 记录 是 容易 的 ， 用 记录 大小 乘以 记录 号 即可 得到 一个 记录 相对 字节 偏移量 ， 对于 变 长 记录 库 ， 由于 每个 记录 长度 不变 ， 因此 就要 利用 某种 形式 的 索引 。 
 　 　 一个 视频 段 中 的 帧 用 双链 表 加以 构造 ， 帧 索引 与 帧 图像 数据 是 一个 变 长 记录 ， 每个 记录 用 一个 基本 存储 数据 的 单链 表 存储 。 背景 图像 与 运动 视频 图像 分开 存放 对于 用户 来说 是 透明 的 。 如图 2 所示 。 
 
 图 2 　 存储 结构 
 　 其中 　 　 BackAdr 　 　 　 　 ： 相应 背景 图像 地址 ； 
 　 　 frameFirstAdr ： 帧 数据 起始 地址 ； 
 　 　 framelen ： 帧 长度 ； 
 　 　 fmeNo ： 帧 序列 中帧 序号 ； 
 　 　 lstfmeAdr ： 上 一帧 地址 ； 
 　 　 nxtfmeAdr ： 下 一帧 地址 ； 
 　 　 key ： 存取 关键字 ； 
 　 　 fmeHeadAdr ： 表头 地址 。 
 5 　 结语 
 　 　 本文 提出 了 一个 将 安全 监视 图像 分成 背景 图像 与 运动 视频 图像 并 分别 存储 入库 的 思想 ， 这 将 使 安全 监视 图像 数据库 的 数据压缩 比 获得 质 的 提高 。 
 作者简介 ： 孟倩 　 硕士 ， 讲师 。 主要 从事 多媒体数据库 、 安全 监测 监视 等 的 研究 及 教学 工作 。 
 作者 单位 ： 孟 　 倩 　 徐州 师范大学 计算机科学 系 　 江苏 . 徐州 （ 221009 ） 
 周 　 延 　 于 洪珍 　 中国矿业大学 江苏 . 徐州 （ 221008 ） 
 参考文献 
 ［ 1 ］ 　 李国辉 ， 汤 大权 ， 许 　 健 . VBS — 全 软件 动态 视频 图像编辑 与 播放 系统 的 设计 与 实现 . 小型 微型 计算机系统 ， 1994 ; ( 6 ) 
 ［ 2 ］ 　 李舜革 . 图像 数据库 的 分类 和 系统 基本 构成 . 中国 计算机用户 ， 1991 ; ( 8 )   
 收稿 日期 : 1999 - 05 - 16 ( 修改稿 ) 
