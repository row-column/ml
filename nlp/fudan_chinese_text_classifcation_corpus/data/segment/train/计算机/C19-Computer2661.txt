软件 学报 
 JOURNAL   OF   SOFTWARE 
 1999 年 　 第 10 卷 　 第 9 期 　 Vol.10 　 No.9 　 1999 
 
 
 
 数据挖掘 在 音高 变化规律 学习 中 的 应用 * 
 朱廷劭 　 高文 　 Charles   X .   Ling 　 高正 其 　 李 锦涛 
 摘要 　 音高 变化规律 对 合成 高 自然 度 的 语音 非常 重要 . 为了 提取 音高 即 基频 的 变化规律 ， 设计 实现 了 数据挖掘 系统 SpeechDM ， 经过训练 取得 了 较 好 的 学习 结果 . 该文 介绍 了 国内 进行 的 关于 音高 变化 规则 的 研究 情况 以及 数据挖掘 技术 ， 给出 SpeechDM 的 系统结构 ， 并 介绍 其 主要 模块 ， 对 实验 结果 进行 了 分析 . 
 关键词 　 语音 合成 , 音高 变化 , 数据挖掘 , 神经网络 , 规则 提取 . 
 中图法 分类号 　 TP311 
 Data   Mining   for   Mandarin   Tone   Variation   Patterns   Learning 
 ZHU   Ting - shao , GAO   Wen , GAO   Zheng - qi , LI   Jin - tao 
 ( Institute   of   Computing   Technology   The   Chinese   Academy   of   Sciences   Beijing   100080 ) 
 Charles   X .   Ling 
 ( Department   of   Computer   Science   University   of   Western   Ontario   Ontario   Canada ) 
 Abstract 　 The   tone   variation   patterns   is   very   important   for   speech   synthesis .   To   extract   more   accurate   patterns ,   a   prototype   system   called   SpeechDM   has   been   implemented   for   learning .   In   this   paper ,   the   relative   research   and   data   mining   are   specified   at   first ,   the   modules   are   introduced   in   detail ,   and   some   experimental   results   are   also   given . 
 Key   words 　 Speech   synthesis ,   tone   variation ,   data   mining ,   neural   network ,   patterns   extraction . 
 　 　 语音 合成 技术 是 计算机 智能 接口 的 重要 组成部分 ， 为了 合成 高 自然 度 、 高清晰度 的 语音 ， 必须 有 完善 的 韵律 规则 ， 而且 韵律 规则 的 总结 应该 采用 定量 的 方法 . 汉语 的 韵律 规则 主要 表现 在 音节 的 时长 分布 、 音高 的 变化 、 能量 的 变化 及 适当 的 停顿 等 几个 方面 ， 其中 音高 和 音长 的 变化 对 自然 度 的 影响 最为 显著 ［ 1 ］ ， 而 音高 的 变化 主要 体现 在 语音 基频 的 变化 上 . 
 　 　 吴宗济 曾 对 汉语 的 两 字组 的 声调 模式 做过 很多 研究 . 他 认为 两 字组 中 各种 声调 两 两 搭配 有 15 种 模式 ［ 2 ］ . 林茂灿 通过 对 普通话 两 字组 正常 重音 的 声学 分析 ， 得到 了 普通话 两 字组 中 前后 音节 的 时长 和 音高 的 关系 ［ 3 ］ . 初敏 通过 对 一个 女 发音 人 的 音高 曲线 分析 , 统计 归纳 出 14 种 单音节 的 音高 模式 和 22 种 两字词 声调 模式 ， 其中 单音节 的 音高 模式 包括 阴平 和 上声 的 声调 模式 各 两种 、 阳平 和 轻声 的 声调 模式 各 3 种 、 去 声 的 声调 模式 4 种 ［ 1 ］ . 
 　 　 由 上面 的 结果 可以 看出 ， 目前 的 音高 变化规律 大多 是 根据 语言学 的 研究 得出 的 一些 定性 的 描述 ， 这 在 使用 计算机 进行 语音 合成 时 只能 提供 一些 参考 ， 很难 在 合成 过程 中 准确 地 使用 这些 规则 . 此外 ， 即使 采用 了 定量 描述 ， 由于 这些 规则 是 由 人工 进行 统计 得到 的 ， 也 不能 保证 全面 地 描述 音高 变化 规则 ， 而且 对 这些 规则 的 维护 和 完善 也 很 困难 . 
 　 　 数据库 中 的 知识 发现 KDD ( knowledge   discovery   in   database ) 是 近年来 随着 人工智能 和 数据库 技术 的 发展 而 出现 的 一门 新兴 的 技术 ， 它 是从 大量 数据 中 提取 出 可信 的 、 新颖 的 、 有效 的 ， 并 能 被 人 理解 的 模式 的 高级 处理过程 ［ 4 ］ . 数据挖掘 是 KDD 中 最 重要 的 处理 阶段 ， 因此 人们 往往 不 加 区别 地 使用 两者 ［ 5 ］ . 
 　 　 由 人工 提取 韵律 规则 很难 对 大批量 数据 进行 处理 ， 因而 所 得到 的 韵律 规则 不够 全面 . 数据挖掘 利用 机器 学习 的 方法 从 大量 数据 中 提取 有用 的 知识 ， 为此 ， 我们 进行 了 将 数据挖掘 应用 于 普通话 基频 变化规律 的 研究 ， 并 设计 实现 了 一个 原型 系统 — — SpeechDM . 普通话 中 两字词 出现 的 概率 最高 ［ 5 ］ ， 我们 通过 对 两字词 中 音节 的 基频 变化规律 的 学习 ， 取得 了 较 好 的 实验 结果 . 
 1 　 SpeechDM 的 系统结构 
 　 　 SpeechDM 是 一个 面向 语音 数据处理 的 数据挖掘 系统 ， 它 主要 由 数据 预处理 、 数据管理 、 训练 管理 、 数据挖掘 及 结果 输出 等 模块 组成 . 图 1 给出 了 SpeechDM 的 系统结构 . 
 
 图 1 　 SpeedDM 系统结构 
 　 　 为了 能够 对 数据挖掘 的 各个 阶段 进行 控制 ， SpeechDM 提供 了 交互 界面 来 对 数据挖掘 的 各个 过程 进行 控制 . 利用 这些 交互 界面 可以 调整 学习 和 训练 的 各种 参数 ， 设定 针对 某种 学习 任务 的 数据 集 定义 描述 等 . 
 　 　 SpeechDM 通过 数据 集 实现 了 对 数据 的 管理 . 数据 集是 对 为了 完成 某项 学习 任务 而 需 从 数据库 中 提取 出 数据 的 描述 . 在 系统 中 ， 所有 训练任务 均 作为 线程 存在 ， 训练 管理 对 它们 进行 简单 的 调度 ， 如 暂停 、 继续 或 停止 等等 . 利用 数据 集 管理 和 训练 管理 可以 实现 反复 学习 以 取得 更好 的 学习 结果 . 
 　 　 数据 预处理 主要 是 对 语音 数据 进行 参数 提取 ， 求得 语音 数据 的 基频 值 ， 进行 规整 ， 使 其 适合 于 后面 的 学习 算法 的 使用 . 数据挖掘 模块 是 利用 神经网络 对 预处理 后 的 数据 进行 训练 或 测试 . 输出模块 主要 是 将 测试 的 结果 以 图形化 方式 显示 给 用户 . 
 2 　 数据 预处理 
 　 　 为了 学习 汉语 语音 基频 变化规律 ， 必须 首先 得到 语音 的 基频 值 . 数据 预处理 主要 是 通过 对 语音 数据 的 处理 得到 较为 精确 的 基频 值 ， 并 进行 时间 和 数值 规整 . 
 　 　 语音 数据库 采用 的 是 语音 合成 语料库 CoSS - 1 ， 它 是 国家 863 支持 的 项目 ， 由 清华大学 计算机科学 与 技术 系 、 中国科学院 声学 研究所 和 社会科学院 语言 研究所 共同完成 的 . CoSS - 1 包括 1   268 个 有 调 音节 和 640 个 两字词 ， 尽量 涵盖 了 音段 和 超音 段 的 音联 现象 ， 并且 同步 录制 语音 声压 波形 和 声门 波阻抗 波形 . 
 　 　 采用 时域 或 频域 方法 都 不能 得到 较为 准确 的 基音 周期 ［ 6 ］ ， 而 准确 的 基音 周期 对 后续 的 训练 和 测试 非常 重要 . CoSS - 1 中 的 声门 波阻抗 波形 是 将 说话 人 声带 处 的 振动 波形 记录下来 ， 与 语音 波形 比较 起来 ， 其 周期性 更 明显 ， 可以 很 容易 地 标出 每个 基音 周期 . 我们 通过 对 声门 波 的 基音 标注 ， 得到 非常 准确 的 基音 周期 值 . 
 　 　 经过 标注 后 得到 的 基频 值 的 变化 范围 很大 ， 为了 便于 后续 处理 ， 必须 对 其 进行 标准化 处理 . 由于 不同 音节 的 基音 序列 的 长短 相差 很大 ， 这些 基频 值 序列 也 应该 进行 时间 规整 ， SpeechDM 采用 了 下面 的 规整 算法 . 
 　 　 输入 ： float   * pitch ,   int   pitchlen ; 　 / * 需 规整 的 基频 值串 和 基音 周期 数 * / 
 　 　 输出 ： float   * twpitch ,   int   twlen ; 　 / * 规整 后 的 基频 值 和 规整 长度 * / 
 　 　 对 0 - ( twlen - 1 ) 中 的 每个 值 i , 
 　 　 　 　 求出 在 0 - ( pitchlen - 1 ) 中 的 相对 位置 loc = pitchlen * i / twlen ; 
 　 　 　 　 若 loc 为 整数 点 ， 则 twlen ［ i ］ = pitch ［ loc ］ ; 
 　 　 　 　 否则 ， 取得 在 loc 周围 的 4 个 整数 点 ; 
 　 　 　 　 利用 插值 方法 求得 loc 对应 的 值 value , twlen ［ i ］ = value . 
 3 　 数据挖掘 
 　 　 语音 的 基频 值 变化 在 不同 语言 环境 下 , 即 不同 声调 组合 及声 韵母 组合 下 的 变化 是 不同 的 . 我们 可 将 语言 环境 看做 是 影响 音节 语音 基频 发生变化 的 因素 ， 单音节 的 正常 发音 在 不同 情况 下 发生 了 不同 的 变化 ， 从而 形成 多种 音变 现象 . 基于 上面 的 思路 ， 我们 采用 神经网络 ， 通过 学习 孤立 音节 及其 在 词中 的 映射 得到 基频 的 变化规律 . 
 　 　 误差 逆 传播 网络 ( back   propagation , 简称 BP ) 是 一种 多层 结构 的 映射 网络 ， 是 目前 应用 最 广泛 的 一种 神经网络 模型 ［ 7 ］ . SpeechDM 中 使用 误差 逆 传播 网络 进行 基频 变化规律 的 学习 . 网络 分为 3 层 ： 输入 层 、 隐含 层 和 输出 层 ， 各层 之间 全 互连 . 网络 的 学习 率取 0.25 ， 采用 Sigmoid 函数 作为 输出 函数 . 
 　 　 目前 ， SpeechDM 主要 是 学习 组成 两字词 的 各 音节 的 基频 变化规律 ， 学习 对象 是 两字词 中 的 各 音节 发音 及 该 音节 的 单独 发音 数据 . 为 便于 网络 学习 ， 使用 两个 神经网络 分别 学习 第 1 个 和 第 2 个 音节 的 基频 变化规律 . 
 　 　 通过 前面 的 预处理 ， 可以 得到 音节 单独 发音 时 的 基频 值 和 该 音节 在 两字词 中 发音 的 基频 值 . 对 每个 两字词 ， 提取 出 其中 每个 音节 的 语言 环境参数 ， 目前 ， 我们 主要 使用 了 声调 信息 作为 语言 环境参数 . 输入 节点 包括 音节 单独 发音 时 的 基频 值及 前后 声调 ， 由于 汉语 共有 4 种 声调 ， 在 输入 层 使用 8 个 节点 表示 前后 音节 的 声调 ， 其中 前 4 个 节点 表示 第 1 个 音节 的 声调 ， 后 4 个 节点 表示 第 2 个 音节 的 声调 ， 如 ： 01001000 表示 第 1 个 音节 为二声 ， 第 2 个 音节 的 声调 为 一声 . 
 　 　 输出 节点 为 该 音节 在 两字词 中 发音 的 基频 值 ， 这些 基频 值 首先 是 经过 对 两字词 进行 切分 、 基频 标注 、 时间 规整 和 标准化 后 得到 的 数据 . 输入 节点 和 输出 节点 的 个数 随 规整 的 长度 而 不同 . 在 SpeechDM 中 , 取 所有 音节 单独 发音 的 基音 周期 数 的 平均值 作为 规整 的 长度 ， 两字词 中 所有 第 1 个 音节 的 基音 周期 数 或 第 2 个 音节 的 基音 周期 的 平均值 作为 输出 节点 数 . 
 　 　 语音 数据库 提供 的 数据 无法 直接 进行 训练 和 测试 ， 必须 首先 对 原始 语音 数据 进行 预处理 ， 提取 出 特征参数 ， 在 此基础 上 进行 训练 和 测试 . 
 　 　 为了 得到 训练 和 测试 所 需 数据 ， 首先 对 所有 单音节 和 两字词 进行 切分 和 基频 标注 ， 得到 基频 值 , 求 出 规整 长度 ， 即 求得 所有 音节 单独 发音 时 的 基音 周期 数 的 平均值 以及 两字词 中 第 1 个 音节 和 第 2 个 音节 的 基音 周期 数 的 各自 平均值 , 根据 规整 长度 ， 对 数据 进行 规整 ， 规整 后 的 数据 可以 用于 训练 和 测试 . 
 4 　 实验 结果 
 　 　 SpeechDM 的 输出 主要 是 将 实际 发音 的 基频 值串 与 学习 后 得到 的 基频 值串 进行 比较 ， 将 测试 结果 以 图形 方式 显示 出来 . 下面 给出 一次 测试 的 结果 ， 测试 例共 5 组 . 在 图 2 中 ， 左面 一行 是 词 的 第 1 个 音节 的 测试 结果 ， 右面 一行 显示 的 是 第 2 个 音节 的 测试 结果 ， 其中 每 一个 结果 在 显示 中 同时 都 给出 了 孤立 音节 的 基频 曲线 、 该 音节 在 词中 发音 时 的 基频 曲线 以及 测试 结果 的 基频 曲线 . 
 
 古板 ( gu3ban3 ) 
 
 启齿 ( qi3chi3 ) 
 
 尾花 ( wei3hua1 ) 
 
 可怜 ( ke3lian2 ) 
 
 火化 ( huo3hua4 ) 
 图 2 　 孤立 音节 、 词中 发音 及 测试 结果 的 基频 值 
 　 　 图 2 给出 了 5 对 共 10 个 音节 的 测试 结果 ， 从 实验 结果 可以 看出 ， 测试 结果 与 实际 数值 非常 接近 . 使用 数据挖掘 可以 得到 音高 变化规律 的 定量 描述 ， 测试 的 输出 结果 就是 需要 的 基频 序列 ， 可以 直接 用于 语音 合成 . 在 初敏 使用 的 合成 系统 中 ， 必须 利用 音高 规则 库中 的 规则 对 语音 进行 变换 才能 得到 所 需要 的 基频 序列 . 经过 学习 后 的 神经网络 占用 空间 小 ， 而且 在 使用 时 可以 很快 得到 所 需要 的 基频 序列 ， 从而 加快 语音 合成 的 速度 . 数据挖掘 中 的 规则 提取 是 由 学习 算法 完成 的 ， 这 使得 通过 对 大规模 语音 数据 的 学习 以 得到 较为 全面 的 音高 变化 规则 成为 可能 , 并且 通过 反复 的 训练 比较 可以 得到 更好 的 学习 结果 . 
 　 　 SpeechDM 是 面向 语音 数据处理 而 设计 的 一个 数据挖掘 系统 ， 它 基本上 实现 了 数据库 中 知识 发现 的 主要 处理 步骤 ， 取得 了 较 好 的 学习 结果 . 进一步 的 工作 包括 音长 变化规律 的 学习 及 多字词 中 的 基频 变化规律 的 学习 . 我们 希望 通过 利用 数据挖掘 ， 得到 较为 全面 的 汉语 语音 的 韵律 规律 ， 以 提高 汉语 合成 语音 的 自然 度 和 连续 度 . 
 * 　 本文 研究 得到 国家自然科学基金 和 中国科学院 百 人 工程项目 基金 资助 . 
 本文 通讯联系 人 ： 朱廷劭 ， 北京 100080 , 中国科学院计算技术研究所 
 作者简介 ： 朱廷劭 ， 1971 年生 ， 博士生 ， 主要 研究 领域 为 数据库 及其 应用 ， 数据挖掘 ， Internet ， 语音 合成 . 
 　 　 　 　 　 高文 ， 1956 年生 ， 博士 ， 教授 ， 博士生 导师 ， 主要 研究 领域 为 人工智能 ， 模式识别 与 图像处理 ， 多媒体技术 . 
 　 　 　 　 　 Charles   X .   Ling ， 1956 年生 ， 博士 ， 副教授 ， 博士生 导师 ， 主要 研究 领域 为 机器 学习 ， 数据挖掘 及其 应用 . 
 　 　 　 　 　 高正 其 ， 1971 年生 ， 助理 工程师 ， 主要 研究 领域 为 计算机 应用 ， 数据挖掘 ， 语音 合成 . 
 　 　 　 　 　 李 锦涛 ， 1962 年生 ， 博士 ， 研究员 ， 主要 研究 领域 为 多媒体技术 ， 虚拟现实 技术 . 
 作者 单位 ： 朱廷劭 ， 高文 ， 高正 其 ， 李 锦涛 （ 中国科学院计算技术研究所   北京   100080 ） 
 　 　 　 　 　 Charles   X .   Ling （ Western   Ontario 大学 计算机科学 系 　 Ontario 　 加拿大 ） 
 参考文献 ： 
 ［ 1 ］ 初敏 . 高清晰度 高 自然 度 汉语 文语 转换 系统 的 研究 ［ 博士学位 论文 ］ . 中国科学院 声学 研究所 , 1995 
 ( Chu   Min .   Research   on   Chinese   TTS   system   with   high   intelligibility   and   naturalness   ［ Ph . D .   Thesis ］ .   Institute   of   Acoustics ,   The   Chinese   Academy   of   Sciences ,   1995 ) 
 ［ 2 ］ 吴宗济 . 普通话 语句 中 的 声调 变化 . 中国 语文 , 1982 , 6 : 439 ～ 449 
 ( Wu   Zong - ji .   The   tone   variation   in   mandarin .   Chinese   Grammar ,   1982 , 6 : 439 ～ 449 ) 
 ［ 3 ］ 林茂灿 , 颜景助 , 孙 国华 . 北京 话 两 字组 正常 重音 的 初步 实验 . 方言 , 1984 , 1 
 ( Lin   Mao - can ,   Yan   Jing - zhu ,   Sun   guo - hua .   Experiment   of   the   normal   accent   in   Beijing   dialect .   Dialect ,   1984 , 1 ) 
 ［ 4 ］ Usama   M   Fayyad ,   Gregory   Piatetsky - Shapiro ,   Padhraic   Smyth   et   al .   Adavance   in   Knowledge   Discovery   and   Data   Mining .   Cambridge ,   MA :   AAAI / MIT   Press ,   1996 
 ［ 5 ］ John   George   H .   Enhancements   to   the   data   mining   process   ［ Ph . D .   Thesis ］ .   Stanford   University ,   1997 
 ［ 6 ］ 杨行峻 , 迟惠生 等 . 语音 信号 数字 处理 . 北京 ： 电子 工业 出版社 , 1990 
 ( Yang   Xing - jun ,   Chi   Hui - sheng   et   al .   Speech   Signal   Digital   Process .   Beijing :   Publishing   House   of   Electronics   Industry ,   1990 ) 
 ［ 7 ］ 王伟 . 人工神经网络 原理 — — 入门 与 应用 . 北京 ： 北京航空航天大学 出版社 , 1995 
 ( Wang   Wei .   Principle   of   Artificial   Neural   Network — — Rudiment   and   Implement .   Beijing :   Beijing   University   of   Aeronautics   and   Astronautics   Press ,   1995 ) 
 收稿 日期 ： 1998 - 05 - 15 ， 修改 日期 ： 1998 - 10 - 05 
