微型机 与 应用 
 MICROCOMPUTER   &   ITS   APPLICATIONS 
 2000 　 No.19 　 No.1 　 P.42 ， 45 
 
 
 
 
 一种 微电机 实时 测速 方法 
 姜 卫东 
 摘要 ：   一种 新 的 微电机 实时 测速 方法 以及 基于 这种 方法 实现 的 测速 设备 的 设计 思想 、 系统结构 及 功能 。 
 关键词 ： 微电机   实时 测速   采集卡 
 　 　 检验 微电机 质量 的 关键在于 检测 其 转速 变化 曲线 、 电流 变化 情况 、 电机 在 负载 和 空载 时 的 转速 变化 情况 。 传统 的 测量方法 一般 可以 分为 3 步 ， 即 ： （ 1 ） 利用 光电 技术 产生 1 组与 转速 对应 的 方波 ； （ 2 ） 通过 计数 仪 对方 波 计数 ； （ 3 ） 与 基准 时间 比较 得出 在 一段时间 内 电机 的 平均 转速 值 。 这种 方法 存在 潜在 的 缺点 。 首先 ， 由于 这种 方法 计算 的 转速 是 对 一段时间 内 方波 数量 的 计数 ， 得出 的 是 一段时间 内 电机 的 平均 转速 ， 因而 它 不能 实时 测量 电机 的 转速 ， 无法 得到 准确 的 电机 的 时间 － 转速 曲线 ； 其次 ， 当 电机 低速 转动 时 ， 测量 精度 低 。 
 　 　 本文 提出 1 种 实时 微电机 测试 系统 方案 ， 主要 针对 传统 测速 系统 的 不足 ， 在 克服 以上 缺点 的 同时 ， 根据 实际 电机 生成 部门 的 具体 需要 ， 以 实现 微电机 测速 方便 、 快捷 、 灵活 的 特性 。 
 1   系统结构 及 功能 
 　 　 针对 传统 测速 系统 的 缺点 ， 本文 提出 如下 方案 ： 在 传统 方法 的 第 2 步 对方 波 进行 一定 速率 采样 ， 通过 接口 电路 ， 把 采样 数据 送入 计算机 ， 计算机 对 数据 进行 处理 、 分析 ， 得出 时间 － 速度 曲线 、 时间 － 电流 曲线 以及 有关 的 参数信息 ， 自动 确定 微电机 质量 合格 情况 ， 并 把 相关 的 信息 存入 已 建立 的 数据库 中 ， 为 以后 的 质量 分析 提供 详尽 的 数据 资源 。 系统结构 如图 1 所示 。 系统 工作 流程 如下 ： 
 　 　 微电机 通过 多功能 转换头 与 微电机 转速 光电 转换器 相连接 ， 电机 每 转动 1 转则 产生 1 个 一定 宽度 的 脉冲 ， 因此 ， 微电机 转速 光电 转换器 输出 1 组与 电机 转速 对应 的 脉冲 串 ， 脉冲 串 被 AD 采集卡 按 给定 的 速率 采集 ， 同时 被 采集 的 还有 微电机 电流 ， 采集 的 数字 量 通过 接口 电路 传送 到 计算机 ， 计算机 根据 采样 速率 和 每个 方波 的 采样 点数 计算 微电机 每 1 转 的 转速 和 与 此对应 的 工作 电流 ， 并 给出 转速 时间 曲线 和 电流 时间 曲线 。 
 　 　 整个 过程 由 计算机控制 ， 计算机 发出 开始 指令 ， 通过 接口 电路 对 AD 采集卡 和 光电 转换器 复位 ， 光电 转换器 接通 微电机 电源 ， 微电机 开始 工作 。 同时 ， 计算机 开始 读取 采集 的 数据 ， 当 满足 设定 要求 （ 如 采集 时间 控制 、 采集 数据 长度 控制 、 微电机 稳定 转速 平稳 控制 、 电流 稳定 控制 等 ） 时 计算机 停止 读取数据 ， 并 发送 停止 信号 给 光电 转换器 以 断开 微电机 电源 ， 测量 结束 。 
 　 　 从图 1 可以 看出 ， 系统 采用 对 每个 方波 进行 采样 的 方法 计算 转速 ， 其 转速 曲线 与 微电机 的 转速 完全一致 ， 因此 ， 用此 方法 测量 的 是 微电机 的 实时 转速 ， 且 转速 精度 完全 由 采集卡 的 采样率 决定 ， 因此 ， 只要 改变 采集卡 的 采样率 以 满足需要 ， 就 可以 获得 很 高 的 测速 精度 （ 如 精度 为 1 转 以下 的 测量 ， 传统 方法 是 不能 做到 的 ） ， 这 对 测量 微电机 在 无 负载 和 有 负载 时 的 转速 变化 尤为 准确 、 可靠 （ 这 也 是 微电机 质量检验 的 关键 ） 。 
 
 图 1   系统结构 框图 
 　 　 由于 引入 了 微机 ， 建立 了 微电机 测量 数据库 ， 并 配有 丰富 的 处理 、 分析 、 统计 、 绘图 、 打印 软件 ， 使得 管理者 对 产品质量 分析 和 统计 非常 方便 （ 如 一段时间 内 测量 的 微电机 转速 分布 曲线 、 不 合格 产品 分布 曲线 、 有无 负载 时 电机 电流 变化 曲线 等 ） ， 这 也 是 本 微电机 测速 系统 的 一大 特色 。 系统 主要 完成 以下 功能 ： （ 1 ） 实时 测量 转速 ； （ 2 ） 实时 测量 电流 ； （ 3 ） 可变 精度 测量 ； （ 4 ） 系统 的 显示 、 打印 、 统计 、 分析 等 。 
 2   设计 思想 
 2.1   可变 速率 AD 采集卡 
 　 　 AD 卡为 双通道 可变 速率 采集卡 ， 采集 芯片 采用 多通道 复用 芯片 ， 以 实现 对 转速 方波 和 电流 信号 交叉 采集 （ 即 奇数 点 采集 转速 信号 ， 偶数 点 采集 电流 信号 ） ， 这样 采集 的 好处 是 保证 微电机 的 转速 和 电流 在 同一 时刻 是 一一对应 的 。 通道 间 转换 由 外部 数据 指定 。 由于 采集 芯片 以 2 通道 交叉 方式 工作 ， 因此 采样 速率 为 系统 时钟 的 一半 。 在 需要 的 情况 下 也 可以 由 计算机 设定 只 采集 某 1 路 信号 。 AD 卡 的 可变 采样 速率 是 通过 改变 时钟 频率 来 实现 的 ； 晶体振荡器 输出 的 脉冲 通过 16 进制 计数器 分频 ， 输出 2 、 4 、 8 、 16   4 路 分频 结果 ， 把 这 4 路 分频 结果 与 时钟 信号 输入 至 模拟 开关 ， 模拟 开通 断 情况 由 寄存器 控制 ， 模拟 开关 的 输出 与 采集 芯片 的 时钟 引脚 连接 。 采集卡 的 结构 框图 如图 2 所示 。 
 
 图 2   2 路变 速率 采集卡 框图 
 2.2   接口 电路 
 　 　 接口 电路 与 采集卡 同 在 1 块 电路板 上 ， 由于 采集卡 的 采集 速率 不高 （ 不 超过 30KB ／ s ） ， 接口 采样 ISA 总线 ， 系统 采用 查询 方式 通过 接口 访问 缓存 。 接口 电路 主要 完成 地址 选择 ， 数据 的 出入 以及 发送 控制 命令 。 其 结构 框图 如图 3 所示 。 
 
 图 3   接口 电路 框图 时钟 
 2.3   软件设计 
 　 　 微电机 测速 系统软件 包括 5 个 部分 ， 分别 为 ： 系统 设置 、 数据处理 、 报表 统计 、 打印输出 、 帮助 信息 。 
 　 　 系统 设置 ： 包括 采集 数据 长度 设置 、 采集 时间 设置 、 触发 方式 设置 、 数据处理 结果显示 设置 、 图形 显示方式 及 种类 设置 等 。 
 　 　 数据处理 ： 包括 对 本次 测量 结果 分析 和 本次 前 多个 测量 结果 的 统计分析 ， 以 得出 关心 的 参数 （ 稳定 转速 、 稳定 转速 方差 、 前 多个 测量 结果 分布图 等 ） 。 
 　 　 报表 统计 ： 完成 数据库 报表 统计 功能 。 如 1 天 或 1 个 月 检验 情况 报表 输出 。 
 　 　 打印输出 ： 完成 某 1 次 测量 分析 结果 的 参数 和 图 、 表 输出 及 报表 输出 。 
 　 　 帮助 信息 ： 提供 必要 的 软件 使用 说明 。 
 　 　 本文 提出 的 微电机 实时 测速 方法 不但 克服 了 传统 微电机 测速 的 缺点 ， 而且 具有 功能完善 、 结构 简单 、 设备 成本低 、 使用 灵活 方便 等 特点 。 实际 应用 表明 ， 该 设备 达到 预定 技术指标 ， 且 大大提高 了 检验 效率 。 
 姜 卫东 （ 长沙 国防科技大学 电子 工程学院 ATR 室  410073 ） 
 收稿 日期 ： 1999 － 08 － 27 
