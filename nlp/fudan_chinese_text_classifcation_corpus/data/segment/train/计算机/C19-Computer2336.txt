计算机 研究 与 发展 
 JOURNAL   OF   COMPUTER   RESEARCH   AND   DEVELOPMENT 
 1999 　 Vol.36 　 No.7 　 P.819 - 823 
 
 
 
 一种 轮询 系统 的 平均 周期时间 
 刘强 　 张中兆 　 张乃通 
 摘 　 要 ： 文中 首先 介绍 了 非 抢先 优先权 队列 门限 服务 轮询 系统 的 操作 原则 ， 在 此基础 上 ， 通过 对系统 嵌入 马尔可夫 链 ， 构造 队列 母 函数 及 Laplace - Stieltjes 变换 ， 求解 出 了 系统 的 平均 周期时间 ， 并且 通过 计算机 仿真 验证 了 公式 的 正确性 . 
 关键词 ： 非 抢先 优先权 队列 轮询 系统 ,   门限 服务 ,   平均 周期时间 ,   ATM ,   母 函数 ,   Laplace - Stieltjes 变换 
 分类号 ： TP393 
 MEAN   CYCLIC   TIME   OF   A   POLLING   SYSTEM 
 LIU   Qiang 
 ( Communication   Research   Center ,   Harbin   Institute   of   Technology ,   Harbin   150001 ) 
 ZHANG   Zhong - Zhao 
 ( Communication   Research   Center ,   Harbin   Institute   of   Technology ,   Harbin   150001 ) 
 ZHANG   Nai - Tong 
 ( Communication   Research   Center ,   Harbin   Institute   of   Technology ,   Harbin   150001 ) 
 Abstract ： The   principle   of   the   no   interrupted   priority   queue   polling   system   with   gated   service   is   introduced   in   this   paper .   By   using   the   imbedded   Markov   chain   method   and   the   generating   function   of   queue   length   and   Laplace - Stieltjes   transform ,   the   mean   cyclic   time   in   statistical   equilibrium   with   symmetry   distribution   is   obtained .   The   formula   is   tested   and   verified   by   simulation . 
 Key   words ： no   interrupted   priority   queue   polling   system ,   gated   service ,   mean   cyclic   time ,   ATM ,   generating   function ,   Laplace - Stieltjes   transform ▲ 
 　 　 轮询 系统 是 代表 线路 共享 和 资源共享 相结合 的 最 简单 方法 . 这种 网络 采用 集中控制 式 网络 类型 ， 对 网络 控制能力 强 ， 每个 队列 均 有 访问 信道 的 机会 ， 可 达到 较 高 的 延迟 要求 ， 从而 大量 应用 于 各种 总线 系统 及 ATM 交换机 中 . 总线 型 ATM 交换机 ， 由 总线 控制器 控制 各 输入 / 输出 队列 的 轮询 操作 ， 具有 结构 简单 ， 扩展 能力 强 的 突出 优点 ， 目前 广泛应用 于 ATM 交换机 中 ［ 1 ～ 3 ］ . 轮询 系统 基本 工作 过程 为 ： 系统 内有 一个 中央 控制器 担任 对 每 一个 队列 的 探询 工作 ， 探询 按 顺序 进行 ， 两个 队列 之间 的 探询 时间 称为 走步 时间 ， 接受 探询 的 队列 获得 访问 信道 的 机会 ， 如果 该站 有要 发送 的 数据 ， 它 可以 利用 信道 的 全部 数据 速率 将 数据 送往 目的地 ； 否则 ， 中央 控制器 继续 对下 一个 队列 探询 ［ 4 ］ .   Kumar 利用 线性规划 计算方法 处理 排队 网络 模型 ， 解决 了 后来 具有 高 优先权 顾客 轮询 排队 网络 及 不同 顾客 采用 不同 服务 时间 轮询 排队 网络 的 性能 评价 ， 得出 了 网络 性能 的 上 下限 图表 ， 得出 网络 性能 近似 结果 ［ 5 ］ . 在 Yang 利用 矩阵 分析 的 方法 计算 确定 了 带有 优先级 的 TDM 系统 的 性能 上 下界 ， 这种 方法 也 没有 得出 优先权 系统 的 性能 表达式 ［ 6 ］ . Hashida 利用 概率 母 函数 的 方法 通过 嵌入 马尔可夫 链 对 基本 的 轮询 系统 做 了 详尽 的 精确 分析 ， 得出 了 系统 性能 的 显式 表达 结果 ［ 7 ］ . 在 轮询 系统 中 ， 平均 周期时间 是 系统 性能 评价 的 重要 指标 ， 本文 参照 Hashida 采用 的 方法 ， 利用 内嵌 马尔可夫 链 的 方法 求解 了 非 抢先 优先权 队列 门限 服务 轮询 系统 对称 分布 的 平均 周期时间 . 
 1 　 非 抢先 优先权 队列 门限 服务 轮询 系统 操作 原则 及 变量 定义 
 　 　 系统 由 一个 中心 队列 和 N 个 一般 队列 构成 ， 按 轮询 方式 进行 操作 . 中心 队列 具有 非 抢先 优先权 ， 即当 中心 队列 有 信息 要 发送 时 ， 如果 此时 服务员 正好 完成 一个 一般 队列 的 服务 ， 则 立即 对 中心 队列 进行 服务 ； 否则 ， 等待 服务员 完成 当前 队列 的 服务 后 ， 立即 对 中心 队列 进行 服务 . 服务员 对 队列 的 服务 采用 门限 型 ， 即 服务员 只 对 服务员 到达 该 队列 时 存在 于 队列 内 的 信息 进行 服务 ， 服务 过程 中 到达 的 信息 在 下 一次 轮询 到 该 队列 时 进行 服务 . 这 就 是非 抢先 优先权 队列 轮询 系统 的 操作 原则 . 
 　 　 服务员 一般 按 1 ， 2 ， … ， N 队列 进行 轮询 服务 ， 1 队列 在 N 队列 之后 接受 服务 . 若 中心 队列 有 顾客 ， 则 在 当前 队列 服务 完成 之后 ， 不需 走步 时间 优先 服务中心 队列 ， 然后 继续 进行 轮询 操作 ； 或者 目前 服务员 恰好 完成 一个 队列 的 轮询 操作 ， 则 立即 对 中心 队列 进行 服务 ， 然后 继续 进行 轮询 操作 . 每个 队列 的 排队 容量 为 无限大 ， 进入 队列 的 顾客 按先来 先 服务 的 原则 进行 服务 . 对于 任一 队列 i   ( i = 1 , 2 , … , N ) ， 输入 为泊松 过程 ， 参数 为 λ i ， 服务 时间 为 一般 分布 ， 分布 函数 为 Hi ( x ) ， 均值 为 hi ， 业务量 强度 为 ρ i ， ρ i = λ ihi   ； 中心 队列 输入 为泊松 过程 ， 参数 为 λ C ， 服务 时间 为 一般 分布 ， 分布 函数 为 HC ( x ) ， 均值 为 hC ， 业务量 强度 为 ρ C ， ρ C = λ ChC . 从 队列 i 到 i + 1 的 走步 时间 为 一般 分布 ， 分布 函数 为 μ i ( x ) . 我们 定义 下面 变量 ： 
 　 　 C 　 代表 中心 队列 ； 
 　 　 μ i 　 从 队列 i 到 i + 1 的 走步 时间 ， i = 1 , 2 , … , N ； 
 　 　 vi ( τ ) 　 在 时间 τ 内 队列 i 到达 的 顾客 数 ， i = 1 , 2 , … , N , C ； 
 　 　 gi ( j1 , j2 , … , jN , jC ) 　 在 平衡 状态 下 ， 当 服务员 到达 队列 i ( i = 1 , 2 , … , N ) 时 ， 在 队列 k ( k = 1 , 2 , … , N , C ） 有 jk 个 顾客 等待 服务 的 概率 . 
 　 　 定义 下面 母 函数 ： 
 　 　 ( 1 ) 
 2 　 队列 长度 的 分布 
 　 　 在 一般 队列 中 ， 假设 服务员 到达某 队列 的 时刻 为 … ， tn ， tn + 1 , … （ 这里 不 包括 到达 中心 队列 的 时刻 ） ， 有 … < tn < tn + 1 < … ， 将 T 定义 为 序列 { tn } . 
 　 　 我们 定义 下面 的 随机变量 ：   
 　 　 ε n ( i ) 为 在 时刻 tn 队列 i ( i = 1 , 2 , … , N , C ) 中 的 顾客 数 ； 
 　 　 ε n 为 在 时刻 tn 服务员 所在 的 队列 号 ， ε n ∈ ( 1 , 2 , … , N ) . 
 　 　 在 时刻 tn , 系统 状态 可用 下面 的 变量 描述 ： 
 （ ε n , ε n ( 1 ) , ε n ( 2 ) , … , ε n ( N ) , ε n ( C ) ） 
 因此 ， 系统 的 状态 空间 为 ： 
 I = { ( i ,   k1   , k2 ,   … ,   kN   , kC ) ｜   i = 1 , 2 , … , N ，   kj   = 0 , 1 , 2 , … ，   j = 1 , 2 , … , N , C   } 　 　 ( 2 ) 
 　 　 所以 状态 （ ε n , ε n ( 1 ) , ε n ( 2 ) , … , ε n ( N ) , ε n ( C ) ） 的 转移 概率 构成 一个 不可 约 、 非 周期 的 马尔可夫 链 ， 因此 我们 有 极限 概率 ： 
 　 　 ( 3 ) 
 　 　 这里 ， 对于 所有 的 jk ≥ 0   (   k = 1 , 2 , … , N , C   ) ， 有 两种 情况 ： 
 　 　 ( 1 )   gi ( j1 , j2 , … , jN , jC ) > 0 ， 马尔可夫 链是 各态 历经 的 ， 系统 达到 稳定 状态 ； 
 　 　 ( 2 )   gi ( j1 , j2 , … , jN , jC ) = 0 ， 马尔可夫 链 各个 状态 是 滑 过态 或 零常 返态 . 
 　 　 存在 稳定 状态 的 必要条件 是 ： 
 　 　 　 　 ( 4 ) 
 其中 ρ i = λ ihi , ρ C = λ ChC , i = 1 , 2 , … , N .   hi 是 队列 i ( i = 1 , 2 , … , N ) 的 平均 服务 时间 ， hC 为 中心站 的 平均 服务 时间 ， 下面 的 分析 建立 在 式 ( 4 ) 的 基础 上 . 
 　 　 假设 在 时刻 tn + 1 服务员 到达 队列 i + 1 ， 则 tn 是 服务员 最近 一次 到达 队列 i 的 时刻 ， 其中 tn , tn + 1 ∈ T . 设 τ i 为 在 队列 i ( i = 1 , 2 , … , N ) 的 总 服务 时间 （ 在 tn 与 tn + 1 之间 ） ； μ i 为 从 队列 i 到 i + 1 的 走步 时间 ， μ i - 1 为 从 队列 i - 1 到 i 的 走步 时间 ； FC ( x ) 为 中心 队列 在 开始 接受 服务 时 ， 中心 队列 有 x 个 顾客 ， 当 中心 队列 服务 完成 时 的 服务 时间 . 
 　 　 因此 ， 我们 有 ： 
 
 　 　 一般说来 ， 对于 在 时间 t 内以 λ 速率 到达 的 泊松 过程 ， 顾客 个数 的 母 函数 有 
 　 　 　 ( 6 ) 
 其中 ， F * ( s ) 为 t 的 分布 函数 的 Laplace - Stieltjes 变换 . 
 　 　 服务员 到达 队列 i 时 ， 队列 i 有 ε n ( i ) 个 顾客 ， 因此 τ i 分布 函数 的 Laplace - Stieltjes 变换 为 下式 ， 
 ｛ H * i ( s ) ｝ ε n ( i ) 　 　 　 　 ( 7 ) 
 其中 * 表示 Laplace - Stieltjes 变换 ［ 8 ］ . 
 　 　 考虑 到 vi ( i = 1 , 2 , … , N ) 和 μ i ( i = 1 , 2 , … , N ) 的 相互 独立性 ， 利用 公式 ( 5 ) ～ ( 7 ) ， 我们 得到 P ( i + 1 , ε n + 1 ( 1 ) , ε n + 1 ( 2 ) , … , ε n + 1 ( N ) , ε n + 1 ( C ) ) 的 母 函数 ： 
 　 
 　 　 在 上式 中设 : 
 
 　 　 在 式 （ 8 ） 中 ， 令 n → ∞ ， 系统 趋于 平衡 状态 ， 因此 有 ， 
 　 ( 9 ) 
 这里 ， Gi ( x1 , x2 , … , xN , xC ) 的 函数 关系 通过 上面 迭代 公式 表示 出来 了 ， 但是 我们 还是 推导 不出 其 显示 表达式 . 
 　 　 设 gi ( j ) ( j = 1 , 2 , … , N , C ) 为 服务员 到达 队列 i 时 队列 j 的 平均 长度 ， gi ( j ) 通过 下 式 进行 计算 ： 
 　 　 　 ( 10 ) 
 　 　 由式 （ 9 ） ， 当 i   = 1 , 2 , … , N 时 ， 我们 得到 ： 
 Gi ( 1 , 1 , … , 1 , 1 ) = k ( 常数 ) ， i = 1 , 2 , … , N 
 ( 11 ) 
 　 　 在 式 （ 9 ） 中 ， 对于 xj 进行 微分 ， 并且 将 xl → 1   ( l = 1 , 2 , … , N , C ) ,   我们 得到 ： 
 
 　 　 对于 式 （ 12 ） ， 令 i = j , j + 1 , i - 1 , i 累加 有 ： 
 　 　 ( 13 ) 
 　 　 其中 当 j > i 时有 ， 
 　 　 在 式 （ 13 ） 中 ， 令 i = j - 1 有 ： 
 　 　 ( 14 ) 
 　 　 当 系统 是 对称 分布 时 ， 即 有 λ i = λ , μ i ( x ) = μ ( x ) , Hi ( x ) = H ( x ) , 系统 达到 稳定 状态 时有 ： gi + 1 ( C ) = gi ( C )   ( i = 1 , 2 , … , N ) . 
 　 　 设 gi ( C ) = g ( C )   ( i = 1 , 2 , … , N ) ,   gi ( i ) = g ( i = 1 , 2 , … , N ) ， 因此 由式 （ 12 ） 得 ： 
 　 　 　 ( 15 ) 
 　 　 将式 （ 15 ） 代入 式 （ 14 ） 中 ， 我们 有 ： 
 　 　 ( 16 ) 
 式 （ 16 ） 即 为 服务员 到达 队列 k   ( k = 1 , 2 , … N ) 时 一般 队列 k   ( k = 1 , 2 , … N ) 的 平均 长度 . 
 3 　 平均 周期时间 
 　 　 每次 服务员 对 中心站 的 平均 服务 时间 为 ： hC ［ g ( C ) + λ Chg ］ . 因此 ， 系统 的 平均 周期时间 为 ： 
 TC = Nhg + N μ + NhC ［ g ( C ) + λ Chg ］ 
 　 　 将式 （ 15 ） 、 （ 16 ） 代入 上式 中 ， 系统 平均 周期时间 为 ： 
 　 　 　 ( 17 ) 
 　 　 在 上式 中 ， N 为 轮询 系统 一般 站点 的 个数 ， μ 为 走步 时间 的 均值 ， ρ C 为 中心 队列 的 业务量 强度 ， ρ 为 一般 队列 的 业务量 强度 . 
 4 　 理论 计算 与 仿真 实验 
 　 　 在 以上 分析 结果 的 基础 上 ， 我们 利用 Candence 公司 BONeS 仿真 平台 ， 按照 系统 的 操作 原则 构建 此 系统 的 仿真 模型 ， 进行 仿真 实验 . 理论 计算 和 仿真 实验 采用 相同 的 系统 参数 ： 一般 队 列为 对称 分布 ， 输入 均 为 泊松 过程 ， 服务 时间 和 走步 时间 均 为 一般 分布 ， μ = 0.0006 ， h = 0.0001 ， ρ C   / ρ 分别 取值 1 、 2 、 3 、 4 ， 系统 总 业务量 强度 ρ 总 = ρ C   + N ρ ， 中心 队列 和 一般 队列 按 比例 分配 业务量 强度 ， 一般 队列 个数 分别 为 N = 10 和 N = 50 进行 理论 计算 和 仿真 ， 结果 如表 1 和表 2 所示 . 
 表 1 　 N = 10 理论 计算 和 仿真 结果 
 
 ρ 总 理论值 仿真 结果 
 ρ C   / ρ = 1 ρ C   / ρ = 2 ρ C   / ρ = 3 ρ C   / ρ = 4 
 0.100006 . 6667E - 36.6800 E - 36.6796 E - 36.6685 E - 36.6757 E - 3 
 0.200007 . 5000E - 37.5121 E - 37.5119 E - 37.5122 E - 37.5155 E - 3 
 0.300008 . 5714E - 38.5700 E - 38.5706 E - 38.5711 E - 38.5721 E - 3 
 0.400001 . 0000E - 29.9937 E - 39.9898 E - 39.9878 E - 39.9867 E - 3 
 0.500001 . 2000E - 21.1989 E - 21.1983 E - 21.1983 E - 21.1976 E - 2 
 0.600001 . 5000E - 21.4978 E - 21.4934 E - 21.4978 E - 21.4985 E - 2 
 0.700002 . 0000E - 21.9993 E - 21.9981 E - 21.9946 E - 21.9956 E - 2 
 0.800003 . 0000E - 22.9978 E - 22.9983 E - 22.9948 E - 22.9952 E - 2 
 0.900006 . 0000E - 25.9985 E - 25.9979 E - 25.9944 E - 26.0068 E - 2 
 0.950001 . 2000E - 11.2011 E - 11.2029 E - 11.2013 E - 11.2023 E - 1 
 
 
 表 2 　 N = 50 理论 计算 和 仿真 结果 
 
 ρ 总 理论值 仿真 结果 
 ρ C   / ρ = 1 ρ C   / ρ = 2 ρ C   / ρ = 3 ρ C   / ρ = 4 
 0.100003 . 3333E - 23.3325 E - 23.3326 E - 23.3323 E - 23.3313 E - 2 
 0.200003 . 7500E - 23.7489 E - 23.7510 E - 23.7480 E - 23.7504 E - 2 
 0.300004 . 2857E - 24.2832 E - 24.2796 E - 24.2866 E - 24.2789 E - 2 
 0.400005 . 0000E - 24.9917 E - 25.0101 E - 24.9898 E - 24.9897 E - 2 
 0.500006 . 0000E - 26.0053 E - 25.9919 E - 25.9902 E - 25.9900 E - 2 
 0.600007 . 5000E - 27.4716 E - 27.4694 E - 27.5188 E - 27.4711 E - 2 
 0.700001 . 0000E - 19.9639 E - 29.9880 E - 29.9978 E - 21.0021 E - 1 
 0.800001 . 5000E - 11.4929 E - 11.4988 E - 11.5101 E - 11.4986 E - 1 
 0.900003 . 0000E - 12.9885 E - 12.9790 E - 13.0165 E - 12.9893 E - 1 
 0.950006 . 0000E - 16.0243 E - 15.9869 E - 15.9457 E - 16.0523 E - 1 
 
 
 　 　 从 仿真 结果 可以 看出 ， 一般 队列 个数 分别 为 N = 10 和 N = 50 ， 当 中心 队列 和 一般 队列 具有 各种 不同 的 业务量 强度 时 ， 系统 的 仿真 结果 和 理论 计算 值 相符 .   
 5 　 结 　 论 
 　 　 我们 通过 对非 抢先 优先权 队列 门限 服务 轮询 系统 内嵌 马尔可夫 链 的 方法 ， 利用 求解 母 函数 导出 了 系统 的 平均 周期时间 . 可以 看出 平均 周期时间 是 与 站点 数及 走步 时间 成正比 的 ， 与 1 和 每个 队列 （ 一般 队列 和 中心 队列 ） 业务量 强度 之 和 的 差 成反比 ， 如式 （ 17 ） 所示 . 仿真 实验 验证 了 理论 分析 的 正确性 . ■ 
 基金项目 ： 本 课题 得到 国家 “ 八 六三 ” 高技术 发展 计划 资助 ( 项目编号 863 - 2 - 4 - 8 - 2 ) . 
 作者简介 ： 刘强 ， 男 ， 1971 年生 ， 博士 研究生 ， 目前 主要 从事 空间站 内部 通信 系统 的 研究 . 
 　 　 　 　 　 张中兆 ， 男 ， 1951 年生 ， 教授 ， 博士生 导师 . 主要 研究 方向 为 移动 通信 、 C3I 理论 应 　 　 　 　 　 　 用 、 无线 数据网 、 ATM 网络 、 空间通信 . 
 　 　 　 　 　 张乃通 ， 男 ， 1934 年生 ， 现为 哈尔滨工业大学 通信 技术 研究所 所长 ， 教授 ， 博士生 　 　 　 　 　 　 导师 ， 主要 研究 方向 为 无线 数据网 、 ATM 网络 、 移动 通信 、 卫星通信 . 
 作者 单位 ： 刘强 （ 哈尔滨工业大学 通信 技术 研究所 　 哈尔滨 　 150001 ） 
 　 　 　 　 　 张中兆 （ 哈尔滨工业大学 通信 技术 研究所 　 哈尔滨 　 150001 ） 
 　 　 　 　 　 张乃通 （ 哈尔滨工业大学 通信 技术 研究所 　 哈尔滨 　 150001 ） 
 参考文献 ： 
 ［ 1 ］ Kesidis   G .   ATM   Networks   Performance .   Boston :   Kluwer   Academic   Publishers ,   1996 .   6 ～ 47 
 ［ 2 ］ Goralski   W   J .   Introduction   to   ATM   Networking .   New   York :   McGraw - Hill   Inc ,   1995 .   128 ～ 189 
 ［ 3 ］ Minzer   S   E .   Broadband   ISDN   and   asynchronous   transfer   mode .   IEEE   Communication   Magazine ，   1989 ,   27 ( 9 ) :   17 ～ 24 
 ［ 4 ］ Joseph   L   P ，   O ' Reilly   J   P .   Performance   Ananysis   of   Local   Computer   Networks .   Reading :   Addison - Wesley   Publishing   Company ， 1986 
 ［ 5 ］ Kumar   P   R .   A   tutorial   on   some   new   methods   for   performance   evaluation   of   queueing   networks . IEEE   Journal   on   Selected   Areas   in   Communication ,   1995 ， 13 ( 6 ) :   970 ～ 980 
 ［ 6 ］ Yang   O   W ,   Mark   J   W .   Queueing   analysis   of   an   integrated   services   TDM   system   using   a   matrix - analytic   method .   IEEE   Journal   on   Selected   Areas   in   Communication ,   1991 ,   9 ( 1 ) :   88 ～ 94 
 ［ 7 ］ Hashida   O .   Analysis   of   multiqueue .   The   Electrical   Communication   Laboratories   NTT ,   1972 ， 20 ( 3 - 4 ) :   189 ～ 199 
 ［ 8 ］ Cooper   R   B ，   Murray   G .   Queues   served   in   cyclic   order .   The   Bell   System   Technical   Journal ,   1969 ,   3 :   675 ～ 689 
 收稿 日期 ： 1998 - 09 - 14 
 修稿 日期 ： 1998 - 12 - 24 
