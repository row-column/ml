计算机 工程 
 Computer   Engineering 
 1999 年 　 第 25 卷 　 第 9 期 　 Vol.25   No.9     1999 
 
 
 
 退化 字符 图象 的 骨架 法 形态 分析 识别方法 
 卢 　 达 　 浦 　 炜 　 谢铭培 
 　 　 摘 　 要 ： 基于 模糊 集合 的 退化 字符 图象 有 骨架 法 结构 形态 分析 识别方法 ， 可 直接 应用 于 退化 字符 的 模糊 图象 或 灰度 图象 ， 因此 对 噪声 不 敏感 ， 而 对 笔划 缺损 字符 可 正确 地 提取 整个 骨架 ； 处理 连体 字符 时能 根据 骨架 的 形态 结构特征 较 容易 地 确定 切分 位置 ， 经 修剪 算法 对 各 切分 点 的 处理 ， 被 分离 的 字符 骨架 可 直接 通过 分类器 而 不必 再作 进一步 处理 ． 
 　 　 关键词 ： 退化 字符 图象 　 模糊 集合 　 骨架 　 分离 算法 　 字符识别 
 Topographic   Approach   Recognizer   for   Skeletonization   of   Regraded   Character   Images   Based   on   Fuzzy   Set 
 Lu   Da   Pu   Wei 
 ( Changshu   College ,   Changshu   215500 ) 
 Xie   Mingpei 
 ( Department   of   Computer   Science ,   Fudan   University ,   Shanghai   200433 ) 
 　 　 Abstract 　 A   topographic   approach   recognizer   is   proposed   for   skeletonization   of   regraded   character   images   based   on   fuzzy   set .   The   method   works   directly   on   fuzzy   or   gray - scale   images   of   regradedcharacted ,   so   that   it   is   less   sensitive   to   noise .   It   can   correctly   extract   the   whole   skeleton   although   a   character   is   brocken   into   pieces .   For   some   characters   merged   togther ,   the   breaking   positions   can   be   easily   located   by   topographic   approaching   for   skeletons .   A   splitting   algorithm   is   then   applied   on   each   breaking   position .   The   separated   skeletons   can   be   directly   passed   through   a   classifier   wirthout   and   further   process . 
 　 　 Key   words 　 Degraded   character   images ,   Fuzzy   set ,   Skeleton ,   Splitting   algorithm ,   Character   recognition . 
 　 　 退化 字符 的 提取 和 识别 是 光学 字符识别 ( OCR ) 和 工程图 字符 自动识别 处理 中 的 一个 重要 方面 。 近年来 ， 人们 基于 二值 图象 的 细化 ， 提出 了 垂直 投影 截面 法 [ 1 ] 、 骨架 特征 法 [ 2 ] 、 轮廓线 特征 法 [ 3 ] 、 分断 代价 法 [ 4 ] 等 多种 识别方法 ， 这些 方法 对 某些 规范 或 特定 的 退化 字符 能 取得 较 好 的 识别 效果 ， 但 这些 方法 主要 将 重点 放在 退化 字符 的 识别 上 ， 没有 充分考虑 字符 图象 退化 的 原因 及 识别 之前 对 退化 字符 图象 作 有效 的 图象 复原 处理 ， 另外 ， 如果 将 这些 方法 应用 于 灰度 图象 或 模糊 图象 ， 必须 用 灰度 取 阈法 获得 二值 图象 或 通过 α 分割 ， 其 结果 都 将 引起 隶属 程度 的 下降 而 最终 影响 退化 字符 的 识别率 。 
 1 　 模糊 图象 的 变换 
 　 　 作为 退化 字符 提取 和 识别 处理 的 模糊 文本 图象 变换 不仅 是 对 退化 字符 图象 函数 寻找 一个 合适 的 变换 核 的 数学 问题 ， 而且 还 可 分析 退化 字符 图象 退化 的 具体 原因 ， 在 此基础 上 着手 用 数学方法 作 " 去 退化 " 处理 以 改变 退化 字符 图象 函数 的 某些 特征 ， 还 字符 图象 的 真实 面目 。 
 　 　 设 f ( x , y ) 为 一 模糊 图象 的 隶属 函数 ， 本文 中 由 如下 点 扩散 函数 用于 变换 ： 
 h ( x , y ) = C ( x ) C ( y ) 
 ( 1 ) 
 而 
 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 2 ) 
 f ( x , y ) 的 变换 可用 g ( x , y ) 表示 ： 
 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 3 ) 
 　 　 而 
 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 4 ) 
 这里 μ 为 一 常数 ； ， 将 公式 ( 1 ) 、 ( 2 ) 和 ( 4 ) 代入 ( 3 ) ， 可 得 ： 
 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 5 ) 
 　 　 若 和 ； 
 　 　 否则 ， g ( x , y ) = 0 
 　 　 这里 ： 
 　 　 
 
 图 1 　 象素 的 坐标 
 　 　 二值 图象 中 的 一个 象素 可 看作 是 具有 " 1 " 值 或 " 0 " 值 的 栅格 。 若 选取 - 3 为 一 正整数 ， 如图 1 所示 ， 将 一 象素 栅格 的 左上角 作为 坐标 原点 ， 则 ( ｉ ， ｊ ) 的 坐标 为 ( ｘ ， ｙ ) ， 这里 ； 则 f ( x , y ) 和 h ( x , y ) 的 卷积 计算 如下 ： 
 　 　 　 　 　 　 　 　 　 　 　 ( 6 ) 
 　 　 其中 μ i + m ， , j + n 表示 象素 ( i + m , j + n ) 的 隶属 值 ， 而 
 
 　 　 同样 地 ， gij ( x , y ) 的 一阶 、 二阶 偏 导数 可 推导 如下 ： 
 　 　 　 　 　 　 　 　 　 　 　 　 　 　 ( 7 ) 
 　 　 　 　 　 　 　 　 　 　 　 　 ( 8 ) 
 　 　 　 　 　 　 　 　 　 　 　 ( 9 ) 
 　 　 　 　 　 　 　 　 　 　 　 　 ( 10 ) 
 2 　 退化 字符 图象 的 骨架 处理 
 2.1 　 缺损 字符 处理 
 　 　 有 两个 处理 方法 可 用于 笔划 缺损 字符 ： 一种 是 将 各 成分 组合成 一 图象 ， 该 图象 在 后 阶段 处理过程 中 一直 视作 一 整体 ； 另 一种 是 把 各 成分 看作 各自 独立 的 部分 ， 它们 通过 分类器 分类 后 按 一定 的 规则 再 组合 起来 ， 本文 介绍 的 处理 方法 属于 第一种 。 图 2 ( a ) 为 字符 的 一 断裂 笔划 ， 其 三维 图形 见图 2 ( b ) ，   若 Z 轴 表示 灰度 等级 ， 当 上述 作为 预处理 的 卷积 计算 完成 后 ， 两 断裂 部分 已能 连接 ， 其 平滑 处理 过 的 图象 见图 2 ( c ) ， 其中 黑线 代表 通过 脊 形点 检测 提取 的 骨架 。 
 
 图 2   ( a ) 字符 一 断裂 笔划   ( b ) 对应 的 三维 图形 
 ( c ) 平滑 处理 过 的 图象 和 骨架 
 　 　 上述 算法 可 将 断口 距离 为 2 σ 的 两 断裂 部分 连接起来 。 但 同时 也 可能 带来 各 字符 间 不 应有 的 连接 。 因此 ， σ 值 的 大小 将 直接 影响 缺损 字符 骨架 的 提取 及 退化 字符识别 的 正确率 ， 而 σ 值 的 选取 应 充分考虑 被 处理 字符 图象 中 各 字符 笔划 的 宽度 和 字符 之间 的 间隔 距离 。 设 b 为 字符 最细 笔划 的 宽度 ， d 为 各 字符 间 的 最小 间隔 ， 若 d < h ， 则 取 σ < h / 2 ， 即 连接 成分 的 最大 可 连接 距离 就是 最细 笔划 宽度 ； 若 d < h ， 则 取 σ < d / 2 ， 此时 的 最大 距离 小于 字符 间隔 。 由于 印刷 字符 中 缺损 字符 的 产生 多为 印刷 设备 的 缺陷 和 印刷 质量 造成 且 字符 文本 中 一般 d 多 大于 b ， 上述 σ 的 处理 可 获得 较 满意 的 效果 。 
 2.2   用于 连体 字符 处理 的 分离 、 修剪 算法 
 　 　 连体 字符 的 连结 点 比 正常 的 字符 笔划 有 较 少 的 连结 象素 及 较 低 的 隶属 值 ， 当 完成 图象 变换 后 ， 连结 点处 的 平滑 隶属 值 相对 较 低 ， 但 较 细 的 笔划 也 同样 有 较 低 的 隶属 值 ， 两者 的 差别 在于 较细 笔划 的 隶属 值 变化 平缓 ， 而 连结 点 周围 隶属 值 的 变化 则 十分 尖锐 。 因此 ， 若脊 形线 上 某点 附近 切线 的 斜率 变化 最大 ， 且 具有 最小 的 隶属 值 ， 则 该点 可以 认为 具有 连结 点 性质 ， 换句话 讲 ， 连结 点 位置 为 具有 高本 征值 的 鞍点 。 
 　 　 本文 介绍 的 用于 连体 字符 处理 的 分离 、 修剪 算法 包括 ： 
 　 　 ( 1 ) 搜索 鞍点 　 搜索 鞍点 是 一 直线 向前 的 过程 。 由于 字符 的 笔划 可能 包含 一系列 的 脊 形点 ， 因此 可 顺着 某 一笔划 去 连续 跟踪 。 根据 鞍点 的 特征 来 查找 各点 的 斜率 ， 若 某点 切线 的 斜率 为 零 ， 且 该 点 与 平行 于 脊 形线 的 特征 矢量 相关 的 本 征值 为 负值 ， 则 可 确定 该点 为 鞍点 。 大多数 情况 鞍点 并 不精确地 位于 脊 形点 ， 而是 可能 存在 于 某 一 脊形 线段 。 为此 可简化 为 检查 各段 脊形 线段 的 头 、 尾 两端 点 的 斜率 ， 若 两端 点 的 切线 均 指向 外 ， 则 有 鞍点 存在 于 该 线段 内 。 用 数学 表示 ： 
 　 　 . 若 满足 ： ( 1 ) g ＝ 0 　 ( 2 ) w ＜ 0 
 　 　 则 鞍点 精确 位于 脊 形点 。 这里 Vg 、 w 分别 表示 脊 形点 的 斜率 及 该 点 与 平行 于 脊 形线 的 特征 矢量 相关 的 本 征值 。 
 　 　 . 若 满足 ： 
 　 　 则 鞍点 位于 该 脊形 线段 上 。 这里 Vg1 、 Vg2 与   W1 、 W2 分别 表示 脊形 线段 两端 点 的 斜率 及 与 平行 于 脊 形线 的 特征 矢量 相关 的 本 征值 。 ( 1 ) g1 . g2 ≤ 0 　 ( 2 ) W1 ＞ 0 ， W2 ＞ 0 
 　 　 ( 2 ) 确定 切分 点 　 ① 判断 可能 切分 点 ： 若 鞍点 本征值 超过 阈值 ， 该 鞍点 定为 可能 切分 点 ； ② 对 各 可能 切分 点 的 本 征值 及 对应 切分 点处 象素 的 隶属 值 排序 ， 隶属 值 反映 切分 点处 象素 的 切分 代价 ， 隶属 值低 的 点 则 切分 可能性 高 。 若 两点 的 隶属 值 相等 ， 则 检查 本征值 ， 本征值 反映 具有 切分 可能 邻域 的 切分 代价 ， 本征值 高则 切分 代价 低 ； ③ 计算 切分 可靠 度 。 
 　 　 ( 3 ) 修剪 额外 骨架 线 　 ① 判断 连结 点 类型 ， 确定 切分 点处 骨架 线应 整体 删除 还是 部分 删除 ； ② 判断 切分 点 两分 断线 段 的 长短 ， 确定 多余 骨架 线 的 修剪 。 
 　 　 Kahan 等 [ 2 ] 认为 ： 常见 的 连结 点有 两种 ： 衬线 结点 和 双 O 结点 ， 如图 3 ( a ) 、 ( b ) 所示 。 当 分离 算法 应用 于 具有 双 O   结点 的 连体 字符 时 ， 结点 处 存在 一 多余 的 笔划 ， 见图 3 ( e ) 中 的 点线 ， 该 多余 笔划 不 属于 任何 一个 字符 ， 因此 必须 整体 删除 。 而 衬线 结点 处 额外 的 骨架 线 一部分 可能 属于 字符 某 一笔划 ， 见图 3 ( d ) ， 因此 仅 需 部分 修剪 ， 其它 类型 结点 处 可能 存 
 　 　 在 的 额外 骨架 线则 是 某 一 字符 的 一部分 。 例如 图 3 ( f ) 所示 的 额外 骨架 线则 是 属于 字符 " y " 中 一部分 ， 就 这 一 例子 ， 鞍点 左方 的 需 删除 ， 但 鞍点 右方 的 只 需 部分 修剪 。 
 
 图 3   ( a ) 衬线 结点   ( b ) 双 O 结点   ( c ) 其它 结点 
 ( d ) 、 ( e ) 、 ( f ) 分别 是 ( a ) 、 ( b ) 、 ( c ) 的 骨架 
 　 　 对 额外 骨架 线 修剪 的 准则 为 ： 包含 一切 分点 的 笔划 在 鞍点 处切 分为 两段 ， 随后 对 这 两分 断 部分 分别 检查 。 若 一段 较 短 ， 且 另 一 末端 处于 " T " 型 交叉 结点 ， 则 该 结点 属于 " O " 型类 结点 ， " O " 型 结点 可以 是 双 " O " 结点 或是 与 另 一笔划 相 接触 的 凸状 轮廓线 ， 见图 3 ( f ) ， 因此 该 部分 需 全部 删除 ； 若 较长 分断 部分 另一端 点 不是 动性 " T " 型 交叉点 ， 则 额外 部分 不是 " O " 型 结点 ， 这时 该 分断 部分 则 包含 实际 字符 的 骨架 线 和 部分 额外 骨架 线 。 修剪 这 额外 的 骨架 线 ， 只 需 从 鞍点 开始 搜索 ， 直至 出现 本征值 的 零 交叉点 ， 从 鞍点 开始 到 本 征值 的 零 交叉点 的 线段 即 为 应 删除 的 多余 骨架 线 。 
 
 图 4   ( a ) 具有 断点 的 缺省 字符   ( b ) 模糊 图象 变换   ( c ) 缺省 字符 的 骨架 
 　 　 ( 4 ) 单个 字符识别 和 利用 上下文 确认 　 修剪 过程 结束 ， 连体 字符 的 骨架 被切 分成 几个 单个 字符 的 骨架 。 对于 目前 大多数 的 切分 算法 ， 每个 切分 的 假设 需 通过 对 已 切分 的 字符 图象处理 以 提取 各自 的 特征 作 进一步 的 证实 ， 这 将 增加 处理 时间 ， 但 本文 上述 方法 在 修剪 过程 结束 后 ， 不需 再作 任何 处理 ， 每个 单独 的 字符 骨架 均 能 通过 字符 分类器 。 另外 ， 通过 上下文 确认 来 决定 切分 假设 的 可靠性 。 上下文 确认 是 基于 包含 连体 字符 词 的 正确 一致性 ， 其 可靠性 则 由 通过 字典 检测 的 词 除以 包含 连体 字符 词 的 总数 计算 而 得 。 
 3 　 试验 结果 
 　 　 对于 本文 介绍 的 退化 字符 的 提取 、 识别方法 的 实验 是 在 UNIX 操作系统 下用   C语言 编程 实现 的 。 实验 样本 共 28600 个字符 ， 其中 因 印刷 污染 的 连体 字符 为 212 个 ， 笔划 有 断口 的 缺损 字符 为 103 个 。 实验 先 采用 合适 的 滤波 函数 对 所有 样本 字符 图象 进行 平滑 滤波 处理 ， 图 ( 4 ) 、 图 ( 5 ) 分别 为 实验 样本 字符 中 的 几个 缺损 字符 和 连体 字符 的 处理 情况 。 经 模糊 图象 变换 ， 99 个 缺损 字符 的 缺口处 已 被 相对 较 小 的 隶属 值 所 连接 ， 缺损 字符 图象 的 恢复 率达 96.16% 。 然后 对 样本 字符 图象 用 本文 介绍 的 骨架 形态 结构 分析法 和 分断 代价 法 进行 字符识别 、 比较 ， 实验 结果 如表 1 所示 ： 
 
 图 5 　 ( a ) 连体 字符   ( b ) 模糊 图象 变换   ( c ) 连体 字符 的 骨架 
 表 1 　 实验 结果 
 
 识别方法 召回 率 ( ％ ) 识别率 ( ％ ) 
 骨架 形态 结构 分析 92.8379 . 24 
 分断 代价 法 88.7668 . 22 
 
 　 　 表中 的 召回 率 用以 评价 识别方法 对 连体 字符 的 提取 能力 ， 定义 为 ： 
 　 　 召回 率 = ( 提取 的 连体 字符 数 / 样本 字符 图象 中 总 的 连体 字符 数 ) . 100% 
 　 　 表中 的 识别率 用以 评价 识别方法 对 连体 字符 的 识别 能力 ， 定义 为 ： 
 　 　 识别率 = ( 正确 识别 的 连体 字符 数 / 样本 字符 图象 中 总 的 连体 字符 数 ) . 100% 
 4 　 讨论 和 结论 
 　 　 本文 介绍 的 识别方法 有 以下 几个 优点 ： ( 1 ) 可 直接 应用 于 字符 的 模糊 图象 或 灰度 图象 ， 对 噪声 不 敏感 ； ( 2 ) 通过 选用 合适 的 平滑 滤波 函数 对 模糊 文本 图象 进行 预处理 ， 可 明显提高 退化 字符识别 率 ； ( 3 ) 连体 字符 经 本文 介绍 的 分离 算法 切分 后 ， 对己 切分 的 字符 图象 骨架 不必 再作 特征提取 而 直接 通过 字符 分类器 ， 从而 简化 了 字符识别 处理过程 ， 提高 了 识别 速度 。 
 　 　 本文 介绍 的 通过 平滑 滤波 模糊 文本 图象 ， 提取 字符 脊 形点 进而 跟踪 处理 的 方法 ， 提供 了 一个 对 退化 字符 智能 识别 的 新 的 框架 ， 但 该 方法 的 研究 和 开发 还有 待 进一步 深入 和 完善 ， 其中 分离 算法 上 智能化 因素 还应 增加 以 进一步提高 连体 字符 切分 的 准确性 。 
 作者简介 ： 卢 　 达 ( 1949 ～ ) ， 男 ， 副教授 ， 主要 研究 方向 为 模式识别 、 图象处理 等 
 作者 单位 ： 卢 　 达 　 浦 　 炜 　 常熟 高等 专科学校 ， 常熟 　 215500 
 　 　 　 　 　 谢铭培 　 复旦大学 计算机科学 系 ， 上海 　 200433 
 参考文献 
 1   Fujisawa   H , Nakano   Y , Kurino   K . Segmentation   Methods   for   Character   Recognition : from   Segmentation   to   Document   Structure   Analysis .   Proc .   of   the   IEEE ,   1992 ,   80 ( 7 ) :   1079 - 1092 
 2   Kahan   S , Pavlidis   T , Baird   H   S . On   the   Recognition   of   Printed   Characters   of   Any   Font   and   Size .   IEEE   Trans . Pattern   Anal .   Machine   Intell ,   1987 ,   9 ( 2 ) :   274 - 288 
 3   Mitchell   B   T , Gillies   A   M .   A   Model - based   Computer   Vision   System   for   Recognizing   Handwritten   ZIP   Codes .   Machine   Vision   and   Applications ,   1989 : 231 - 243 
 4   Tsujimoto   S , Asada   H . Major   Components   of   a   Complete   Text   Reading   System . Proc .   of   the   IEEE ,   1992 , 80 ( 7 ) : 1133 - 1149 
 收稿 日期 ： 1998 - 12 - 21 
