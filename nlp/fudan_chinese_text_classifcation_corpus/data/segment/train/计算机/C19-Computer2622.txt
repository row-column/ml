软件 学报 
 JOURNAL   OF   SOFTWARE 
 1999 年   第 10 卷   第 7 期 　 No.7   Vol.10   1999 
 
 
 
 WEB 用户 的 视图 
 阳小华 　 周龙骧 
 　 　 摘要 　 视图 不仅 是 数据库 中 的 一个 重要 概念 , 也 能够 在 Web 系统 中 发挥 重要 的 作用 . 但是 , Web 视图 不能 完全 照搬 数据库 视图 的 概念 , 而 应该 体现 出 Web 特色 . 文章 提出 了 浏览 区域 的 概念 , 能 较 好 地 刻画 Web 用户 活动 的 特征 . 在 此 概念 的 基础 上 , 给出 一个 能 体现 Web 特色 的 用户 视图 的 定义 , 初步 探讨 了 Web 用户 视图 的 实现 方法 和 一些 可能 的 应用 . 
 　 　 关键词 　 视图 , 万维网 , 浏览 , 查询 . 
 　 　 中图法 分类号 　 TP393 
 The   View   of   Web   Users 
 YANG   Xiao - hua1 , 2   ZHOU   Long - xiang1 
 1 （ Department   of   Computer   Science 　 Institute   of   Mathematics 　 The   Chinese   Academy   of   Sciences 　 Beijing 　 100080 ） 
 2 ( Department   of   Computer   Science   Central - South   Institute   of   Technology   Hengyang   421001 ) 
 　 　 Abstract 　   View   is   an   important   idea   of   database   and   it   can   also   be   used   effectively   in   the   Web .   But   the   view   of   Web   is   not   the   same   as   that   of   database ,   since   the   Web   is   different   from   the   database .   In   this   paper ,   the   authors   present   an   important   idea ,   the   area   of   navigation ,   which   describes   the   characteristics   of   Web   users '   activities .   Based   on   this   idea ,   the   definition   of   Web   user ' s   view   is   given   and   its   implementation   and   some   possible   applications   are   also   discussed . 
 　 　 Key   words 　 View ,   world   wide   web ,   navigation ,   query . 
 　 　 视图 是 数据库 中 的 一个 重要 概念 . 在 关系数据库 中 , 它 是从 一个 或 几个 基本 表 （ 或 视图 ） 导出 的 表 ［ 1 ］ . 数据库管理员 可以 为 特定 的 用户 或 用户群 定义 一个 或 多个 视图 , 以 限制 或 引导 他们 对 数据库 的 访问 . 用户 也 可以 定义 视图 , 以 把 自己 的 视野 集中 在 有 意义 的 范围 内 . 
 　 　 World   Wide   Web ( 万维网 ) 是 一个 信息 的 海洋 , 用户 要 从中 获取 所 需 的 信息 , 有时 如同 大海捞针 一样 困难 . 而 事实上 , 虽然 Web 资源 丰富 , 但是 每个 用户 都 有 自己 特定 的 爱好 和 需求 , 他 只会 对 某些 特定 的 资源 感兴趣 . 因此 , 如果 能够 像 数据库系统 那样 , 引入 视图 的 概念 , 使 用户 能够 以 自己 特定 的 方式 来 看待 Web 系统 , 把 注意力 集中 在 所 关心 的 范围 内 , 将 十分 有利于 用户 获取 所 需 的 信息 . 
 　 　 虽然 在 Web 上 有 许多 索引 查询 系统 ［ 2 ］ , 使 用户 可以 通过 关键字 检索 等 手段 来 帮助 寻找 所 需 的 信息 . 但是 , 从 本质 上 看 , 访问 Web 文档 的 基本 手段 是 直接 通过 URL , 或 间接 通过 超链 . 也就是说 , 浏览 是 访问 Web 的 基本 方式 , 而 查询 只不过 是 在 浏览 方式 的 基础 上 提供 的 一种 辅助 手段 . 因此 , Web 视图 不宜 像 数据库 视图 那样 依赖于 特定 的 查询 操作 , 而 应该 体现 出 Web 用户 获取信息 的 浏览 特征 . 
 　 　 本文 主要 从 Web 用户 的 角度 来 考察 视图 . 我们 着眼于 客户端 , 通过 对 Web 用户 获取信息 的 过程 进行 分析 , 提出 了 浏览 区域 的 概念 , 较 好 地 刻画 了 Web 用户 活动 的 本质特征 . 在 此 概念 的 基础 上 , 给出 了 一个 能 体现 Web 特色 的 用户 视图 （ 在 客户端 ） 的 定义 , 初步 探讨 了 Web 用户 视图 的 实现 方法 和 一些 可能 的 应用 . 
 1   Web 用户 视图 的 定义 
 1.1   Web 用户 的 浏览 区域 
 　 　 Web 是 一个 由 众多 文档 组成 的 超文本 信息系统 , 它 有 两个 基本成分 ： 文档 （ 只 考虑 HTML 文档 ） 和 超链 ( 只 考虑 文档 之间 的 超链 ) . 如果 我们 把 文档 看作 结点 , 把 文档 间 的 超链 看作 从源 文档 指向 目标 文档 的 有 向 边 , 则 可以 把 Web 简单 地 看作 一个 有向图 . 
 　 　 如果 忽略 有 向 边 的 方向 , 即 把 有 向 边 可作 无向边 , 则 有向图 变成 无向 图 , 称之为 （ 原 有向图 的 ） 底图 . 如果 在 一个 无向 图中 , 任意 两个 结点 之间 都 有 路径 可 达 , 则 称之为 连通 图 . 如果 一个 有向图 的 底图 是 连通 图 , 则 称 该 有向图 为弱 连通 图 . 
 　 　 定义 1 .   Web 中 的 弱 连通 子图 称为 Web 的 区域 . 
 　 　 简单 说来 , 一个 Web 用户 的 工作 就 是从 Web 丰富 的 资源 中 不断 地 发现 和 获取 自己 感兴趣 的 信息 . 在 Web 中 , 各种 信息 散落 在 众多 的 文档 中 , 而 大量 的 相关 文档 又 常常 通过 超链 链接 , 构成 一个个 区域 . 因此 , Web 用户 活动 的 基本特征 是 浏览 , 通过 浏览 一个个 Web 区域 来 满足 自己 特定 的 信息 需求 . 一个 用户 在 不同 的 时候 会 有 不同 的 需求 , 从而 在 其 活动 中 就 会 表现 出 不同 的 特点 . 根据 这些 特点 , 我们 可以 把 用户 的 活动 划分 为 一个个 活动 单元 , 称之为 用户 的 浏览 过程 . 
 　 　 定义 2 .   设 D = 〈 d1 , d2 , ... , dn 〉 是 一个 Web 用户 已经 访问 过 的 全部 文档 （ 按 时间 先后顺序 ） 所 组成 的 序列 （ 若 同一个 文档 在 不同 的 时候 被 重复 访问 , 则 它 在 D 中 不同 的 位置 重复 出现 ） , S = 〈 di , ... , dj 〉 是 D 的 某个 子 序列 , 称 S 为 该 用户 的 第 k ( 1 ≤ k ) 次 浏览 过程 , 如果 
 　 　 （ 1 ） 对 S 中 的 任一 元素 dq （ i < q ≤ j ） , 都 存在 着 元素 dp （ i ≤ p < q ） , 使得 在 dp 中有 指向 dq 的 超链 , 而且 用户 是 通过 这条 超链 访问 到 dq 的 ； 
 　 　 （ 2 ） 用户 没有 通过 S 中 某个 文档 里 的 超链 访问 dj + 1 （ j < n ） ； 
 　 　 （ 3 ） 用户 没有 通过 第 k - 1 次 浏览 过程 中 的 某 一 元素 里 的 超链 访问 di （ k > 1 ） . 
 　 　 定义 3 .   设 S = 〈 di , ... , dj 〉 是 一个 浏览 过程 , 则 称 S 中 包含 的 元素 的 个数 为 它 的 长度 . 
 　 　 定义 4 .   设 S 是 一个 Web 用户 的 某 一次 浏览 过程 , 称以 S 中 的 元素 为 结点 , 以 这些 元素 之间 用户 使用 过 的 超链 为 边 构成 的 有向图 为 该 用户 的 一个 浏览 区域 . 
 　 　 浏览 过程 S 中 的 第 1 个 元素 di 称为 其 浏览 起点 . 由 定义 2 可以 看出 , 从 浏览 起点 到 浏览 过程 中 的 其他 元素 之间 存在 着 由 用户 使用 过 的 超链 构成 的 有 向 路径 . 因此 , 浏览 区域 是 Web 的 弱 连通 子图 , 即为 Web 的 区域 . 由于 用户 的 每 一次 浏览 都 有 其 特定 的 目的 和 需求 , 在 一个 浏览 过程 中 , 用户 之所以 会 从 起点 顺着 特定 的 超链 序列 访问 某些 文档 , 是因为 他 认为 这些 文档 中有 他 此时 想要 的 东西 . 因此 , 每 一个 浏览 区域 通常 都 有 自己 的 特性 , 即 浏览 区域 中 的 文档 都 有 某些 共同 的 性质 . 浏览 区域 可大可小 , 最小 的 可以 只有 1 个 结点 （ 起点 ） . 由于 超链 链接 表示 的 是 文档 之间 的 逻辑联系 , 所以 一个 浏览 区域 可以 包含 位于 不同 服务器 上 的 文档 . 
 1.2   Web 用户 的 视图 
 　 　 虽然 Web 用户 在 不同 的 时候 通常 会 有 不同 的 信息 需求 , 但是 用户 一般 都 会 有 一些 相对 稳定 的 兴趣 , 比如说 对 某些 特定 的 主题 、 Web 域 或者 Web 站点 . 因此 , 在 一些 不同 的 浏览 过程 中 , 用户 会 表现 出 相同 或 相似 的 需求 , 从而 相应 的 浏览 区域 会 表现 出 相同 或 相似 的 特性 . 
 　 　 如果 有 一个 适当 的 判别 规则 , 那么 就 可以 把 浏览 区域 分为 一个个 相似 类 , 使得 在 同一个 相似 类中 的 浏览 区域 彼此 都 是 相似 的 , 它们 对应 于 用户 相同 的 兴趣 . 若 用户 对 某个 相似 类 的 兴趣 强度 超过 了 特定 的 阈值 , 我们 就 可以 把 它 定义 为 一个 视图 . 
 　 　 定义 5 .   设 W 是 一个 Web 用户 访问 过 的 浏览 区域 组成 的 集合 , R 是 一个 给定 的 相似性 判别 规则 , S 是 W 关于 R 的 相似 类 的 集合 , F 是 一个 从 S 到 非负 实数 的 函数 （ 用来 度量 用户 对 相似 类 的 兴趣 强度 ） , H 是 一个 给定 的 阈值 , C 是 S 在 关系 R 下 的 一个 相似 类 , 若 F （ C ） > H , 则 称 C 为 该 用户 的 一个 视图 . 
 2   Web 用户 视图 的 获取 
 2.1   相似性 判别 规则 
 　 　 相似性 判别 规则 是 浏览 区域 集合 上 的 一个 关系 （ 称为 相似 关系 ） . 显然 , 每 一个 浏览 区域 应该 是 与 自己 相似 的 . 其次 , 若 浏览 区域 A 与 浏览 区域 B 相似 , 则 浏览 区域 B 也 应 与 浏览 区域 A 相似 . 也就是说 , 相似 关系 应该 是 自反 的 、 对称 的 , 因而是 一个 相容 关系 . 
 　 　 由于 每 一个 浏览 区域 中 的 文档 都 有 某些 共同 的 性质 , 因此 , 如果 两个 浏览 区域 之间 有 重迭 部分 , 则 由于 重迭 部分 兼有 两个 区域 的 特性 , 我们 有 理由 认为 这 两个 区域 很 可能 有 相似 的 特性 或者说 包含 的 信息 有 某种程度 的 相似性 . 另外 , 若 浏览 区域 A 和 B 都 与 C 重迭 , 即使 它们 彼此之间 并 没有 重迭 , A 和 B 也 会 有 某种程度 的 相似性 , 这种 相似性 可以 看做 是 由 A 与 C 和 C 与 B 的 相似性 传递 得到 的 . 所以 , 我们 有 如下 的 相似性 判别 规则 ： 
 　 　 设 A , B 是 两个 浏览 区域 , 我们 说 它们 是 相似 的 , 如果 下面 的 条件 （ 1 ） 或者 （ 2 ） 成立 ： 
 　 　 （ 1 ）   A 和 B 包含 有 重迭 的 部分 , 即 有 一些 共同 的 文档 ； 
 　 　 （ 2 ） 存在 着 浏览 区域 A0 = A , A1 , ... , Ak = B , 使得 Ai - 1 与 Ai （ i = 1 , ... , k ） 是 重迭 的 , 其中 k ≤ m ( m 是 一个 设定 的 常量 ) , 此时 , 我们 称 A 和 B 在 不 超过 m 步 传递 的 意义 下 是 重迭 的 . 
 　 　 由于 相似性 的 传递 随着 传递 步数 的 增加 , 相似性 一般 会 越来越 弱 . 因此 , 需要 一个 限制 传递 步数 的 上界 m , 只有 当 两个 浏览 区域 在 不 超过 m 步 传递 的 意义 下 是 重迭 的 , 我们 才能 认为 它们 是 相似 的 . 很 容易 发现 , 当 m = 1 时 , 不 超过 m 步 传递 的 意义 下 重迭 就是 区域 本身 重迭 . m 的 选取 应视 具体情况 而定 , 不要 太 大 , 一般 取 2 或 3 可能 比较 适当 . 
 　 　 上面 的 相似性 判别 规则 简单 易用 , 有 一定 的 准确性 （ 不 完全 准确 ） . 但是 , 由于 它 没有 深入 考虑 浏览 区域 的 信息内容 , 因而 有 很大 的 局限性 （ 有些 相应 于 相同 信息 主题 的 浏览 区域 不 能够 满足 我们 的 规则 ） . 寻找 更加 准确 实用 的 相似性 判别 规则 是 我们 需要 进一步 努力 的 工作 . 
 2.2   兴趣 强度 度量 
 　 　 如果 用户 对 某些 类型 的 信息 有 较大 的 兴趣 , 那么 他 就 会 花费 较大 的 精力 来 探寻 、 获取 这些 信息 . 由于 Web 用户 探寻 、 获取信息 的 基本特征 是 浏览 , 用户 通过 一次次 浏览 过程 来 满足 自己 的 一个个 信息 需求 . 因此 , 如果 用户 对 某些 信息 有 特别 的 和 持续 的 兴趣 , 那么 他 就 会 对 这些 信息 所在 的 地方 进行 比较 深入 的 探索 . 有 两个 迹象 可以 反映 出 这 一点 . 一方面 , 如果 某个 浏览 过程 的 长度 远远 大于 其他 浏览 过程 的 长度 , 那么 我们 有 理由 认为 用户 在 这个 浏览 过程 中 花费 了 大量 的 精力 , 因此 可以 认为 用户 对 相应 的 浏览 区域 有 较大 的 兴趣 . 另一方面 , 如果 有 许多 个 浏览 过程 都 对应 于 某种 信息 需求 , 那么 可以 认为 这是 用户 的 一个 持续 的 兴趣 所在 . 
 　 　 相似 类 由 彼此 相似 的 浏览 区域 组成 , 与 用户 的 某种 特定 的 兴趣 和 信息 需求 相对 应 , 每个 浏览 区域 对应 于 一个 浏览 过程 . 因此 , 我们 可以 通过 综合 考虑 相似 类中 所 包含 的 浏览 过程 的 个数 和 这些 浏览 过程 的 长度 来 度量 用户 对 它 的 兴趣 强度 . 下面 , 我们 给出 一个 简单 的 计算公式 . 
 　 　 　 　 　 　 　 　 F （ C ） = （ l / L + n / N ) / 2 . 　 　 　 　 　 　 　 　 　 （ 1 ） 
 其中 F 是 用户 兴趣 强度 的 度量 函数 , C 是 一个 相似 类 , l 是 相似 类 C 的 长度 （ C 中 包含 的 浏览 过程 的 长度 之 和 ） , L 是 用户 轨迹 的 长度 （ 所有 浏览 过程 的 长度 之 和 ） , n 是 C 中 含有 的 浏览 过程 的 个数 , N 是 用户 浏览 过程 的 总数 . 从 公式 （ 1 ） 可以 看出 , 一个 相似 类 包含 的 浏览 过程 越长 、 越 多 , 则 意味着 用户 对 它 的 兴趣 越大 、 越 持久 . 显然 , 我们 有 
 　 　 　 　 　 　 　 　 Σ C 是 相似 类 F （ C ） = 1 . 　 　 　 　 　 　 　 　 　 　 （ 2 ） 
 2.3   阈 　 值 
 　 　 由于 视图 是 Web 中 用户 特别 感兴趣 的 地方 , 因此 , 阈值 一般 应 明显 地 高于 平均 兴趣 强度 值 . 
 2.4   视图 的 获取 
 　 　 给定 相似性 判别 规则 、 用户 兴趣 强度 函数 和 阈值 , 就 可以 从 用户 的 轨迹 中 自动 地 抽出 视图 了 . 考虑 到 用户 活动 的 复杂性 , 在 抽取 的 过程 中 允许 适当 的 人工干预 . 一般地说 , 抽出 的 视图 要 经过 用户 的 确认 （ 编辑 ） , 才能 真正 作为 视图 保存起来 . 另外 , 还 允许 用户 人工 调整 某些 相似 类 的 兴趣 强度 值 , 以 满足 某些 特殊 的 需要 , 比如说 , 通过 明确 表示 出 自己 对 某些 资源 的 强烈 兴趣 来 定义 视图 . 
 　 　 由于 用户 的 轨迹 在 不断 地 变化 , 因此 , 视图 的 获取 不会 是 一劳永逸 的 . 随着 时间 的 推移 , 可能 会 有 新 的 视图 产生 , 而 旧 的 视图 也 需要 调整 或 删除 , 以 反映 新 的 变化 . 相关 的 一个 问题 是 何时 进行 视图 的 获取 及 调整 . 由于 可能 需要 用户 的 参与 , 因此 还是 由 用户 在 感到 需要 和 方便 的 时候 进行 获取 或 调整 为 好 . 
 　 　 例 1 : 设 W = 〈 A , B , A , U , D , E , G , Y , T , U , I , U , J , G , X , G , Y , M , V , M , O , P , R , A , I , K , R , A , B 〉 是 某个 用户 访问 过 的 文档 序列 , 在 W 中有 10 个 浏览 过程 ： 〈 A , B , A , U 〉 , 〈 D , E 〉 , 〈 G , Y 〉 , 〈 T 〉 , 〈 U , I , U , J   〉 , 〈 G , X , G , Y 〉 , 〈 M , V , M , O , P , R 〉 , 〈 A , I 〉 , 〈 K , R 〉 , 〈 A , B 〉 . 按照 相似性 判别 规则 （ m = 2 ） , 相应 的 浏览 区域 被 划分 为 5 个 相似 类 （ C1 , C2 , C3 , C4 , C5 ） , 每个 类 对应 于 一个 Web 区域 , 如图 1 所示 . 
 
 图 1 
 　 　 其中 C1 包含 4 个 浏览 过程 ： 〈 A , B , A , U 〉 , 〈 U , I , U , J   〉 , 〈 A , I 〉 , 〈 A , B 〉 , 其 长度 为 12 ； C2 只有 1 个 浏览 过程 ： 〈 D , E 〉 , 其 长度 为 2 ； C3 也 只有 1 个 浏览 过程 ： 〈 T 〉 , 其 长度 为 1 ； C4 含有 两个 浏览 过程 ： 〈 G , Y 〉 , 〈 G , X , G , Y 〉 , 其 长度 为 6 ； C5 包含 两个 浏览 过程 ： 〈 M , V , M , O , P , R 〉 , 〈 K , R 〉 , 其 长度 为 8 . W 的 长度 为 29 . 
 　 　 根据 公式 （ 1 ） , 用户 对 这 5 个 相似 类 的 兴趣 强度 分别 为 : 
 　 　 　 　 　 　 　 　 F ( C1 ) = ( 12 / 29 + 4 / 10 ) / 2 = 0.510 , 
 　 　 　 　 　 　 　 　 F ( C2 ) = ( 2 / 29 + 1 / 10 ) / 2 = 0.084 , 
 　 　 　 　 　 　 　 　 F ( C3 ) = ( 1 / 29 + 1 / 10 ) / 2 = 0.067 , 
 　 　 　 　 　 　 　 　 F ( C4 ) = ( 6 / 29 + 2 / 10 ) / 2 = 0.203 , 
 　 　 　 　 　 　 　 　 F ( C5 ) = ( 8 / 29 + 2 / 10 ) / 2 = 0.238 . 
 3   小   结 
 　 　 在 本文 中 , 我们 把 Web 用户 的 视图 定义 为 相似 的 浏览 区域 的 集合 . 与 其他 关于 Web 视图 的 工作 相比 ［ 3 , 4 ］ , 本文 的 工作 有 两个 突出 的 特点 ： 一个 是 Web 用户 视图 不 依赖于 特定 的 查询 系统 , 不是 建立 在 查询 操作 的 基础 上 , 而是 以 浏览 操作 为 基础 . 由于 浏览 是 Web 用户 获取信息 的 基本 手段 , 因此 我们 的 定义 具有 一般性 , 体现 了 Web 特色 . 另 一个 是 Web 用户 视图 不 需要 预先 定义 , 而是 从 用户 的 活动 轨迹 中 自动 提取 . 因此 , 它 不会 对 用户 提出 额外 的 要求 , 适合 所有 的 Web 用户 . 
 　 　 Web 用户 视图 有 许多 的 应用 , 例如 , 它 可以 用于 缓冲 管理 、 浏览 引导 , 还 可以 用来 提高 查询 的 质量 等 . 
 　 　 本文 研究 得到 国家自然科学基金 资助 . 作者 阳小华 , 1963 年生 , 博士生 , 副教授 , 主要 研究 领域 为 WWW 智能 查询 , 数据库 技术 . 周龙骧 , 1938 年生 , 研究员 , 博士生 导师 , 主要 研究 领域 为 数据库 实现 技术 , WWW 智能 查询 , 数据 采掘 . 
 　 　 本文 通讯联系 人 : 阳小华 , 北京 100080 , 中国科学院 数学 研究所 计算机科学 研究室 
 　 　 作者 单位 ： [ 阳小华 （ 中南 工学院 计算机系 　 衡阳 　 421001 ） 周龙骧 ] （ 中国科学院 数学 研究所 计算机科学 研究室 　 北京 　 100080 ） 
 参考文献 
 　 1 　 周龙骧 . 数据库 管理系统 实现 技术 . 北京 : 中国地质大学 出版社 , 1989.17 ～ 18 
 ( Zhou   Long - xiang .   The   Techniques   for   Implementing   Database   Manager   System .   Beijing :   University   of   Geology   of   China   Press ,   1989 .   17 ～ 18 ) 
 　 2 　 阳小华 , 周龙骧 . World   Wide   Web 索引 与 查询 技术 . 计算机科学 , 1997 , 24 ( 6 ) : 26 ～ 34 
 ( Yang   Xiao - hua ,   Zhou   Long - xiang .   The   index   and   query   techniques   of   world   wide   web .   Computer   Science ,   1997 , 24 ( 6 ) : 26 ～ 34 ) 
 　 3 　 Dan   Suciu .   Query   decomposition   and   view   maintenance   for   query   language   for   unstructured   Data .   In :   Vijayarman   T   M ,   Buchmann   A ,   Mohan   C   eds .   Proceedings   of   the   22nd   VLDB   Conference .   San   Francisco :   Morgan   Kaufmann   Publishers ,   Inc . ,   1996 .   227 ～ 238 
 　 4 　 David   Konopnicki ,   Oded   Shmueli .   W3QS :   a   query   system   for   the   world - wide   web .   In :   Dayal   Umeshwar ,   Gray   Peter   M   D ,   Nishio   Shojiro   eds .   Proceedings   of   the   21st   VLDB   Conference .   San   Francisco :   Morgan   Kaufmann   Publishers ,   Inc . ,   1995 .   54 ～ 655 
 1998 - 05 - 29 收到 原稿   
 1998 - 08 - 14 收到 修改稿 
