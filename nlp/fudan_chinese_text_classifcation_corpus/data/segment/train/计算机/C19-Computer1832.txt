微型机 与 应用 
 MICROCOMPUTER   &   ITS   APPLICATIONS 
 2000   Vol.19   No.2   P.22 - 25 
 
 
 
 
 企业 系统 备份 的 发展 及 可行 的 备份 方案 
 李莉莉 
 摘   要 ：   分析 了 系统 备份 在 国内 企业 的 发展 状况 ， 给出 了 几种 可行 的 实用 备份 方案 ， 提出 了 国内 企业 将来 可能 采用 的 备份 方式 。 
 关键词 ：   系统 备份   基于 网络 的 备份   远程 备份 
 1   系统 备份 在 国内 企业 的 发展 
 　 　 国内 各 企业 从 电子化 开始 所 走过 的 备份 之 路 ， 一般 可以 分成 3 个 明显 的 阶段 ： 
 　 　 第一阶段 ， 计算机 应用 刚刚开始 ， 运作 方法 是 “ 单机 处理 、 软盘 交流 ” ， 目的 是 减少 实际 工作 的 劳动强度 ， 提高 工作效率 。 那时 计算机 的 工作量 和 业务 处理 的 数据 都 不大 ， 所以 备份 是 随机 的 ， 由 工作人员 自己 处理 ， 其 行为 还 无 规范 可言 。 
 　 　 在 随机 备份 中 ， 操作系统 和 各类 应用软件 多用 软盘 备份 ， 工作 数据 主要 以热 备份 为主 ， 在 主机 中 另开 分区 进行 备份 ， 好 一些 的 传到 另 一个 系统 中 去 备份 ， 下班 前 再 用 软盘 备份 。 虽然 发生 过 一些 问题 ， 但 对 整个 实际 工作 影响 不 大 。 总之 ， 在 这个 阶段 ， 备份 没有 得到 足够 的 重视 ， 完全 是 一种 个人行为 。 
 　 　 第二阶段 ， 企业 的 计算机系统 应用 已经 发展 到 以 局域网 为 支撑 的 模式 ， 企业 内 各 部门 的 工作人员 通过 网络 互相 传递数据 ， 网络 已经 成为 整个 业务 活动 中 非常 需要 的 一个 部分 ， 工作人员 的 工作 与 计算机系统 及 网络 关系密切 。 
 　 　 在 这个 阶段 ， 各 部门 的 工作人员 和 信息中心 的 工作人员 都 很 重视 数据备份 ， 定期 安全 备份 被 提到 了 议事日程 ， 备份 成 了 每日 数据 加工 必做 的 作业 。 于是 ， 在 总结 备份 工作 经验教训 的 基础 上 ， 一些 单位 提出 了 面向 灾害 和 灾难 的 备份 设想 ， 即 在 计算机系统 和 网络 运行 及 企业 运作 发生意外 的 前期 狠抓 安全 防范 ， 在 意外事故 发生 中 重视 各种 应急 措施 ， 同时 ， 正视 和 承认 可能 有 冲破 安全 防范 的 意外事故 发生 ， 甚至 有 导致 灾难 的 事故 发生 。 因此 ， 对 业务 数据 仅 有 一般 的 热 备份 还 不够 ， 必须 有 针对 灾难 的 冷 备份 。 一般 是 在 信息中心 把 全部 运行 数据 下载 ， 存入 安全 的 存储 媒介 中 ， 装入 专用 保险箱 ， 由 专人 负责 存放 到 比 办公楼 更 安全 的 地方 ， 为 预防 灾难 再 做 最后 一次 备份 ， 再 准备 一道 防线 。 
 　 　 第三阶段 ， 计算机网络 在 企业 得到 进一步 的 发展 ， Intranet 、 Internet 已经 成为 企业 内 的 基础设施 。 各 部门 的 工作人员 都 用 上 了 基于 网络 的 专用 设计 软件 ， 他们 在 这类 软件 的 支持 下 ， 在 网上 互相 协作  有时 一个 项目组 的 工作人员 还 可能 远隔 千里  ， 网络 已 成为 一刻 也 不能 离开 的 基础设施 。 
 　 　 在 这个 阶段 ， 企业 的 安全 运作 和 生产 活动 又 给 备份 提出 了 更 高 的 要求 ， 除了 要 防范 偶然 的 因素 外 ， 还要 防范 一些 人为 的 因素  如 网络 黑客  。 一些 企业 不约而同 地 产生 了 建立 专职 备份 中心 的 方案 。 这个 专职 备份 中心 既要 有 对 数据 的 完整 冷 备份 ， 又 要 有 系统 和 网络 的 热 备份 ， 双管齐下 。 在 灾难 发生 之后 ， 既 要 保证 现有 的 工作 数据 不 丢失 、 不错 乱 ， 又 能 马上 替代 现有 主机 系统 和 网络 的 正常 运行 和 生产 ， 确保 整个 业务 工作 不 中断 ， 为 灾后 迅速 恢复 原有 的 实际 工作 赢得 时间 和 人力 。 
 　 　 建立 专职 备份 中心 ， 首先 要 选择 合适 的 地点 ， 地处 安全 ， 而且 数据通信 条件 要 好 ， 除了 已有 的 线路 外 ， 还应 准备 1 条 可靠 的 大容量 线路 。 对 一些 有 野外 实际 工作 的 单位 ， 如果 条件 许可 ， 还 可以 配备 大容量 无线通信 做 备份 。 备份 中心 的 规模 要 满足 备份 需求 ， 还要 经济 合理 ， 有利于 发展 。 
 　 　 就 目前 国内 各 企业 的 进展 而言 ， 多数 企业 正在  或 已经  进入 第二阶段 ， 有 少数 企业 正在 进入 第三阶段 ， 只有 极少数 企业 还 处在 第一阶段 。 
 2   几种 可行 的 实用 备份 方案 
 　 　 备份 的 方法 有 很多 ， 这里 根据 国内 企业 的 现状 ， 介绍 几个 实用 的 基于 网络 的 备份 方案 。 
 2 ． 1   “ 独立 办公室 ” 内 的 系统 备份 方案 
 　 　 所谓 “ 独立 办公室 ” ， 是 指 拥有 几台 电脑 的 完全 独立 的 办公室  一些 家庭 及 “ 微型 公司 ” 的 内部结构 也 与 此 相同  。 这种 单位 的 网络结构 ， 也许 只是 几台 PC 的 点对点 的 简单 连接 ， 但 也 有 可能 是 单一 服务器 的 主从 式 结构 。 对于 这种 单位 ， 其 备份 工作 有 其 独特 的 方式 。 
 　 　 1 ． 备份 公用 资料夹 
 　 　 在 点对点 的 网络结构 中 ， 每台 电脑 由 网卡 、 网线 与 集线器 彼此 连接 ， 大家 可以 分享 彼此 的 数据 、 打印机 、 传真机 等 ， 使 每 一个 人 都 可以 使用 小型 办公室 里 的 所有 资源 。 因此 在 确定 备份 策略 时 ， 除了 遵守 一般 的 规则 ， 备份 个人 必要 的 档案资料 外 ， 对 一些 放在 公用 资料夹 中 的 资料 ， 也 要 做 必要 的 备份 。 
 　 　 因为 公用 资料夹 其实 就是 某台 PC 里 的 资料夹 ， 由该 电脑 的 使用者 将 资料夹 设定 为 共享 ， 让 所有 网上 的 连线 使用者 存取 ， 因此 备份 的 实际 做法 就 很 简单 ； 只要 记得 备份 公用 资料夹 即可 。 每个 人 自己 电脑 上 的 工作 目录 也 设定 为 只读 的 共享 方式 ， 使 负责 备份 的 电脑 可以 通过 网络 读取 资料 进行 备份 工作 ， 不必 在 每台 电脑 上 都 安装 备份 的 软硬件 。 至于 是否 用 Zip 、 MO 、 CD － R 或 其它 硬盘 做 备份 设备 ， 可视 需 备份 的 数据量 、 时间 与 周期 来 决定 。 
 　 　 2 ． 主从 式 结构 的 网络 备份 
 　 　 虽然 只是 小型 办公室 ， 但是 安装 1 台 Windows   NT 服务器 ， 可以 让 您 的 网络 运作 更 有效率 、 功能 更 完整 。 而 如果 把 Windows   NT   Server 与 Windows   98 搭配 起来 ， 还 可以 给 您 带来 意想不到 的 方便 。 
 　 　 用 Windows   NT   Server   4 ． 0 的 “ 网域 使用者 管理员 ” 建立 使用者 后 ， 选择 它 的 “ 设定 档 ” ， 可以 让 您 设定 使用者 的 文档 路径 以及 主目录 ， 例如 \ \ Server \ Users \ logname ， 设好 后 ， 在 Windows   98 控制面板 中 的 “ 使用者 ” 启动 多人 设定 ， 输入您 登录 Windows   NT 的 名称 ， 并 将 “ 个人化 项目 ” 全部 选取 ， 如此一来 就 会 在 C  \ WINDOWS \ Profiles 里 建立 同样 名称 的 子目录 ， 并 将 相关 项目 都 复制到 子目录 里 。 
 　 　 接下来 当 把 Windows   98 重新启动 、 登录 服务器时 ， 会 将 C  \ WINDOWS \ Profiles \ logname 上载 到 \ \ Server \ Users \ logname ， 此后 ， 服务器端 的 资料夹 就 与 您 的 个人电脑 同步 ， 在 登录 、 退出 时 都 会 比较 资料 ， 使 您 的 资料 可以 在 服务器端 备份 。 您 可以 直接 利用 NT   Server 内建 的 备份 工具 ， 将 这些 资料 再 做 1 份 备份 ， 储存 在 磁带机 里 ， 因此 对于 “ 独立 办公室 ” 或 小型企业 而言 ， 有 1 套 简单 的 Client ／ Server 网络结构 ， 会 使得 资料 的 储存 与 备份 更 安全 、 更 方便 。 
 　 　 3 ． 备份 Windows 应用 系统 
 　 　 重装 Windows 和 必要 的 应用 系统 ， 可能 要用 上 2 ～ 3 小时 ， 如果 10 分钟 就 可以 完成 这项 工作 ， 那么 3 台 、 5 台 电脑 的 恢复 工作 就 可以 节省 一整天 的 时间 ， 这 对 时间 紧张 的 现代人 来说 ， 是 一份 不小 的 收益 。 
 　 　 PowerQuest 的 DriveImage 与 Norton 的 Ghost ， 都 能 帮助 将 整个 硬盘 备份 成 1 个 映像 ， 在 系统 被 严重破坏 时 ， 就 可以 很快 把 资料 完全 复原 。 因此 可以 将 刚 安装 好 应用程序 的 系统 做 1 个 备份 的 映像 ， 以后 安装 系统 只要 10 分钟 就 可以 完成 ， 再 配合 每周 、 每月 备份 的 个人资料 ， 您 就 可以 拥有 一个 安全 、 快速 的 作业 环境 。 DriveImage 的 操作界面 友善 、 使用方便 。 Ghost 有批 操作 模式 ， 功能强大 ， 二者 各有 其长 。 
 2 ． 2   跨平台 备份 
 　 　 在 当前 稍具 规模 的 企业 网络 中 ， 因为 工作 性质 复杂 ， 不少 单位 都 采用 了 多个 工作 平台 。 对 这类 系统 的 备份 ， 必须 考虑 其 特别 的 需求 。 
 　 　 过去 ， 一般 备份 软件 或是 应用 系统 内含 的 备份 功能 ， 仅能 针对 单机 或是 同一 工作 平台 主机 进行 备份 ， 并且 采用 Pull 的 方式 备份 ， 对于 跨平台 的 备份 则 无能为力 。 为 解决 此 问题 ， 并 提高 备份 效率 ， 可 采用 Push 技术 的 新 概念 。 利用 各种 平台 的 客户端 代理 程序 与 备份 主机 的 协同 作业 ， 将 所 需 的 资料 Push 到 备份 主机 上 ， 以 节省 作业 时间 ， 提高 备份 效率 ， 并 达到 集中式 管理 的 目标 。 
 　 　 所谓 的 Push 技术 就是 当 网络管理员 对 备份 主机 下达 备份 指令 时 ， 备份 主机 即 对 所有 客户端 代理 程序 下达 资料 打包 的 命令 ， 客户端 收到 命令 后 ， 自动 针对 备份 主机 所 要求 的 备份 数据 进行 过滤 ， 并 将 过滤 后 的 数据 及 目录 封包 好 。 当 所有 客户端 同时 进行 过滤 封包 作业 并 将 资料 准备 完毕 时 ， 便 自动 将 资料 Push 到 备份 主机 。 所有 过滤 及 封包 的 操作 都 在 客户端 进行 ， 通过 分散式 运算 及 批次 传送 的 方式 ， 可 大幅 减少 主机 及 网络 负载 。 
 　 　 在 这方面 ， 目前 已有 一些 可 供选择 的 备份 软件 ， 如 CA 公司 的 跨平台 数据备份 管理软件 ARCserve 。 通过 使用 ARCserve   for   Windows   NT 和 其 数据库 代理 选件 Database   Agent ， 还 可以 在 不用 关闭 数据库 的 情况 下 联机 备份 。 在 ARCserve 软件 中 还有 1 种 灾难 恢复 选件 Disaster   Recovery   for   ARCserve   for   Windows   NT 。 Disaster   Recovery 灾难 恢复 选件 可以 让 您 生成 4 张 （ 或 5 张 ） 自 引导 软盘 ， 一旦 系统 完全 崩溃 ， 您 可以 利用 这 几张 自 引导 软盘 加上 最新 做 的 1 次 完全 备份 的 磁带 ， 就 可以 在 很 短 的 时间 内 将 整个 系统 全部 恢复 出来 。 
 2 ． 3   SQL 数据库 的 备份 
 　 　 不少 单位 都 使用 基于 SQL 的 数据库 做 自身 的 中心 数据库 ， 而 SQL 数据库 又 与 传统 数据库 有 很大 区别 。 因此 ， 这 就 需要 专为 SQL 数据库 所 设计 的 备份 代理 程序 。 在 这方面 可 供选择 的 产品 非常 有限 ， 在 市面上 能 见到 有 Microsoft   SQL   Server   7 ． 0 所 提供 的 备份 选件 。 
 　 　 数据库 备份 代理 程序 的 工作 方式 ， 是 利用 代理 程序 做 备份 软件 与 SQL   Server 间 的 中介 程序 ， 当 备份 软件 下达 备份 指令 之后 ， 代理 程序 即 对 SQL   Server 做 系统 备份 要求 ， 指示 SQL   Server 准备 备份 的 数据 。 事实上 就是 对 SQL   Server 下达 Dump 指令 ， 其它 备份 参数 也 通过 代理 程序 的 设定 ， 一并 送至 SQL   Server ， 系统管理员 完全 不需 下达 任何 SQL   Command 或 Store   Procedure 。 
 　 　 SQL   Server 接到 指令 后 ， 从 SQL 数据库 提取 系统 要求 的 数据 ， 并 将 其 封包 送 至 代理 程序 ， 再 由 代理 程序 将 资料 送 至 备份 软件 写入 磁带 中 。 而 备份 代理 程序 也 利用 备份 软件 的 图形化 界面 ， 提供 以下 功能 ， 让 系统管理 人员 的 备份 操作 更 容易 。 
 　 　 1 ． 远端 管理 
 　 　 如果 服务器 位于 远端 ， 只要 在 需 备份 的 SQL 服务器 中 安装 代理 程序 ， 备份 软件 即可 通过 中央 控制台 统一 监控 、 管理 、 备份 及 恢复 所有 的 SQL 服务器 ， 完成 所 需 工作 。 
 　 　 2 ． 仅 备份 及 恢复 必要 的 表格 
 　 　 数据库 备份 代理 程序 提供 的 备份 软件 在 备份 资料 的 设定 上 ， 可 针对 任何 一个 单一 数据表 进行 备份 ， 并且 完全 通过 图形界面 选择 ， 不需 下达 指令 。 恢复 时 ， 代理 程序 亦可 针对 单一 数据表 进行 恢复 ， 不必 因为 一张 数据表 被 毁 即 需 恢复 整个 数据库 。 
 　 　 3 ． Data   Striping 功能 
 　 　 通过 代理 程序 多 进程 的 处理 能力 ， 能 将 数台 SQL 服务器 及 不同 配置 读入 其 数据表 ， 以 Data   Striping 的 方式 写入 同一 卷 磁带 中 。   
 　 　 4 ． 同时 备份 多个 数据库 至 多个 磁带 
 　 　 数据库 备份 代理 程序 不仅 可 将 不同 来源 的 SQL 数据库 资料 写入 同一 卷 磁带 ， 也 可 将 不同 来源 的 数据 同时 写入 多卷 磁带 中 。 这 对于 使用 磁带 柜来 统一 管理 备份 资料 的 单位 来说 ， 系统管理 人员 可 将 不同 部门 、 不同 来源 的 不同 数据表 ， 写入 各 部门 所属 的 磁带 中 ， 这样 可 方便 地 将 各 部门 资料 分门别类 地 存放 ， 节省 日后 恢复 时 所 需 耗费 的 时间 。 
 　 　 5 ． 统一安排 ， 备份 作业 同时 启动 
 　 　 通过 备份 软件 的 计划 功能 ， 可 为 整个 企业 包括 SQL   Server 建立 一个 完善 的 备份 计划 及 策略 ， 并 可 借助 备份 时 的 呼叫 功能 ， 让 所有 的 SQL 服务器 备份 都 能 在 同一时间 进行 。 不必 再 辛苦 地 利用 Dump 到 硬盘 再 备份 的 方式 来 进行 备份 作业 ， 这样 可 减少 管理 上 的 负担 。 
 　 　 6 ． 恢复 时 自动 建立 所 需 的 数据库 配置 及 交易 记录 装置 
 　 　 当 SQL   Server 被 毁 重建 时 ， 最 让 系统管理 人员 头痛 的 ， 就是 将 被 毁 前 SQL   Server 的 配置 一一 手动 复原 。 如果 操作 有 错 ， 在 资料 恢复 时即 会 造成 错误 。 如果 通过 代理 程序 的 协助 ， 备份 软件 在 恢复 SQL 数据库 时 ， 就 会 自动 建立 所 需 的 数据库 配置 及 交易 记录 装置 ， 这 就 使得 过去 头痛 的 事 完全 让 机器 代理 了 。 
 　 　 7 ． 恢复 时 可 选择 不同 的 服务器 及 不同 的 数据库 名称 
 　 　 要 将 已 备份 的 资料 恢复 到 SQL   Server 中 ， 一般来说 服务器 名称 及 数据库 名称 都 需 与 原来 备份 时 相同 ， 但 数据库 备份 代理 程序 可 将 资料 恢复 到 不同 服务器 及 数据库 ， 即使 名称 完全 不同 亦可 恢复 。 
 　 　 8 ． 在线 即时 恢复 
 　 　 通过 备份 代理 程序 ， 可 在 SQL   Server 启动 时 将 资料 在线 上 即时 恢复 入 数据库 中 ， 完全 不 影响 SQL   Server 的 正常 运作 ， SQL   Server 服务 亦 不 需 停止 。 
 2 ． 4   分级 式 存储管理 
 　 　 现在 很多 单位 的 资料 中 都 含有 大量 的 多媒体信息 ， 因此 其 容量 极大 ， 而且 多数 资料 又 需 保持 在线 状态 。 这些 与日俱增 的 电子 资料 ， 不断 地 侵蚀 着 昂贵 的 硬盘空间 ， 但 又 不能 移走 这些 资料 ， 因为 它们 可能 随时 都 要 用到 。 较 好 的 办法 是 由 MIS 人员 或是 客户 每日 筛选 出 不 常用 的 资料 ， 备份 到 磁带 或 其它 较 便宜 的 介质 上 。 但 这项 工作 不论是 由 MIS 人员 或是 用户 来 做 ， 都 会 造成 巨大 的 工作 负担 ， 影响 正常 工作 的 进行 。 
 　 　 基于 管理 及 成本 的 考虑 ， HSM  Hierarchical   Storage   Management ， 分级 式 存储管理  系统 是 一个 合适 的 在线 备份 解决方案 。 它 利用 硬盘 、 MO 、 碟 带 进行 三级 备份 。 所谓 分级 式 存储管理 系统 ， 就是 一套 自动化 的 网络 存储管理 设备 ， 能 自动 判断 硬盘 中 资料 的 使用 频率 ， 自动 将 不 常用 的 资料 移至 速度 较慢 的 MO ， 而 最 不 常用 的 资料 则 移到 磁带 中 ， 这些 都 由 系统管理员 自行 设定 。 在线 的 资料 经过 一段时间 的 搬移 后 ， 即可 达到 最佳化 。 
 　 　 一般来说 ， 资料 被 搬移 至 另 一个 存储介质 后 ， HSM 会 在 原 存储介质 上 留下 1 个 “ 存根 ” ， 对于 客户端 的 使用者 来说 ， 当 他们 通过 网络 浏览 磁盘 目录 时 ， 这些 存根 看起来 就 和 被 移走 的 原始 资料 一样 。 当 客户端 针对 这个 存根 进行 存取 时 ， 分级 式 管理系统 会 将 原始 档案 存回 硬盘 中 ， 只是 对于 要 搬移 并 执行 存储 在 MO 或 磁带 中 的 档案 ， 在 存取速度 上要 比 硬盘 慢些 。 
 　 　 整个 档案管理 及 存储 搬移 工作 ， 都 由 分级 式 存储管理 系统 负责 ， 不需 手动 操作 ， 完全 自动化 。 分级 式 存储管理 系统 的 目的 ， 在于 节省 整体 系统 存储 装置 的 成本 ， 利用 成本 较 低 的 存储介质 来 存储 不 常用 的 资料 ， 将 最 不 常用 的 资料 存储 在 最 便宜 的 介质 上 。 这样 整个 存储设备 的 平均 成本 将 大幅 降低 ， 而 把 有限 的 预算 花 在 购买 足够 的 硬盘 上 ， 以 存储 最 重要 的 资料 。 
 　 　 分级 式 存储管理 系统 的 另 一个 长处 ， 是 能 利用 自动化 的 资料 移转 功能 ， 简化 系统管理 人员 的 维护 工作 。 通过 系统 自动 判别 资料 的 使用 状况 ， 并 移至 其它 存储介质 ， 系统管理 人员 就 不 需要 以 手动 方式 自行 判断 及 移动 资料 ， 将 这些 日常 的 机械性 工作 交给 电脑自动 执行 ， 即可 节省 系统管理 人员 的 大量 时间 ， 又 可 大量 节省 重点 资料 的 备份 时间 。 这种 备份 的 时间 越短 ， 其因 数据 变动 而 产生 的 副作用 就 越 小 。 
 3   远程 备份 
 　 　 随着 基于 网络 的 专用 设计 软件 的 广泛 使用 ， 以及 实际 工作 中 对 网上 协作 依赖性 的 日益 增强 ， 以后 必然 会 产生 对 “ 远程 备份 ” 的 需求 。 而 “ 远程 备份 ” 的 方式 ， 目前 已有 3 种 ： 硬盘 异地 镜像 、 数据库 异地 镜像 及 交易 异地 镜像 。 
 　 　 硬盘 异地 镜像 ： 通过 保持 分布 在 不同 地方 的 2 个 或 多个 硬盘 内容 的 一致 来 实现 数据备份 。 镜像 的 对象 是 硬盘 的 处理 单位 ， 如 数据 块 、 扇区 等 。 镜像 方式 有 同步 及 异步 方式 。 同步 方式 的 速度 较 低 ， 但 数据 一致性 好 ； 异步 方式 的 速度 较 快 ， 但 数据 一致性 较差 。 对于 异地 备份 来说 ， 由于 通信 带宽 的 限制 及 对 处理速度 的 考虑 ， 一般 采用 异步 方式 。 
 　 　 数据库 异地 镜像 ： 通过 保持 分布 在 不同 地方 的 2 个 或 多个 数据库系统 内容 的 一致性 ， 来 实现 数据 镜像 。 镜像 的 对象 是 数据库 的 处理 单位 ， 如 事务 日志  逻辑 日志  。 镜像 方式 也 有 同步 与 异步 2 种 ， 在 实时 应用 系统 中 ， 一般 采用 异步 方式 。 
 　 　 这 2 种 方案 均 存在 着 一些 待 解决 的 问题 ， 如 网络 传输 延时 大 ， 通信 带宽 有 限制 ， 处理 效率 不 理想 等 。 为了 解决 上述 问题 ， 有人 提出 了 对 “ 交易 ” 进行 镜像 的 “ 交易 异地 镜像 ” 备份 方案 。   
 　 　 所谓 “ 交易 ” ， 是 指 在 实际 工作 中 ， 1 次  通过 网络  协作 应答 的 过程 ， 或 1 次 存盘 动作 。 如 工作人员 A 向 另 一 专业 的 工作人员 B 提出 ： 需要 1 个 专业 数据 ， B 即 向 A 提供 了 所 需 的 数据 。 该 过程 就是 一个 “ 交易 ” ； 若 1 个 工作人员 画 了 几笔 图后 ， 发了 1 个 把 该 图 存盘 的 指令 ， 这 也 是 一个 “ 交易 ” 。 
 　 　 为了 说明 交易 异地 镜像 的 基本原理 ， 假设 ： 2 个 系统 的 初始 数据 状态 一致 ， 若 双方 按 顺序 执行 一系列 相同 的 数据 操作 ， 则 双方 的 最终 数据 状态 仍 保持一致 。 在 “ 基于 网络 的 设计 系统 ” 的 灾难 备份 系统 中 ， 只要 保证 备份 系统 和 生产 系统 按 顺序 执行 相同 的 数据 操作 ， 就 可 保证 2 个 系统 之间 数据 的 一致性 及 完整性 。 
 　 　 交易 异地 镜像 的 基本 思想 是 ： 以 交易 为 单位 ， 将 交易 数据备份 到 备份 系统 中 ， 通过 备份 系统 中 的 应用 系统 执行 这些 交易 ， 从而 对 数据库 进行 相同 的 操作 ， 最终 实现 数据 的 一致性 及 完整性 。 
 　 　 　 交易 异地 镜像 的 实现 中 ， 主要 要 解决 2 个 问题 ： 1 ． 将 交易 备份 到 备份 系统 ， 并 通过 应用程序 的 运行 ， 实现 对 数据库 相同 的 操作 ， 保证数据 的 一致性 ； 2 ． 控制 丢失 “ 交易 ” 对系统 功能 的 影响 ， 恢复 丢失 的 “ 数据 余量 ” 。 
 　 　 从 理论 上 说 ， 这些 远程 备份 方式 都 能够 实现 ， 也 确有 个别  非 企业  单位 通过 复杂 的 配置 实现 了 远程 备份 。 但 目前 市场 上 还 没有 可 供选择 的 现成 产品 ， 这些 备份 方式 的 实用化 ， 还有 一个 待 发展 的 过程 ， 这是 一个 更为 广阔 的 天地 。 
 李莉莉 （ 河北 任丘市 华北石油 研究院 开发 试验机 室  062552 ） 
 收稿 日期 ： 1999 － 09 － 09 
