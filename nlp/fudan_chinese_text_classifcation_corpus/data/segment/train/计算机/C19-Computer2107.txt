计算机 工程 
 COMPUTER   ENGINEERING 
 1999 年   第 25 卷   第 12 期   vol.25   No.12   1999 
 
 
 
 大型 网络信息中心 ( NIC ) 管理 的 关键技术 与 实现 
 朱 　 爽 　 李 　 星 　 吴建平 
 　 　 随着 互连 网络 的 迅猛发展 ， Internet 资源管理 分配 问题 ， 包括 IP地址 分配 、 域名 问题 等 成为 全球 关注 的 热点 。 对 网络资源 实行 有效 的 、 合理 的 管理 成为 大型 网络 管理系统 中 非常 重要 的 组成部分 。 
 　 　 我国 现有 4 个 全国性 的 互连 计算机网络 :   CHINANET 、   CHINAGBN 、 CERNET 、 CSTNET ， 如何 做好 中国 的 Internet 资源分配 注册 管理 以及 信息资源管理 ， 将 是 保证 我国 互连 网络 正常 运行 、 良好 发展 以及 优质服务 的 基础 。 对于 这些 大型 国家级 网络 来说 ,   需要 建立 一套 规范化 、 标准化 的 NIC 管理系统 来 进行 互连 网络资源 的 注册 、 分配 和 管理 。 
 　 　 作为 采用 TCP / IP 网络体系结构 的 国家级 教育 和 科研 网络 CERNET ， 1994 年底 设立 面向全国 教育 科研单位 的 Internet 资源 注册 管理 部门 CERNIC ， 负责 全网 的 IP地址 分配 和 域名 注册 ， 提供 网络资源 信息 服务 等 。 
 　 　 在 " 九五 " 国家 重点 科技攻关 计划 项目 " 大型 网络 管理系统 " 的 资助 下 ， CERNIC 研究 开发 了 一个 面向 大型 TCP / IP 网络 的 、 基于 Web 的 NIC 管理系统 ， 实现 了 服务 的 资源 注册 管理 、 资源 目录 管理 、 DNS 配置管理 、 安全 管理 和 服务 性能 管理 。 
 1   网络信息中心 ( NIC ) 及其 服务 
 　 　 网络信息中心 ( NIC ) 是 指为 一定 范围 内 的 网络 用户 提供 Internet 资源 注册 服务 ， 资源 目录 数据库 服务 和 相关 的 信息 服务 的 管理 组织 。 Internet 网络资源 ， 主要 包括 ： 网络地址 、 网络 域名 及 域名 服务器 、 联系人 数据库 、 自治 系统 号 、 路由 数据库 等 。 Internet 资源 全球 唯一 ， 在 资源管理 注册 时应 附有 必要 的 资源 用户 信息 。 另外 ， 可以 通过 目录 数据库 服务 在 网上 检索   。 大型 网络信息中心 负责 为 大型 网络 范围 内 的 用户 提供 服务 和 管理 。 
 　 　 网络信息中心 ( NIC ) 服务 包括 ： 注册 服务 、 目录 数据库 服务 、 信息 服务 等 。 其中 大型 网络 的 Internet 网络资源 注册 服务 是 大型 NIC 提供 最 基本 也 是 最 重要 的 服务 。 主要 包括 ： 
 　 　 ( 1 )   IP 网络地址 分配 管理 [ 1 ] ： 获取 、 分配 及 管理 IP 网络地址 ； 
 　 　 ( 2 )   所 管辖 的 高层 域名 注册 管理 [ 2 ] ： 定义 、 注册 及 管理 高层 网络 域名 ； 
 　 　 ( 3 )   域名 系统配置 管理 ： 管理 配置 DNS 域名 系统 及其 数据库 。 
 　 　 网络 信息 数据库 是 注册 服务 的 基础 和 核心 ， 注册 服务 将 分配 的 网络地址 记录 、 注册 的 网络 域名 记录 存储 到 管理 数据库 ； 提供 在线 的 网络资源 检索 等 信息 服务 。 Internet 资源 是 分级管理 的 。 
 2   NIC 管理系统 结构 及 功能 
 　 　 NIC 管理系统 包括 资源 注册 管理 、 目录 数据库 管理 、 DNS 配置管理 、 用户 管理 、 安全 管理 、 服务 性能 管理 等 子系统 模块 。 总体 结构 如图 1 所示 。 
 
 
 
 
 
 
 
 
 图 1   NIC 管理系统 结构 用户 
 　 　 管理员 通过 标准 的 Web 浏览器 通过 HTTP 超文本 传输 协议 [ 3 ] 和 SSL 安全 加密协议 [ 4 ] 与 Web 服务器 通信 ,   访问 NIC 管理系统 ， 从而 管理 NIC 全部 服务 。 系统 在 每个 管理 页面 上 为 管理员 提供 资源 ( 地址 空间 、 最高 域名 结构 ) 信息 查询 和 设置 工具 、 资源 注册 分配 工具 、 服务 相关 的 历史数据 图文并茂 的 分析 统计 等 。 每个 管理 对象 的 页面 内 包含 相关 管理工具 和 档案 查询 。 系统 各 相关 服务 之间 通过 SMTP 内部 邮件 机制 传递 控制 信息 ， 通过 网络 信息 数据库 交换 数据 。 
 　 　 服务 性能 管理 ： 采用 先进 的 、 实用 的 网络 技术 ， 对 服务 系统 的 主机 运行 状态 和 服务 情况 进行 实时 监测 。 系统 通过 ICMP 、 TCP 、 HTTP 、 DNS 协议 获取 服务 子网 、 服务 主机 、 服务 系统 等 的 运行 状态 和 服务 有效性 ， 所有 显示 服务 失效 的 记录 将 存储 到 管理 核查 日志 ， 并 根据 不同 的 运行 状态 ， 向 管理员 发送 相应 级别 的 邮件 报告 ， 这样 便于 管理员 准确 了解 服务 系统 的 运行状况 ， 及时 排除故障 ， 并 为 服务 系统 的 优化 配置 提供 参考 。 
 　 　 ( 管理员 ) 管理 ： NIC 管理系统 管理 维护 一个 CA ( Certification   Authority - 权威认证 机构 ) ,   签发 和 维护 用户 ( 管理员 ) 证书 ， 进行 用户 分组 管理 即将 管理员 按 所 管理 的 服务类型 分组 ， 从而 灵活 地 定义 管理员 的 职责 和 权限 。 
 　 　 安全 管理 ： 系统安全 管理 着重 服务 子网 级 、 主机 级 和 应用 级 的 安全 。 通过 设置 防火墙 控制 对 NIC 子网 的 访问 ； 通过 建立 主机 级 防火墙 和 入侵 检测 维护 主机 安全 ； 对于 本 系统 更为重要 的 是 ， 系统 提供 访问控制 、 用户 认证 、 数据传输 安全 保密 机制 ， 以 保证 NIC 管理系统 本身 的 安全 。 
 　 　 管理 核查 日志 ： NIC 管理系统 建立 所有 服务 管理 的 运行 报告 ， 即 记录 服务 每 一个 管理 对象 、 管理 动作 、 动作 执行者 、 执行 时间 、 执行者 所在 机器 。 这为 管理员 统计分析 、 检查 服务 的 运行状况 以及 追踪 异常 事件 提供 了 可靠 的 依据 。 
 3   系统 关键技术 
 　 　 NIC 管理系统 的 基于 Web 的 管理 、 数据 一致性 维护 、 系统安全 机制 、 系统 监测 和 自动 恢复 机制 等 保证 了 NIC 服务 的 高可靠性 、 可用性 、 可伸缩性 和 安全性 。 
 3.1   数据 一致性 的 维护 
 　 　 注册 服务 、 网络 信息 数据库 是 网络信息中心 DNS 配置管理 的 核心 和 基础 。 网络信息中心 注册 服务 将 所 分配 的 网络地址 记录 ， 注册 的 网络 域名 记录 以及 相关 的 网络 用户 信息 等 存储 在 目录 数据库 。 为了 保持 DNS 数据库 与 网络 信息 数据库 的 一致性 ， 注册 服务 并 不 直接 操作 DNS 数据库 ， 而是 只 操作 网络 信息 数据库 。 然后 通过 SMTP 内部 邮件 机制 触发 DNS 配置管理 模块 ， 由 配置管理 模块 读取 网络 信息 数据库 中 的 注册 记录 ， 再 生成 DNS 配置 命令 ， 直至 最终 完成 DNS 数据库 更新 。 
 　 　 一般 在 NIC 系统 实际 运行 过程 中 ， 可能 会 引起 数据 不一致性 的 因素 ， 主要 是 管理员 不经 NIC 管理系统 而 直接 修改 DNS 数据库 配置 。 系统 定期检查 资源 的 DNS 配置 信息 ( 域名 和 地址 反向 域 ) ， 并 与 网络 信息 数据库 记录 进行 比较 ， 如果 发现 不 一致 之处 便 通知 管理员 ， 由 管理员 决定 更新 网络 信息 数据库 还是 修改 DNS 配置 。 
 3.2   系统安全 机制 
 　 　 NIC 服务 管理 安全性 有 3 个 层次 ： 子网 级 、 主机 级 、 应用 级 。 见图 2 。 
 
 图 2   NIC 管理系统 安全 机制 
 3.2 . 1   服务 子网 安全 
 　 　 一个 安全 NIC 网络 需要 有 防火墙 将 其 与 外部 Internet 隔离开 以 保护 NIC 内部 网络 的 资源 ， 比如 防止 未经许可 的 外部 访问 NIC 服务 系统 。 防火墙 及其 规则 设置 ， 实时 监测 网络 可能 遭 攻击 和 入侵 的 各种 特征 是 子网 安全 的 重要 部分 。 
 3.2 . 2   服务 主机 安全 
 　 　 主机 安全 是 确保安全 有效 地 提供 服务 必不可少 的 方面 。 需要 及时 了解 系统 最新 的 安全 修正 补丁 ， 跟踪 安全 讨论组 ， 保证系统 的 完整性 。 建立 主机 级 防火墙 和 入侵 检测 系统 ， 检测 主机 的 各种 入侵 企图 ， 并 积极 作出反应   。 
 3.2 . 3   NIC 管理系统 安全 
 　 　 基于 Web 的 NIC 管理系统 的 安全性 对于 整个 NIC 的 安全 至关重要 。 因为 管理 服务器 存储 着 核心 数据库 和 服务 管理工具 ， 只有 经过 授权 才能 予以 访问 相应 权限 内 的 服务 和 数据 ， 而 在 缺省 的 不加 任何 控制 的 情况 下 ， 基于 Web 应用 的 系统 独立性 和 地理 无关 性 使得 任何人 、 从 任何 地方 ， 都 可以 对 服务 系统 进行 几乎 无所不能 的 操作 。 本 系统 利用 了 多种 安全 技术 来 保证 NIC 管理系统 本身 的 安全 ， 例如 基于 主机 的 访问控制 、 用户 分组 分级 访问控制 、 基于 证书 的 用户 认证 以及 SSL 协议 数据 保密 传输 等 。 
 3.3   系统 监测 和 自动 恢复 机制 
 　 　 通过 服务 性能 管理 ， 可以 保障 NIC 服务 的 可靠性 和 可用性 及 有效性 ， 包括 对 NIC 服务 和 主机 运行状况 以及 有效性 进行 实时 监测 和 常见故障 自动 有效 恢复 。 系统 采用 定时 轮询 ( pool ) 方式 ， 获取 服务 运行 状态 ， 检验 服务 的 可用性 和 有效性 。 即 系统 以 一定 的 周期 利用 ICMP   ping 子网 连通性 检查 、 RPC   ping 主机 连接 检测 、 Hostwatch 获取 主机 的 系统 状态 、 Portmon 服务 端口 监测 等 工具 采集 服务 子网 、 主机 、 服务 的 状态参数 ； 分析 采集 来 的 数据 参数 ， 生成 性能 图表 ， 以 不同 的 颜色 来 表示 不同 的 状态 ， 用 彩色 线条 的 长度 表示 系统 利用 百分比 。 
 　 　 系统 同时 采用 先进 的 MD5 消息 摘要 算法 定时 验证 系统 数据 和 服务 关键 数据 的 完整性 ， 确保 数据 ( 如 WWW 页面 的 HTML 文字 和 图形 ) 不 被 非法 修改 。 这 在 很大 程度 上 保证 了 服务 的 可靠性 。   在 发现异常 情况 之 时 ， 故障 恢复 会 立刻 被 监测 系统 激活 ， 进行 相应 的 恢复 工作 。 这种 24x7 的 服务 运行 监测 机制 ， 可以 快速 解决 出现 的 故障 。 服务 监测 所 发现 的 异常 以及 故障 恢复 的 每 一次 动作 都 将 存储 到 管理 核查 日志 ， 并 以 电子邮件 的 方式 通知 系统管理员 。 
 4   CERNIC 的 管理 情况 分析 与 讨论 
 　 　 NIC 管理系统 在 CERNIC 安全 运行 已 两年 。 图 3 为 CERNIC 管理 情况 的 统计 示例 。 包括 ： 域名 注册 统计 ( 月 累计 ， 行政区划 统计 ) ； 地址 分配 统计 ( 月 累计 ， 地区 统计 ) ； DNS 服务 曲线图 等 。 资源 注册 整体 呈 增长 趋势 ， 其中 ， 域名 注册 列 前三位 的 省份 ： 北京 、 江苏 、 广东 ， 地址 分配 列 前三位 的 地区 ： 华北地区 ( 北京 ) 、 华 东南地区 ( 南京 ) 、 华南地区 ( 广州 ) 。 DNS 服务 曲线图 是 以 dns . edu . cn 服务器 为例 ， 记录 了 服务器 的 每秒 服务 请求 数量 以及 重新启动 的 情况 。 总之 ， 从 这些 图表 不难 推断 CERNET 网络 发展 的 各个 阶段 和 趋势 。 
 　 　 
 　 　 
 
 图 3   CERNIC 管理 情况 统计 示例 
 5   结束语 
 　 　 本文 阐述 了 一个 基于 TCP / IP 大型 网络信息中心 NIC 管理系统 及其 关键技术 。 作为 " 九五 " 国家 重点 科技攻关 计划 专题 的 " 先进 网络管理 与 运行 技术 " S - Domain 的 子系统 ， 现已 通过 国家验收 鉴定 。 该 系统 下 一步 的 工作 ， 基于 产品 需求 ， 进一步 加强 和 完善 系统 功能 ， 兼容 未来 新 的 Internet 标准 ， 如 资源 注册 的 IPv6 地址 分配 [ 5 ] 和 iDNS 域名 注册 [ 6 ] ， 安全 传输 标准 TLS [ 7 ] [ 8 ] 等 ， 使 之 成为 全国性 大型 网络 先进 高效 的 网络 资源管理 的 技术 支撑 。 
 作者 单位 ： 中国 教育 和 科研 计算机网络 中心 ， 清华大学 网络 中心 ， 北京 100084 
 参考文献 
 1   Hubbard   K , Kosters   M , Conrad   D   et   al . Internet   Registry   IP   Allocation   Guidelines . RFC   2050 ,   1996 - 11 
 2   中国 互联网络 域名 注册 暂行 管理 办法 . http : / /   www . cnnic . net . cn / policy . html 
 3   Fielding   R , Gettys   J , Mogul   J . Hypertext   Transfer   Protocol   - -   HTTP   / 1.1 . RFC   2068 , 1997 - 01 
 4   Freier   A   O , Karlton   P , Kocher   P   C . The   SSL   Protocol   Version   3.0 .   Internet - draft < draft - freier - ssl - version3 - 02 . txt > , 1996 - 11 - 18 
 5   Deering   S , Hinden   B . IP   Version   
 6   Addressing   Architecture . RFC   2373 , 1998 - 07 - 206   Durst   M . Internationalization   of   Domain   Names . Internet - draft <   draft - duerst - dns - i18n - 01 . txt > , 1997 - 07 
 7   Dierks   T , Allen   C . The   TLS   Protocol   v1.0 . Internet - draft < draft - ietf -   tls - protocol - 06 . txt > , 1998 - 11 - 12 
 8   Rescorla   E . HTTP   over   TLS . Internet - draft < draft - ietf - tls - https - 01 .   txt > , 1998 - 03 
