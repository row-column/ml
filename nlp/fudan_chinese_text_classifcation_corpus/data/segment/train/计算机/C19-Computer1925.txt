微型机 与 应用 
 MICROCOMPUTER   &   ITS   APPLICATIONS 
 2000 　 Vol.19 　 No.6 　 P.25 - 28 
 
 
 
 
 从 体系结构 论 Windows   NT 和 
 Novell   IntranetWare 的 安全性 策略 
 彭红 
 摘要 ： 从 体系结构 的 角度 分析 了 Windows   NT 和 IntranetWare 在 网络 客户机 、 网络 文件 服务器 和 网络 企业级 应用服务器 方面 的 安全 结构 和 特性 。 
 关键词 ： 体系结构 　 安全性 　 Windows   NT   IntranetWare 　 网络平台 
 　 　 随着 Internet 技术 的 迅速 发展 ， 基于 Internet 和 Intranet 的 计算环境 也 在 不断 增多 ， 选择 一个 网络平台 时有 许多 较 迫切 的 要求 需要 考虑 。 因此 ， 当今 网络操作系统 平台 不仅 应 提供 文件 和 打印 资源共享 ， 而且 要 有 同 后台 应用服务器 相互作用 的 前台 应用 主机 以及 具有 可伸缩性 、 可靠性 、 高性能 和 安全性 的 工作站 服务 。 尽管 安全性 仅 是 在 选择 Intranet 平台 时 需要 考虑 的 因素 之一 ， 但 它 却 日益 重要 。 
 　 　 Windows   NT4.0 和 Novell   IntranetWare   4.11 是 目前 较 流行 和 使用 较 广泛 的 网络 操作 平台 。 本文 从 体系结构 入手 ， 分析 Windows   NT 和 IntranetWare 操作系统 的 安全性 体系 和 特性 。 
 1     体系结构 
 1.1   Windows   NT 
 　 　 Windows   NT 是 一个 多用途 的 服务器 操作系统 ， 它 除 文件 和 打印机 共享 服务 外 ， 还 提供 应用 和 通信 服务 。 Windows   NT 服务器 和 Windows   NT 工作站 具有 相同 的 安全 体系结构 和 一组 类似 的 安全 特征 ， 如图 1 所示 。 因此 ， 基于 Windows   NT 工作站 和 服务器 的 网络 是 一个 对 等 网络 ， 一般来说 ， 服务器 上 有效 的 功能 对 客户机 同样 有效 。 
 
 图 1     Windows   NT 网络体系结构 
 　 　 Windows   NT 提供 全 分布式 安全 模式 ， 在 此 模式 下 ， 每个 用户 或 进程 必须 验证 ， 且 每个 对象 能够 使用 访问控制 进行 自身 保护 。 Windows   NT 核心 确保 仅 允许 通过 验证 的 用户 能 使用 自己 所 具有 的 权力 和 特权 来 访问 对象 ， 应用程序 使用 Windows   NT 提供 的 安全 服务 完成 认证 访问 。 用户 无论是 获得 本地 资源 还是 远程 资源 的 访问 ， 验证 和 存取控制 均 为 无缝 的 和 透明 的 。 类似 地 ， 工作站 和 服务器端 均 能 审核 系统 事件 。 
 1.2   IntranetWare 
 　 　 如图 2 所示 ， IntranetWare 体系结构 是 一个 明确 的 客户机 ／ 服务器 模式 ， 即 客户端 向 服务器 发出请求 ， 服务器 完成 这些 请求 后 对 客户机 返回 结果 。 IntranetWare 的 设计 思想 是 客户机 和 服务器 均 作为 物理 上 独立 的 机器 。 执行 这种 体系结构 时 ， 应用程序 典型 地 运行 在 客户机 上 ， 而 服务器 允许 这些 应用 安全 地 共享 文件 和 打印机 资源 ， 服务器 上 并 不 运行 应用程序 。 因此 ， 该 结构 非常适合 需要 多个 客户 共享 文件 和 打印机 资源 的 模式 。 
 
 图 2     IntranetWare 体系结构 
 　 　 由于 IntranetWare 仅 在 服务器 而 不 在 客户 工作站 上 运行 ， 因此 ， 服务器 提供 的 功能 通常 与 客户机 上 的 不 一样 ， 客户端 所 具有 的 安全性 功能 将 依赖于 所 选择 的 客户 工作站 。 
 2     网络 客户 工作站 体系结构 
 　 　 典型 的 客户 平台 上 运行 的 应用 需要 共享 网络 中 由 服务器 控制 的 数据 和 资源 ， 这些 应用 需要 相互 保护 并 能 保护 自身 的 数据 ， 因此 ， 安全 核心 必须 与 这些 应用 隔开 以 预防 错误 或 蓄意 的 程序 破坏 操作系统 或 攻击 安全 机制 。 此外 ， 客户机 有 责任 通过 接收 用户 的 口令 来 识别 和 认证 用户 ， 并 使用 该 口令 登录 到 工作站 和 服务器 上 ， 当 客户机 存储 口令 并 将 其 传送 到 服务器时 ， 应 保护 它 免遭 破坏 。 
 　 　 为了 检测 或 恢复 非法 入侵 ， 管理员 应 能够 审核 客户机 上 包括 诸如 启动 和 停止 进程 等 事件 的 所有 活动 的 能力 ， 因为 网络攻击 很少 仅 攻击 1 个 网络 组件 。 为了 把 与 攻击 有关 的 事件 拼合 在 一起 ， 管理员 应 能 复验 所有 组件 的 审核 跟踪 ， 这 就 要求 每个 网络 组件 的 审核 跟踪 具有 一致性 。 事实上 ， 客户 工作站 需要 多用途 操作系统 的 所有 功能 和 整套 安全 机制 。 
 2.1   Windows   NT 
 　 　 实际上 ， Windows   NT 工作站 使用 与 Windows   NT 服务器 一样 的 平台 和 软件 。 因此 ， 它 提供 一组 相似 的 安全 性能 ， 即 用户 在 获得 对 系统资源 的 任何 访问 之前 需 被 识别 和 认证 ， 其后 访问 资源 则 通过 访问控制 表来 控制 。 此 控制 表 指出 了 那些 用户 可以 访问 那些 对象 以及 是 什么 类型 的 访问 ， 每次 访问 是 可 审核 的 ， 且 审核 记录 总 包含 唯一 的 用户 标识 。 
 　 　 Windows   NT 工作站 允许 非 授权 应用 运行 而 不 破坏 操作系统 或 其它 应用软件 。 这 是因为 程序 被 限制 在 仅 能 访问 自己 的 地址 空间 ， 且 不能 获得 对 操作系统 或 其它 应用 的 数据 或 代码 进行 处理 的 权限 。 
 　 　 操作系统 位于 应用程序 不能 进入 的 单独 执行 域 中 ， 当 应用 需要 调用 操作系统 服务 时 ， 它 使用 明确 的 程序设计 界面 发出请求 ， 这些 界面 允许 操作系统 控制 用户 对系统 服务 的 接收 访问 。 Windows   NT 工作站 也 需要 与 服务器进行 安全 通信 ， 安全 通道 功能 由 分布式 安全 组件 目标 模型 和 安全 Socket 层 提供 。 
 2.2   IntranetWare 
 　 　 IntranetWare 是 一个 不 包括 客户 软件 的 服务器 操作系统 ， Novell 公司 也 没 提供 客户 操作系统 。 因此 ， IntranetWare 网络 集成商 有 责任 选择 或 开发 一个 合适 的 安全 客户 软件 。 Novell 公司 已 公布 了 选择 设计 一个 安全 客户 的 报告 。 
 设计 自己 的 安全 工作站 软件 与 IntranetWare 网络通信 是 一件 较 困难 的 事 ， 因为 按 以前 的 规定 ， 工作站 应 能 完成 用户 验证 、 保护 口令 、 提供 有关 客户资源 的 访问控制 、 保护 核心 安全 、 预防 应用程序 相互 干扰 和 完成 审核 。 在 Novell 发布 的 白皮书 中 ， 介绍 了 几种 可 选择 的 体系结构 ， 一些 是 基于 降低 工作站 自身 的 安全性 功能 ， 而 另 一些则 是 把 专用 硬件 添加 到 工作站 中 ， 还有 一种 方法 建议 通过 修改 Intel 体系结构 来 使 工作站 安全可靠 。 
 3     文件 服务器 体系结构 
 　 　 文件 服务器 允许 客户 工作站 上 应用程序 共享 服务器 控制 的 文件 和 打印机 资源 ， 为此 ， 它 要求 能 用 完全 访问 控制系统 保护 这些 资源 ， 同时 也 要求 是 一个 能 检测 和 跟踪 企图 入侵 系统 的 审核 设备 。 由于 验证 用户 的 口令 通常 存储 在 服务器 上 ， 因此 ， 当 服务器 上 存储 的 口令 通过 通信线路 传送 时 ， 也 应能 提供 保护 以防 网络攻击 。 
 　 　 以下 简述 一个 文件 服务器 的 关键性 安全 要求 ， 并 从 二个 平台 的 角度 对 每种 要求 进行 描述 。 
 3.1   认     证 
 3.1 . 1   Windows   NT 
 　 　 Windows   NT 使用 加密技术 保护 服务器 上 传送 和 存储 的 口令 ， 它 总是 要求 认证 用户 。 NT 服务器 能 配置 成 限制 网络连接 ， 也 能 设置 为 限制 用户 使用 专门 的 帐号 、 在 指定 时间 里 登录 ； NT 引入 安全 注意 顺序 ( 对 登录 处理 的 信任 路径 ) 的 概念 ， 从而 确保 了 特洛伊木马 形式 的 黑客 渗透 。 基于 NT 的 系统 能 被 锁住 ， 使得 用户 不能 从 控制台 关机 。 为 取消 启动 时 选择 操作系统 ， 引导 顺序 也 能 设置 为 总是 从 硬盘 启动 。 
 3.1 . 2   IntranetWare 
 　 　 IntranetWare 口令 也 使用 加密技术 进行 保护 ， 但 它 不 要求 用户 在 服务器 控制 台上 识别 或 认证 ， 因此 ， 访问 IntranetWare 服务器 控制台 的 任何 用户 均 可发 命令 ， 这 意味着 IntranetWare 服务器 需要 的 物理 保护 比 Windows   NT 那样 的 认证 服务器 要 多得多 ， 因为 控制台 命令 可用 来 重新配置 服务器 、 禁止 网络连接 或 完全 关闭 网络 。 IntranetWare 也 能 设置 成 限制 用户 使用 专门 的 帐号 和 工作站 在 特定 的 时间 里 登录 。 
 3.2   存取控制 
 3.2 . 1   Windows   NT 
 　 　 Windows   NT 通过 对象 服务器 控制 提供 存取控制 ， 用户 能 指定 其它 用户 或 用户组 读 、 写 或 修改 系统 对象 。 在 Windows   NT 中 ， 每个 受 保护 的 对象 由 相同 类型 的 结构 来 描述 ， 对象 的 存取 使用 相同 的 存取控制 机制 。 这种 方法 具有 高可靠性 ， 且 存取 所有 受 保护 的 对象 均 使用 独立 的 存取控制 机制 来 实现 。 
 3.2 . 2   IntranetWare 
 　 　 IntranetWare 也 通过 对象 服务器 控制 来 提供 存取控制 ， 用户 能 指定 其它 用户 或 用户组 读 、 写 或 修改 对象 。 IntranetWare 存在 二种 主要 类型 的 对象 — — NetWare 或 Novell 目录 服务 对象 和 文件系统 对象 ， 每种 对象 使用 不同 的 存取控制 机制 来 控制 存取 ， 这种 方法 结构 上 不 太 可靠 。 
 3.3   审     核 
 3.3 . 1   Windows   NT 
 　 　 Windows   NT 的 审核 记录 在 客户机 和 服务器 中是 一样 的 ， 并 能 在 任何 客户端 或 服务器 上 使用 基于 GUI 的 事件 查看器 在 本地 浏览 审核 记录 ， 存取 审核 记录 由 DAC 存取控制 表 机制 控制 。 
 3.3 . 2   IntranetWare 
 　 　 尽管 Windows   NT 和 IntranetWare 都 需要 物理 保护 ， 但 由于 服务器 控制台 完全 依赖 物理 保护 而 使 IntranetWare 环境 显得 尤为重要 。 因为 能够 获得 控制台 物理 存取 的 任何 人均 可 发出 任何 控制台 命令 而 无需 认证 ， 所以 ， 审核 系统 不能 记录 发出 命令 的 每个 用户 。 
 　 　 IntranetWare 中 处理 IntranetWare 服务器 的 审核 跟踪 没有 基于 服务器 的 工具 ， 因此 审核 器 使用 基于 客户机 的 工具 （ 例如 AUDITCON ） 来 代替 ， 以便 查看 审核 跟踪 和 显示 所 选择 的 审核 事件 。 AUDITCON 工具 是 基于 命令行 的 ， 要求 具有 专门 的 命令 知识 ， 所以 管理员 的 培训 要 比 基于 GUI 工具 的 培训 要求 高得 多 。 IntranetWare 中 存取 审核 记录 由 任意 的 存取控制 表 机制 来 控制 。 
 3.4   安全性 分区 
 3.4 . 1   Windows   NT 
 　 　 Windows   NT 把 操作系统 放在 核心 方式 执行 域 中 ， 用户 在 用户 方式 下 运行 ， 用户 软件 不能 获得 对 核心 方式 的 存取 。 
 3.4 . 2   IntranetWare 
 　 　 由于 IntranetWare 中 用户 应用程序 在 客户机 而 非 服务器 上 运行 ， 因此 服务器 操作系统 实际上 已 被 划分 成 二个 完全 独立 的 系统 。 IntranetWare 文件 服务 体系结构 用 牺牲 灵活性 来 最大 限度 地 增加 保护措施 ， 因为 多个 用户 （ 例如 Web 服务器 ） 共享 的 后台 应用程序 不能 安全 地 在 服务器 上 运行 。 
 4     企业级 应用服务器 体系结构 
 　 　 应用服务器 体系结构 包括 下列 特性 ： 
 　 　 ( 1 ) 通过 执行 和 实施 安全性 分区 来 保护 操作系统 和 应用程序 。 
 　 　 ( 2 ) 使用 分级 控制 ， 尽可能少 地 把 操作系统 特权 分配 给 用户 ， 以便 让 风险 降到 最低 。 
 　 　 ( 3 ) 应用 开发者 使用 开发工具 把 现有 操作系统 的 安全性 功能 加入 到 应用 中以 扩展 受托 边界 。 
 4.1   安全性 分区 
 　 　 许多 最 有效 的 电脑 黑客 渗透 是 把 可 执行 代码 插入 到 目标 系统 中 实现 的 ， 例如 特洛伊木马 、 病毒 或 蠕虫 ， 一旦 它们 在 服务器 上 运行 ， 攻击 代码 经常 能 获取 足够 多 的 特权 来 存取 口令 、 敏感数据 ， 甚至 降低 整个 系统 的 性能 。 因此 ， 服务器 操作系统 应 具有 通过 实施 安全 分区 来 保护 自身 及其 它 应用 以 免遭 错误 或 恶意程序 破坏 的 能力 。 
 4.1 . 1   Windows   NT 
 　 　 Windows   NT 体系结构 把 系统 划分 成 2 个 独立 的 地址 空间 — — 核心 空间 和 用户 空间 。 应用程序 在 用户 空间 运行 ， 不能 直接 访问 核心 空间 的 数据 或 代码 ， 所有 用户 请求 通过 定义明确 的 界面 汇集 到 操作系统 。 如果 由于 出错 而 使 应用 中断 ， 则 操作系统 不会 受到 影响 ， 程序 不能 破坏 操作系统 或 其它 应用程序 。 口令 和 其它 敏感数据 仅 在 受 保护 的 核心 空间 维护 。 
 4.1 . 2   IntranetWare 
 　 　 尽管 IntranetWare 在 作为 一个 文件 服务器时 提供 了 较 好 的 安全性 ( 因为 应用程序 仅 运行 在 客户 工作站 上 ) ， 但 作为 安全 的 企业 级服务器 是 不 可取 的 ， 这 并 不 因为 安全 机制 不 合适 ， 而是 传统 的 体系结构 没 考虑 到 主机 应用 。 
 　 　 IntranetWare 最大 的 问题 是 应用程序 与 操作系统 共享 相同 的 地址 空间 ， 而 事实上 应用程序 并不一定 打算 在 服务器 上 运行 ， 与 Windows   NT 不同 ， IntranetWare 上 的 主机 应用程序 可 作为 设备 驱动器 进行 查看 ， 因此 ， 本质 上 ， 它们 变成 了 操作系统 的 一部分 ， 其 明显 的 含义 是 应用程序 与 操作系统 具有 完全相同 的 权限 。 安全 分区 的 缺陷 意味着 恶意 的 程序 能 破坏 或 入侵 系统 处理 的 任何 安全 机制 ， 从而 损害 系统 试图 保护 的 数据 。 相同 原因 ， 应用程序 易受 其它 应用 的 攻击 ， 因为 所有 应用程序 共享 相同 的 地址 空间 。 基于 此 情况 ， 国际 计算机 安全 中心 在 对照 C2 级 安全性 要求 评估 IntranetWare   4.11 后 ， 发布 了 限制性 声明 ， 即 “ Netware   4.11 服务器 不 包含 和 不 支持 不 信任 的 软件 ” ， 因此 ， IntranetWare 仅 满足 服务器 上 不 运行 应用 时 的 C2 级 安全性 要求 。 
 4.2   特权 控制 
 　 　 安全 系统 的 一个 重要 设计 目标 是 要 为 给定 的 应用程序 提供 有限 的 操作系统 特权 ， 即 限制 特权 。 这个 概念 以 Unix 系统 中 的 root 特权 这样 的 反例 来 说明 ， 即 具有 root 特权 的 用户 或 程序 能 完成 特许 硬件 指令 、 修改 任何 地址 空间 、 访问 和 修改 任何 有效 文件 以及 在 系统 上 做 任何 事情 ， 但 程序 几乎 很少 需要 这么 多 的 权限 。 因此 ， 限制 应用 所带 特权 的 系统 在 执行 时 更 安全 且 不致于 滥用 和 出错 。 而 对于 在 系统 上 运行 且 无 受限 特权 的 应用程序 ， 为了 完成 它们 要求 的 活动 ， 经常 给予 多余 的 许可 ， 这样 的 环境 经常 导致 特权 滥用 。 
 4.2 . 1   Windows   NT 
 　 　 Windows   NT 通过 下列 机制 实现 特权 限制 ： 
 　 　 ( 1 ) 划分 核心 和 用户 域 ， 在 用户 域 有限 的 地址 空间 中 运行 应用程序 。 
 　 　 ( 2 ) 应用程序 能 在 特定 的 用户 帐号 下 运行 ， 在 此 情况 下 ， 仅仅 该 帐号 所 具有 的 权限 对 程序 有效 。 
 　 　 ( 3 ) 特权 允许 应用程序 使用 一个 特殊 用户 或组 的 特权 运行 ， 用户 或组 特权 能 由 系统管理员 控制 。 
 　 　 ( 4 ) 安全 模式 允许 应用程序 模仿 客户机 访问 服务器 上 的 资源 ， 这个 特性 确保 了 应用 只 具有 特殊 客户 的 特权 和 权力 。 
 　 　 这些 操作系统 特性 通过 应用程序 所 拥有 的 系统 特权 来 提供 分级 控制 ， 因此 ， 一个 应用程序 仅 需 获得 完成 自己 功能 所 需要 的 特权 ， 从而 避免 了 恶意程序 导致 的 破坏 。 
 4.2 . 2   IntranetWare 
 　 　 IntranetWare 没有 受限 特权 的 任何 概念 ， 因为 文件 服务器 体系结构 不 允许 划分 服务器 上 的 特权 ， 所有 处理 有 相同 的 特权 且 访问 相同 的 指令 ， 这 意味着 即使 最 简单 的 应用程序 也 有 全部 核心 特权 。 
 4.3   可扩充性 
 　 　 1 台 应用服务器 是 作为 诸如 Web 和 数据库 服务器 的 各种 企业级 应用 的 主机 ， 它 应该 提供 前面 所 描述 的 全部 操作系统 服务 和 安全性 功能 。 作为 企业 级服务器 还 应为 软件 开发者 把 服务器 功能 集成 到 应用 中 提供 相应 机制 ， 这 对 安全性 尤为重要 。 因为 应用程序 的 安全性 功能 越 多 ， 它们 结合 得 就 越 紧密 ， 从 这方面 来讲 ， 安全性 将 遍及 整个 系统 ， 而 不仅仅 在 底层 操作系统 上 。 当 应用程序 在 所有 地方 使用 评估 操作系统 机制 即 受限 安全性 机制 时 ， 系统 集成商 可 获得 较 高层次 的 保证 ， 而 开发者 把 已 存在 的 机制 结合 到 应用 程序代码 中 实际上 就 扩展 了 安全性 范围 。 此外 ， 当 应用程序 使用 操作系统 的 安全性 输出特性 时 ， 操作系统 中央 管理 能 确保 执行 一个 有效 的 安全性 策略 。 
 4.3 . 1   Windows   NT 
 　 　 当 在 Intranet 或 Internet 上 开发 应用程序 时 ， 重要 的 一点 是 操作系统 应 尽可能 多地 提供 程序 所 需要 的 安全性 功能 。 在 这方面 ， NT 操作系统 能 提供 已 评估 、 测试 和 已 证明 可 正常 工作 的 一组 统一 的 安全性 功能 。 
 　 　 Windows   NT 的 输出 服务 可 提供 扩展性 、 灵活性 和 统一性 ， 软件 开发者 能 调用 API 来 完成 用户 认证 、 对 目标 的 访问控制 检查和 与 其它 服务器进行 通信 的 安全性 认证 ， 把 此 安全性 功能 集成 到 应用程序 中 的 能力 使得 安全性 解决方案 更 健壮 、 更 透彻 ， 开发者 不 需要 产生 它们 自己 的 安全性 机制 。 
 　 　 Windows   NT 中 对 软件 开发者 有效 的 一些 安全 机制 包括 ： SSPI ( Security   Support   Provider   Interface ) 、 GINA ( Graphical   Identification   and   Authentication ) 、 认证 RPC 、 访问控制 和 密码 系统 服务 等 。 
 4.3 . 2   IntranetWare 
 　 　 IntranetWare 向 运行 应用程序 的 客户端 提供 服务 ， 因此 ， 安全性 服务 不 提供 给 服务器 上 的 应用程序 。 
 5     结束语 
 　 　 IntranetWare 对 文件 和 打印服务器 要求 提供 了 一个 明确 的 安全 解决方案 ， 但 在 企业级 网络 环境 中 ， 由于 文件 服务器 体系结构 没有 变而 受到限制 ； 同时 ， 由于 IntranetWare 要求 独立 的 安全 客户 工作站 、 服务器 上 无力 支持 后台 应用 的 安全性 主机 以及 整个 安全 模式 缺乏 统一性 而 使 其 对于 非常 注重 安全性 的 企业级 网络平台 很 不 适宜 。 
 　 　 Windows   NT 不仅 提供 了 安全 的 文件 和 打印服务 ， 还 提供 了 1 组对 Windows   NT 工作站 和 服务器 均 有效 的 统一 的 安全 特性 和 1 套 包括 把 密码 功能 与 应用程序 结合 起来 的 安全性 功能 ， 因此 ， 对 等 体系结构 的 灵活性 、 认证 、 审核 、 安全性 分区 和 管理 能力 ， 使得 Windows   NT 成为 安全性 网络 环境 的 极佳 解决方案 。 从 NCSC 完成 的 目前 通用 评估 结果 来看 ， Windows   NT 将 是 唯一 提供 了 全部 C2 级 安全性 的 网络系统 ， 这些 特性 使得 Windows   NT 成为 现代 企业级 网络 的 可选 平台 。 
 彭红 （ 武汉 中南财经大学 网络 中心 430064 ） 
 1999 - 12 - 29 
