微型 电脑 应用 
 MICROCOMPUTER   APPLICATIONS 
 2000 　 Vol.16 　 No.1 　 P.26 - 27 
 
 
 
 WebGIS 处理 模型 研究 
 薛小峰 　 汪晓程 
 摘 　 要 ： 本文 分析 了 GIS 数据管理 的 特点 和 目前 WebGIS 的 三种 主要 的 处理 模型 ， 采用 基于 Java 平台 的 多层 C / S 结构 技术 ， 给出 了 一种 WebGIS 优化 处理 模型 。 这 对于 开展 WebGIS 领域 的 研究 和 应用 有 较大 的 参考价值 。 
 关键词 ： WebGIS 　 Java 平台 　 多层 C / S 结构 　 处理 模型 
 Abstract ： This   paper   discusses   the   characteristics   of   GIS   data   management   and   puts   forward   3   main   processing   models   of   WebGIS   at   present .   It   also   proposes   an   optimized   processing   model   of   WebGIS   using   multi - layer   clie   nt / server   architecture   technology   base   on   Java   platform .   It   proves   valuable   in   r   esearch   and   development   of   WebGIS . 
 Keywords ： WebGIS 　 Java   platform 　 multi - layer   C / S   architect   ure 　 processing   model ▲ 
 一 、 引言 
 　 　 地理信息系统 ( Geographic   Information   System ) 是 利用 现代 计算机 图形学 和 数据库 技术 输入 、 存储 、 编辑 、 查询 、 决策 和 输出 空间图形 及其 属性数据 的 计算机系统 ［ 1 ］ 。 它 是 融合 地理学 、 几何学 、 计算机科学 及 各类 应用 模型 为 一体 的 高新技术 。 随着 Internet 技术 逐步 得到 普及 应用 ， 开展 基于 Web 的 GIS 研究 ， 实现 不同 地理位置 的 用户 数据 信息 统一 管理 和 资源共享 已经 成为 该 领域 研究 的 重要 方向 。 本文 通过 分析 GIS 数据管理 特点 和 目前 Web   GIS 的 主要 处理 模型 ， 结合 基于 Java 平台 的 C / S 多层 体系结构 ， 提出 一种 优化 的 处理 模型 。 
 二 、 WebGIS 技术 
 　 　 1 . GIS 数据 特性 
 　 　 ( 1 ) 地理信息 的 分布式 特性 。 从 地理信息 数据源 的 获取 、 需要 的 海量 存储空间 以及 使用 效率 等 几 方面 都 决定 了 地理信息 不 可能 集中 存储 ， 而 必须 采取 分布式 存储 。 
 　 　 ( 2 ) 地理信息 的 异构 特性 。 这里 异构 特性 包括 数据格式 和 处理 环境 两个 方面 的 异构 。 虽然 国际 上 几个 主要 的 标准化 组织 相继 颁布 了 GIS 标准 ， 如 ISO / TC211 的 地理信息 / 地球 信息科学 标准 、 欧洲 标准化 组织 CEN / TC287 的 G12000 计划 和 EGII 计划 等 ， 但是 目前 几大 GIS 公司 提供 的 主流产品 形成 了 事实上 的 标准 不 统一 。 因此 ， 实现 地理信息 的 标准化 还 需要 一个 过程 。 
 　 　 ( 3 ) 地理信息 数据量 大 、 类型 复杂 ［ 2 ］ 。 GIS 研究 与 地理 空间 分布 相关 的 信息 ， 这样 即使 记录 小 范围 的 地理信息 都 需要 海量 数据 。 另外 地理信息 不仅 包括 传统 的 矢量 数据 。 而且 包括 数字 正 射影 像 和 数字 高程 模型 等 类型 的 数据 。 
 　 　 2 . GIS 数据管理 机制 
 　 　 GIS 的 数据 分为 地理 空间数据 和 属性数据 两类 ， 具体 的 管理机制 可以 分为 三种 ： ① 由 关系 型 数据库 ( RDBMS ) 管理 属性数据 。 地理 空间数据 以 文件 的 形式 存储 ， 由 空间数据 管理 软件包 进行 空间 操作 。 地理 空间数据 文件 和 关系 型 数据库 之间 以 指针 或 关键字 建立联系 。 ② 对 关系 型 数据库 进行 完善 ， 使 其 统一 管理 属性数据 和 地理 空间数据 。 ③ 在 关系 型 数据库 中 引入 面向对象 技术 ， 建立 对象 关系 型 数据库 ( ORDB ) 或纯 对象 数据库 ( OODB ) ， 对象 与 底层 表示 分离 ， 空间 属性 与非 空间 属性 定位 平等 ， 实现 了 属性数据 和 空间数据 一体化 管理 ［ 3 ］ 。 
 　 　 上述 三种 机制 中 ， 第一种 把 属性数据 和 空间数据 分开 管理 ， 不能 保证数据 的 完整性 、 一致性 ， 不 适宜 进行 网上 分布式 处理 。 第二种 虽然 实现 了 统一 管理 ， 其 在 处理 地理 数据 生成 空间 拓扑 关系 、 进行 空间 分析 方面 存在 缺陷 。 第三种 既 实现 了 一体化 管理 ， 同时 以 面向对象 技术 处理 地理 空间数据 ， 提高 了 地理 空间数据 运算 效率 ， 是 WebGIS 的 理想 数据库 平台 。 
 　 　 3 . WebGIS 技术 要求 
 　 　 ( 1 ) 开放性 ： 开放性 要求 实现 在 国家 和 世界 范围 内 分布式 环境 下 的 地理 空间数据 和 地理 信息处理 资源 的 共享 。 
 　 　 ( 2 ) 互操作性 ： 互操作性 要求 实现 在 分布式 环境 下 的 GIS 软件 能够 克服 由于 数据 和 处理 环境 异构 而 带来 的 障碍 进行 相互 操作 。 
 　 　 ( 3 ) 基于 Internet : 在 Internet 环境 下 ， 用户 通过 浏览器 访问 Web   GIS 获取 地理信息 服务 。 
 　 　 ( 4 ) 实时性 ： 对 地理 空间数据 的 频繁 操作 ， 如 放大 、 缩小 、 漫游 等 ， 要 有 较 好 的 实时性 。 
 　 　 ( 5 ) 服务 综合性 ： Web   GIS 要求 实现 对 地理 空间数据 的 查看 、 空间 分析 、 统计 、 制作 专题地图 等 综合 服务 。 
 　 　 4 . 几种 主要 Web   GIS 处理 模型 
 　 　 ( 1 ) 基于 GIS 服务器 的 模型 ［ 4 ］ 。 这种 模型 是 由 客户端 浏览器 向 CGI 发出 服务 请求 ， CGI 接到 服务 请求 后 调用 GIS 服务器 的 和 地理 空间数据 进行 处理 ， 最后 将 处理结果 以 静态 HTML 页面 的 形式 发送到 客户端 。 这是 典型 的 瘦 客户 、 胖 服务器 模型 。 这种 处理 模型 虽然 简化 了 客户端 ， 但 把 所有 处理 集中 在 服务器端 ， 加大 了 服务器端 处理 的 数据量 和 网络 传输 负担 。 
 　 　 ( 2 ) 基于 客户端 的 模型 。 这种 模型 一般 采用 配套 的 服务器端 和 客户端 软件 ， 把 需要 的 地理 空间数据 从 服务器端 下载 到 客户端 ， 由 客户端 软件 进行 处理 。 这种 处理 模型 增强 了 客户端 处理 能力 ， 减少 了 服务器端 处理 的 数据量 和 网络 传输 负担 。 它 的 缺点 是 客户端 软件 功能 有限 ， 对于 地理 空间数据 标准 有 局限性 。 
 　 　 ( 3 ) 部分 基于 客户端 的 模型 。 这种 模型 采用 前端 插件 技术 ( Plug   in 、 ActiveX 、 Java   applets 等 ) 将 Web   GIS 服务器 上 的 部分 处理 功能 移植 到 客户端 。 通过 利用 客户端 的 处理 能力 ， 平衡 客户 和 服务器 两端 的 数据处理 量 ， 减轻 网络 传输 负担 ， 是 一种 较 好 的 模型 。 本文 以下 提出 的 优化 处理 模型 是 在 该 模型 的 基础 上 进行 改进 得到 的 。 
 三 、 WebGIS 一种 优化 处理 模型 
 　 　 1 . 使用 空间 元 数据 ( GeoMetadata ) 管理网络 中 的 地理信息 资源 
 　 　 元 数据 ( Metadata ) 是 关于 数据 的 数据 ， 是 关于 数据 和 资源 的 描述性 信息 。 空间 元 数据 ( GeoMetadata ) 是 对 和 地理 相关 的 数据 和 信息 资源 的 描述 信息 。 它 通过 对 地理 空间数据 的 内容 、 质量 、 条件 、 位置 和 其它 特征 进行 描述 和 说明 ， 帮助 人们 有效 地 定位 、 评价 、 比较 、 获取 和 使用 数据 。 
 　 　 空间 元 数据 的 层次性 。 ① 全局性 空间 元 数据 ： 登记 网上 所有 的 地理 空间数据 信息 ； ② 局域网 空间 元 数据 ： 登记 局域网 内 的 地理 空间数据 信息 ； ③ 本地 空间 元 数据 ： 登记 所在 的 GIS 服务器 上 的 地理 空间数据 信息 。 
 　 　 2 . 采用 基于 Java 平台 的 多层 C / S 结构 ［ 5 ］ 
 　 　 ( 1 ) 系统 构成 
 　 　 客户端 包括 Web 浏览器 和 Java   Applets 插件 。 服务器端 分为 三层 ， 即 ： 前端 代理服务器 、 GIS 应用服务器 、 数据库 服务器 。 详细 结构 如图 1 所示 。 
 
 图 1 　 系统 构成 
 　 　 ( 2 ) 处理 流程 
 　 　 1 ) 客户端 通过 Web 浏览器 访问 前端 代理服务器 ， 通过 HTTP 协议 从 前端 代理服务器 下载 Java   Applets 程序 。 Java   Applets 负责 处理 客户端 的 服务 请求 。 它 一方面 以 HTTP 协议 方式 和 前端 代理服务器 的 服务 定位 Servlet ( Service   Locator   Servlet ) 通信 获得 地理 空间数据 ， 另一方面 以 RMI ( Remote   Method   Invocation ) 方式 调用 应用服务器 提供 的 服务 。 Java   Applets 运行 在 浏览器 环境 下 具有 部分 GIS 功能 ， 使得 用户 大量 的 操作 ( 放大 、 缩小 、 漫游 、 查询 等 ) 可以 在 本地 实施 ， 呈现 给 用户 的 不 在 是 静态 图片 而是 矢量 图形 。 进行 空间 分析 、 制作 面向 领域 应用 的 专题地图 等 复杂 业务 通过 调用 RMI 由 远端 应用服务器 完成 。 这样 处理 一方面 保证 了 普通用户 大量 操作 的 实时性 ， 充分利用 了 客户端 的 处理 资源 ， 另一方面 简化 了 前端 插件 ， 便于 前端 软件 的 更新 和 管理 。 
 　 　 2 ) 前端 代理服务器 通常 位于 一个 局域网 内 。 它 保存 了 客户端 经常 访问 的 Java   Applets 程序 、 部分 地理 空间数据 和 空间 元 数据 ( 局域网 级 ) 。 在 代理服务器 上 保存 这些 数据 可以 减少 网络 数据 流量 和 下载 时间 。 服务 定位 Servlet ( Service   Locator   Servlet ) 负责 接收 客户端 发送 的 请求 ， 收到 请求 后 交给 数据管理 应用 ( Data   Management   Application ) 。 数据管理 应用 ( API 方式 ) 判断 本地 数据库 能否 满足 客户 需求 ， 如果 可以 本地 处理 ， 则 将 相关 数据 提交 给 客户端 ， 否则 返回 不能 处理 的 信息 。 服务 定位 Servlet 如果 收到 不能 处理 的 信息 就 提交 给 代理 Servlets ( Proxy   Servlets ) 进行 处理 。 代理 Servlets 一方面 提供 应用服务器 服务 清单 ( 由 应用服务器 各个 代理 Servlet 把 服务 “ 句柄 ” 自动 下载 到 代理服务器 ) ， 另一方面 提供 客户 和 应用服务器 之间 通信 的 桥梁 。 代理 Servlets 负责 和 应用服务器 通信 ， 发送 请求 ， 接收 处理结果 。 数据管理 应用 一方面 要 根据 客户 对 数据 的 访问 频率 动态 更新 本地 数据库 ， 对 数据库 进行 管理 ， 另一方面 提供 将 不同 标准 的 数据 转换 为 统一标准 服务 ， 克服 由于 异构 而 带来 的 前端 处理 障碍 。 通过 格式 转换机制 ， 用户 可以 访问 网上 任意 节点 地理信息 资源 ， 方便 了 处理 。 
 　 　 3 ) 应用服务器 是 核心 服务器 ， 综合 了 WebGIS 主要 数据处理 功能 。 它 是 WebGIS 设计者 基于 底层 数据库 平台 开发 的 若干 业务 逻辑 模块 。 它 以 JDBC 和 底层 数据库 平台 通信 。 应用服务器 和 数据库 服务器之间 又 是 客户 和 服务器 的 关系 。 它 把 客户 的 服务 请求 转换 为 一系列 指令 交给 数据库 服务器进行 处理 ， 获取 处理结果 。 业务 分为 两个 层次 ： 基本 业务 和 复杂 业务 。 基本 业务 包括 ： 地理 空间数据 的 获取 、 管理 、 地理 元 空间数据 的 管理 。 复杂 业务 包括 ： 三维 地形 分析 、 决策分析 、 专题地图 制作 等 。 此外 WebGIS 管理者 在 此 发布 更新 的 Java   Applets ， 并 通过 代理服务器 传输 到 客户端 。 
 　 　 4 ) 数据库 服务器 提供 底层 平台 支撑 。 它 包括 地理信息 数据库 和 空间 元 数据库 。 地理信息 数据库 储存 、 管理 各种类型 地理 空间信息 ， 提供 针对 地理 空间数据 的 基本操作 。 空间 元 数据库 储存 、 管理 全局性 的 空间 元 数据 。 
 四 、 结束语 
 　 　 本文 探讨 了 利用 基于 Java 平台 的 多层 C / S 结构 技术 ， 来 提高 WebGIS 处理 效率 的 方法 并 给出 了 一种 WebGIS 优化 处理 模型 。 这 对于 开展 WebGIS 领域 的 研究 和 应用 必将 提供 重要 的 参考 。 ■ 
 作者 单位 ： 薛小峰 ( 空军 工程 大学 工程学院 航空工程 管理系   西安   710038 ) 
 参考文献 ： 
 ［ 1 ］ 边馥苓 等 ， 地理信息系统 的 原理 和 应用 　 测绘 出版社 
 ［ 2 ］ 罗英伟 　 WebGIS 的 构件 设计 　 中国 图象 图形学 报 　 1999.4 ( 增刊 ) 
 ［ 3 ］ 扬群 等 　 地理信息 数据仓库 的 技术 研究 　 中国 图象 图形学 报 　 1999.8 
 ［ 4 ］ 任 建武 　 Internet   GIS 应用 一例 ， 微电脑 世界 　 1999.1 . 4 
 ［ 5 ］ 慎 　 键 　 基于 Java 平台 的 多层 应用 软件体系结构 　 计算机 世界报 　 1999.9 . 13 
 收稿 日期 ： 1999 － 10 － 11 
