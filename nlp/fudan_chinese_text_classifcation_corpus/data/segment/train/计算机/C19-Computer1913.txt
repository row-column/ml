微型机 与 应用 
 WEIXINGJI   YU   YINGYONG 
 2000 　 Vol.19 　 No.5 　 P.50 - 51 
 
 
 
 
 应用 AutoCAD 实现 整体 涡轮 加工过程 仿真 
 王刚  赵万生 
 摘   要 ： 利用 AutoCAD14 提供 的 3 维 实体 运算 功能 实现 整体 涡轮 加工过程 的 动态 仿真 方法 。 
 关键词 ： 动态 仿真   AutoCAD   整体 涡轮 
 　 　 随着 现代 科学技术 的 发展 ， 机械零件 的 复杂程度 越来越 高 。 因此 ， 在 零件 实际 加工 之前 的 仿真 加工 就 显得 格外 重要 。 传统 的 仿真 方式 都 是 由 用户 自己 针对 特定 的 零件 在 用户 自己 的 应用 平台 上 进行 开发 ， 其 编程 效率 和 仿真 效果 都 直接 受到 用户 水平 的 限制 ， 而且 开发周期 和 开发 难度 都 很大 。 为此 ， 作者 在 本文 中将 讨论 如何 引入 AutoCAD   R14 作为 开发 平台 ， 编制 复杂 零件 加工过程 的 计算机 仿真 软件 。 
 1   仿真 加工 原理 
 　 　 计算机 仿真 加工 需要 解决 二个 问题 。 一个 是 模仿 机床 加工 工件 时 ， 在 毛坯 上 切除 材料 余量 ， 形成 工件 成品 的 过程 ； 另 一个 是 要 检测 加工过程 中 ， 刀具 是否 和 机床 发生 干涉 ， 刀具 的 运动 切削 轨迹 是否 连续 、 合理 。 如果 将 工件 的 实际 加工过程 抽象 成 几何 问题 ， 那么 在 仿真 中 毛坯 余量 的 去除 过程 就 可以 转化 为 ： 工件 毛坯 几何体 和 刀具 几何体 做差 运算 （ 用 表示 毛坯 的 几何体 剪切 表示 刀具 的 几何体 ） ， 得到 的 计算结果 就是 工件 成品 。 
 　 　 基于 上述 分析 ， 我们 知道 ： 实现 几何体 之间 的 运算 关系 （ 交 、 并 、 差 ） 是 仿真 软件 中 必不可少 的 技术 条件 。 由于 3 维 几何体 布尔运算 算法 和 3 维 几何体 光学 渲染 效果 算法 的 编程 量 都 很大 ， 对 相关 的 专业知识 和 编程技术 都 有 很 高 的 要求 。 所以 ， 在 自己 编制 仿真 程序 时 ， 可以 考虑 利用 第 3 方 平台 辅助 开发 。 
 　 　 AutoCAD 这种 广泛 使用 的 计算机辅助 绘图 软件 提供 了 丰富 的 2 维 图形操作 和 3 维 几何体 运算 功能 （ 交 、 并 、 差 ） ， 同时 它 还 提供 了 ARX 、 ADS 、 Visual   LISP 或者 Script 脚本语言 等 多种 编程 接口 ， 供 用户 进行 二次开发 。 
 　 　 因此 ， 选用 AutoCAD   R14 作为 开发 支持 平台 可以 简化 编程 过程 、 提高 编程 效率 ， 同时 改善 仿真 效果 。 这样 ， 在 编制 仿真 加工 程序 时 就 可以 充分利用 AutoCAD   R14 平台 提供 的 实体 运算 功能 （ 交 、 并 、 差 ） 来 模拟 实现 机械加工 中 毛坯 和 刀具 之间 的 切削 关系 ， 从而 达到 仿真 目的 。 本文 以 其中 最 简单 的 Script 脚本 文件 为例 介绍 如何 利用 AutoCAD 实现 复杂 零件 加工过程 仿真 。 其它 编程 接口 的 操作过程 大同小异 ， 只是 在 运行 速度 上 有所 差异 。 
 2   仿真 加工 实例 
 　 　 涡轮 是 一种 将 工质 （ 蒸汽 或 燃气 ） 的 热能 转换 为 机械功 的 旋转式 动力机械 。 航天工业 上 应用 的 涡轮 结构复杂 ， 加工 精度 要求 高 ， 材料 的 可 加工性 差 ， 尤其 是 叶片 工作 表面 为 空间 自由 曲面 ， 且 形状 复杂 ， 所以 一般 采用 4 轴 以上 的 电火花 数控机床 加工 （ 图 1 是 火箭 发动机 整体 涡轮 盘 的 三维 几何 造型 图 ） 。 
 
 图 1   整体 涡轮 盘 局部 
 　 　 在 进行 仿真 之前 ， 我们 先 分析 整体 涡轮 盘 的 加工过程 。 首先 采用 指状 铣刀 在 多 坐标 数控铣 床 加工 出 电火花 加工 使用 的 成型 电极 ； 然后 在 电火花 数控机床 上 采用 成型 电极 靠模 加工 出 整体 涡轮 。 仿真 加工 的 步骤 和 实际 加工 步骤 相似 。 先 构造 出 指状 铣刀 几何体 和 成型 电极 的 毛坯 几何体 ， 使 指状 铣刀 几何体 沿着 算好 的 加工 轨迹 运动 ， 同时 在 毛坯 几何体 和 铣刀 几何体 之间 做差 运算 ， 这样 可以 计算 出 表示 成型 电极 的 几何体 。 接下来 使 成型 电极 几何体 沿着 计算 好 的 运动 轨迹 运动 ， 同时 在 成型 电极 几何体 和 涡轮 盘 毛坯 几何体 之间 做差 运算 ， 最终 得到 仿真 结果 - - 整体 涡轮 盘 。 
 　 　 在 编制 仿真 程序 时 ， 我们 首先 按 机床 的 实际 相对 位置 关系 ， 绘制 出 刀具 几何体 和 电极 毛坯 几何体 。 通常 毛坯 和 刀具 的 几何 形状 较为简单 （ 本例 中 电极 毛坯 是 一段 圆环 ） ， 可以 通过 基本 几何体 （ 球体 、 圆柱体 、 圆锥体 、 立方体 等 ） 经过 布尔运算 形成 。 构造 铣刀 几何体 和 电极 毛坯 的 部分 代码 如下 （ 采用 Matlab 语言 编写 ） ： 
 　 　 fid ＝ fopen （ ′ f  ＼ acad14 ＼ mp ． scr ′ ， ′ w ′ ） ； 打开 1 个 文件 ， 准备   
 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 写入 script 文件 
 　 　 fprintf （ fid ， ′ new ． ＼ n ′ ） ； 创建 一个 新 CAD 图 
 　 　 fprintf （ fid ， ′ units   2   6   1   4   0   n ＼ n ′ ） ； 确定 绘图 单位 
 　 　 fprintf （ fid ， ′ ucsicon   or ＼ n ′ ） ； 显示 坐标 原点 
 　 　 fprintf （ fid ， ′ vpoint   － 1 ， － 1 ， 1 ＼ n ′ ） ； 确定 视点 ， 以便 形成 3 
 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 维 观察 效果 
 　 　 fprintf （ fid ， ′ cylinder   ％ f ， ％ f ， ％ f   ％ f   ％ f ＼ n ′ ， 0 ， 0 ， xmin ， 
 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 10 ． 65 ， xmax － xmin ） ； 
 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 绘制 一个 圆柱 
 　 　 fprintf （ fid ， ′ cylinder   ％ f ， ％ f ， ％ f   ％ f   ％ f ＼ n ′ ， 0 ， 0 ， xmin ， 
 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 9 ． 35 ， xmax － xmin ） ； 
 　 　 fprintf （ fid ， ′ zoom   e ＼ n ′ ） ； 
 　 　 fprintf （ fid ， ′ subtract   10 ． 75 ， 0 ， 0   9 ． 35 ， 0 ， 0   ＼ n ′ ） ； 
 　 　 fprintf （ fid ， ′ ucs   3   0 ， 0 ， 1   － 1 ， 0 ， 0 ＼ n ′ ） ； 
 　 　 进入 工件 坐标系 ， 并 构造 工件 ： 
 　 　 fprintf （ fid ， ′ slice   0 ， 0 ， 10 ． 65   0 ， ％ f ， 0   1 ， ％ f ， 0   0 ， ％   
 　 　 　 　 　 　 　 　 　 f ， 1   0 ， ％ f ， 0 ＼ n ′ ， ymax ， ymax ， ymax ， ymax － 2 ） ； 
 　 　 　 　 　 　 　 　 　 　 　 　 　 　 2 个 同心 圆柱 做差 运算 ， 形成 圆柱 环 
 　 　 fprintf （ fid ， ′ slice   0 ， 0 ， 10 ． 65   0 ， 0 ， 0   1 ， 0 ， 0   0 ， 1 ， 0   0 ，   
 　 　 　 　 　 　 0 ， 1 ＼ n ′ ） ； 
 　 　 fprintf （ fid ， ′ slice   0 ， 0 ， 10 ． 65   0 ， ％ f ， 0   1 ， ％ f ， 0   0 ，   
 　 　 　 　 　 　 ％ f ， 1   0 ， ％ f ， 0 ＼ n ′ ， ymin ， ymin ， ymin ， ymin ＋ 1 ） ； 
 　 　 　 　 　 　 将 圆柱 环 切开 ， 形成 图 1 中 的 毛坯 
 　 　 开始 构造 刀具 ： 
 　 　 fprintf （ fid ， ′ sphere   ％ f ＼ n ′ ， toolradius ） ； 构造 指状 铣刀 刀头 
 　 　 fprintf （ fid ， ′ ucs   x   90 ＼ n ′ ） ； 
 　 　 fprintf （ fid ， ′ cylinder   0 ， 0 ， 0   ％ f   － ％ f ＼ n ′ ， toolradus ， tool － 
 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 　 length ） ； 构造 刀柄 
 　 　 fprintf （ fid ， ′ ucs   x   － 90 ＼ n ′ ） ； 
 　 　 fprintf （ fid ， ′ zoom   e ＼ n ′ ） ； 
 　 　 fprintf （ fid ， ′ union   0 ， 0 ， ％ f   0 ， ％ f ， 0   ＼ n ′ ， toolradius ， － 
 　 　 toolradius － ． 05 ） ； 将 刀头 和 刀柄 做 并 运算 ， 得到 刀具 几何体 
 　 　 fprintf （ fid ， ′ block   dj   0 ， ％ f ， 0   0 ， ％ f ， 0   ＼ n ′ ， － 
 　 　 　 　 　 　 　 　 　 　 　 　 toolradius ， － toolradius ） ； 把 刀具 做成 块 
 　 　 刀具 几何体 制作 完毕 后 ， 应该 按块 （ block ） 方式 保存 。 在 成型 电极 仿真 加工过程 中 ， 根据 给定 的 刀位 轨迹 来 插入 刀具 块 ， 再 炸开 （ explode ） ， 然后 在 电极 毛坯 几何体 与 刀具 几何体 之间 做差 运算 ， 去除 加工余量 。 在 这 一 步骤 中 需要 注意 的 是 ： 刀具 块 的 插入 点 和 计算 刀具 运动 轨迹 的 参考点 应该 一致 （ 即 ： 如果 计算 刀具 移动 轨迹 时 的 基准 是 刀尖 ， 那么 在 AutoCAD 中 插入 刀具 块 时 的 参考点 也 应该 是 刀尖 ） 。 否则 ， 会 出现 仿真 和 实际 加工 不 一致 的 情况 。 部分 仿真 加工 程序代码 如下 ： 
 for   j ＝ 1 ： endj 　 　 　 　 　 　 　 　 　 　 共计 有 endj 个 刀 位点 
 　 　 i ＝ j ＊ 2 ； 
 　 　 fprintf （ fid ， ′ insert   dj   ％ f ， ％ f ， ％ f   ＼ n ′ ， 
 　 　 ypdwgjx （ i ） ，   ypdwgjy （ i ） ， ypdwgjz （ i ） ） ； 在 给定 的 刀位 轨迹 处 插入 刀具 块 
 　 　 fprintf （ fid ， ′ explode   l ＼ n ′ ） ； 将 刀具 块 炸开 （ 块 无法 进行 布尔运算 ） 
 　 　 fprintf （ fid ， ′ subtract   ％ 2 ． 4f ， ％ 2 ． 4f ， ％ 2 ． 4f ， ％ 2 ． 4f ， ％   
 　 　 　 2 ． 4F ， ％ 2 ． 4f   ＼ n ′ ， 1 ． 54 ， － 2 ． 43 ， 9 ， ypdwgix （ i ） ＋ toolradius ， 
 　 　 ypdwgjy （ i ） ＋ toollength ， ypdwgiz （ i ） ） ； 电极 毛坯 几何体 与 刀具 几何体 作差 运算 ， 实现 余量 去除 
 end 
 　 　 运算 后 得到 的 成型 电极 几何体 仍 采用 块 方式 保存 。 在 整体 涡轮 盘 仿真 加工 时 ， 根据 给定 的 刀位 轨迹 插入 成型 电极 块 ， 再 炸开 （ explode ） 。 然后 在 整体 涡轮 盘 毛坯 几何体 与 成型 电极 几何体 之间 做差 运算 ， 去除 加工余量 。 上述 操作步骤 和 编程 与 指状 铣刀 加工 成形 电极 毛坯 相似 ， 在 此 不再 赘述 。 
 3   结   论 
 　 　 在 高速 发展 的 现代科技 领域 ， 各 部门 分工合作 ， 各自 发挥特长 。 在 软件 编程 领域 ， 共享 、 合作 则 显得 更加 重要 。 充分利用 各种 功能 平台 ， 不但 可以 为 编程人员 节省 大量 的 时间 、 精力 ， 同时 还 可以 大大提高 编程 效率 ， 减少 编程 错误 ， 改善 编程 效果 。 本文 中 介绍 的 采用 AutoCAD 平台 编制 仿真 软件 就是 其中 一例 。 由于 采用 了 较为 成熟 的 第三方 平台 ， 使得 本 仿真 软件 的 编程 周期 大大缩短 ， 而且 取得 了 良好 的 仿真 效果 。 
 王刚 （ 哈尔滨工业大学 421 信箱  150001 ） 
 赵万生 （ 哈尔滨工业大学 421 信箱  150001 ） 
 参考文献 
 ［ 1 ］ Omura   G ． AutoCAD   14 从 入门 到 精通 ． 北京 ： 电子 工业 出   版社 ， 1998 
 ［ 2 ］ Hanselman   D ． 精通 MATLAB 综合 辅导 与 指南 ． 西安 ： 西安   交通 大学 出版社 ， 1998 
 收稿 日期 ： 1999 － 11 － 18 
