自动化 学报 
 ACTA   AUTOMATICA   SINICA 
 2000 　 Vol.26 　 No.1 　 P.7 - 15 
 
 
 
 基于 非 完整 运动 规划 的 多指 手 灵巧 操作 
 管贻生 　 何永强 　 张启先 
 摘   要   灵巧 操作 是 多指 手 操作 的 一个 重要 方面 ， 探讨 实现 这种 操作 的 纯 滚动 方法 . 首先 利用 纯 滚动 的 非 完整 特性 ， 进行 非 完整 运动 的 最优 路径 规划 ， 然后 根据 规划 结果 应用 多指 手 操作 运动学 方程 确定 手指 的 运动 . 为 多指 手 灵巧 操作 的 实现 提供 了 一条 途径 . 
 关键词   多指 手 ， 运动学 ， 灵巧 操作 ， 纯 滚动 ， 非 完整 运动 规划 . 
 DEXTEROUS   MANIPULATION   OF   MULTIFINGERED   HAND   BASED   ON   NONHOLONOMIC   MOTION   PLANNING 
 GUAN   Yisheng   HE   Yongqiang   ZHANG   Qixian 
 ( Robotics   Research   Institute , Beijing   University   of   Aeronautics   and   Astronautics , Beijing   100083 ) 
 Abstract   Dexterous   manipulation   is   an   important   topic   of   multifingered   study .   Dexterous   manipulation   with   rolling   contacts   is   addressed   in   this   paper .   Based   on   the   nonholonomy   of   rolling ,   a   near  optimal   planning   method   of   nonholonomic   motion   is   given   by   Ritz   approximation ,   with   the   shortest   length   of   contact   trajectory   on   the   fingertip   face   as   cost   function .   With   the   planning   results ,   according   to   the   proposed   multifingered   kinematics   equation ,   the   motion   of   finger   is   generated   to   realize   the   desired   dexterous   manipulation . 
 Key   words   Multifingered   hand ,   kinematics ,   dexterous   manipualtion ,   rolling   contact ,   nonholonomic   motion   planning   . 
 1   引言 
 　 　 多指 手 的 一个 重要 优点 和 特性 在于 它 对 物体 有 多种 抓持 ， 并且 可以 实现 抓持 之间 的 变化 ， 即 从 一个 抓持 位形 过渡 到 另 一个 抓持 位形 . 也就是说 ， 可以 通过 控制 手指 的 运动 改变 手指 对 物体 的 抓持 状况   ( 接触 位形 ) ， 这 就是 灵巧 操作 ， 在 操作 中 具有 重大意义 ： 其一 ， 为了 稳定 可靠 地 抓持 物体 ， 当 初始 的 或 操作 中 的 抓持位 形不佳时 ， 需要 调整 到 一个 良好 的 抓持 位形 ； 其二 ， 当 手指 在 操作 中 运动 到 极限 位置 、 手指 之间 将 有 干涉 或 接触点 将 超越 有效 的 接触区 时 ， 需要 调整 手指 的 接触 状态 . 实现 灵巧 操作 有 多种 途径 ， 如 指态 规划 ( finger   gaiting ) 、 滑动 和 纯 滚动 . 其中 纯 滚动 的 方法 由于 相对 简单 、 在 操作过程 中 比较 容易 保证 可靠 的 抓持 而 引起 了 研究 人员 的 关注 . 
 　 　 纯 滚动 是 一种 非 完整 约束运动 ， 其非 完整性 在于 接触 速度 约束 的 不可 积性 . 基于 这点 用非 完整 运动 规划 的 方法 、 应用 非线性 控制 理论 即可 实现 灵巧 操作 . Li 和 Canny 用 现代 微分 几何 的 理论 研究 过 两个 相 接触 的 物体 之间 的 滚动 ［ 1 ］ ， 分析 了 位形空间 中 路径 的 存在 性 ， 并 给出 了 一种 路径 规划 的 方法 ， 但 此法 只 适用 于 特殊 形状 的 物体 ( 圆球 与 平面 ) ， 路径 长 、 变化 大 、 不 光滑 . Murray 和 Sastry 发展 了 用 正弦 函数 作 输入 来 驱动 非 完整 系统 的 规划 方法 ， 并 用于 轮式 移动 车辆 的 路径 规划 上 ［ 2 ］ ， 并 在 文 ［ 3 ］ 中 研究 了 球状 指 端的 手指 操作 方形 物体 时 接触 位形 调整 问题 ， 以 指端 和 被 抓 物体 之间 的 转动 为 输入 ， 将 速度 约束方程 转化 为 二阶 链式 系统 ， 但 其 算法 的 完成 需要 几个 阶段 ， 比较复杂 . 以上 研究 中 的 算法 不是 最优 的 ， 而且 没有 考虑 怎样 根据 规划 的 结果 最终 生成 手指 的 运动 . 
 　 　 本文 系统地 探讨 用纯 滚动 进行 多指 手 灵巧 操作 的 方法 . 首先 基于 纯 滚动 的 非 完整 运动 特性 ， 用 接触 位形 中 的 两个 局部 坐标 的 时间 变化 作为 等效 的 非线性 控制系统 的 输入 ， 以 接触点 在 物体 和 指端 上 走过 的 路径 长度 作为 性能指标 ， 对纯 滚动 进行 最短 路径 规划 . 然后 根据 规划 的 结果 ， 应用 多指 手 操作 的 运动学 方程 产生 手指 的 运动 ， 从而 实现 多指 手 的 灵巧 操作 . 
 2   纯 滚动 的 非 完整性 
 　 　 对于 图 1 所示 的 n 个 手指 的 多指 手 ， 纯 滚动 运动学 方程 为 ［ 8 ］ 
 
 图   1   多指 手 及其 坐标系 设定 
 　 ( 1 ) 
 
 　 　 vpo 为 物体 的 速度 ， 在 物体 坐标系 中 描述 ； Adg 为 对应 于 位形 g 的 伴随 变换 ［ 4 ］ ， 将 速度 从 一个 坐标系 变换 到 另 一 坐标系 ； 为 手指 i 的 雅 可比 ， M 、 K 分别 接触 表面 的 度量 张量 和 曲率 张量 . 为 规划 非 完整 运动 ， 只 考察 单个 的 手指 即可 . 因此 在 以下 的 公式 中 ， 无 手指 下 标号 i . 用纯 滚动 的 方法 可以 实现 手指 与 物体 的 接触 从 一种 位形 到 其它 任 一种 位形 的 变化 ， 其 可行性 源于 纯 滚动 的 非 完整性 ， 即纯 滚动 虽然 在 接触 位形 的 速度 上 有 约束 ， 但 在 接触 位形 上 无约束 . 这 可用 现代 微分 几何 的 有关 定理 和 非线性 控制系统 的 可控性 来 说明 ［ 4 ］ . 
 　 　 由 接触 运动学 ［ 5 ］ 可得 纯 滚动 操作 中 接触 坐标 的 速度 约束 
 　 ( 2 ) 
 　 　 令 ( 2 ) 式 左边 的 前 一 矩阵 可写 为 
 因而 上式 可 写 为 Pfaffian 约束 的 标准 形式 
 　 　 令 由 上式 可得 
 　 ( 3 ) 
 　 　 这是 一个 非线性 控制系统 方程 ， 其 可控性 与 纯 滚动 的 Pfaffian 约束 ( 2 ) 的 非 完整性 ( 不可 积性 ) 是 等价 的 . 而 非线性 控制系统 的 可控性 可用 Chow 定理 来 说明 . 其 过程 为 ， 计算 系统 方程 中 矢量 场 gi ( q ) 的 李 代数 ， 由 矢量 场 及其 李 代数 张成 分布 并 判定 其维数 ( 计算 其 秩 ) ， 若 分布 的 维数 等于 系统 状态 空间 的 维数 ， 则 系统 是 可控 的 . 
 
 图 2   指端 和 物体 的 局部 坐标系 设定 
 　 　 以 平面 指 端的 双指手 操作 半径 为 ρ o 的 球形 物体 为例 . 建立 图 2 所示 的 局部 坐标系 后 ， 可得 指 端的 几何 参数 ( 曲率 张量 K 、 度量 张量 M 和 挠曲 形式 T ) 为 
 
 球 的 几何 参数 是 
 
 将 它们 代入 ( 3 ) 式 并 整理 得到 
 
 由 矢量 场 g1 和 g2 计算 李 代数 ， 
 
 可见 ， 在 局部 坐标 的 定义域 内 ， 矢量 场 g1 , … , g5 是 线性 无 
 的 ， 由 它们 张成 的 分布 的 维数 是 5 ， 等于 状态 空间 的 维数 . 
 　 　 用 球状 指端 手指 操作 方形 物体 的 情况 与 此 完全 类似 . 而用 球状 指端 操作 球形 物体 ， 当 它们 的 半径 不 相等 时 ， 用纯 滚动 的 方法 也 可 实现 接触 位形空间 中 的 任意 变化 ［ 1 ］ . 
 3   纯 滚动 的 最 短 路径 近优 规划 
 　 　 路径 规划 是 指 给定 初始 的 和 终止 的 位形 ， 寻求 一个 合适 的 系统 输入 即 合适 的 路径 ， 使 系统 从 初始 位形 运动 到 终止 位形 . 在 灵巧 操作 中 ， 我们 希望 接触点 在表面上 走过 的 路径 最短 ， 这种 考虑 出于 三点 ： 1 )   路径 短时 ， 接触点 不 容易 超越 指端 和 被 抓 物体 上 的 有效 的 接触区 ； 2 )   短 的 路径 不易 使 指端 和 被 抓 物体 的 相对运动 范围 过大而 造成 手指 达到 其 工作 空间 边界 ； 3 ) 路径 越短 ， 操作 效率 越高 . 下面 根据 这 三点 来 作 路径 规划 . 
 　 　 接触点 在 时间段 ［ 0 , T ］ 内 ， 在表面上 走过 的 路径 长度 可 求得 为 ［ 8 ］ 
 
 其中 M 为 物体 表面 的 度量 张量 . 
 　 　 纯 滚动 中 ， 接触点 在 两 接触 物体 表面 上 走过 的 路径 长度 相等 . 故 只 需 考虑 接触点 在 一个 表面 上 的 路径 长度 ， 当然 宜 选取 较 简单 的 表面 . 为 便于 数学 上 的 处理 ， 令 目标 函数 为 
 
 非线性 控制系统 ( 3 ) 中 ， 输入 即为 上式 中 的 这样 ， 路径 规划 问题 转化 为 端点 固定 的 优化 问题 
 　 ( 4 ) 
 系统 可控 时 ， 存在 优化 解 u * ∈ L2 ［ 0 , T ］ ， 这里 L2 ［ 0 , T ］ 是 由 定义 在 区间 ［ 0 , T ］ 内 的 形如 
 的 可 度量 矢量 函数 构成 的 Hilbert 空间 . 
 　 　 下面 以 平面 和 球面 之间 的 滚动 为例 说明 上述 问题 的 近 优解 . 在 平面 上 ， 由于 M 为 2 × 2 单位矩阵 ， 因而 目标 函数 为 将 时间 伸缩 为 T = 2 π ， 并 设为 L2 ［ 0 , T ］ 上 的 一组 正交 基 ， 那么 u ∈ L2 ［ 0 , T ］ 可 表示 为 其中 为 由 满足 关系式 
 的 所有 标量 序列 构成 的 Hilbert 空间 . 目标 函数 成为  
 
 这样 ， 寻求 输入 u 就 成 了 求解 系数 a . 然而 a 是 无穷 维 的 ， 不 可能 求得 ， 但 应用 Ritz 逼近 方法 可以 取其 有限 维而 求得 问题 的 近似 解 ［ 6 ］ . 如取 前 N 项 ， 即令 
 
 由于 u 是 近似 的 ， 极小 化 目标 函数 时应 考虑 由此 造成 的 输出 q 的 误差 . 为此 ， 定义 目标 函数 为 
 　 ( 5 ) 
 其中 ， γ ＞ 0 为罚 因子 ， 为 加权 矩阵 ， 是 为了 在 非欧 空间 中 度量 矢量 q 的 “ 大小 ” 而 引入 的 . 接触 位形空间 不是 度量 空间 ， 因为 af , ao , ψ 的 量纲 不同 . 为 系统 为 初始条件 ， 在 T 时刻 的 状态 . 显然 ， 它 是 a ∈ RN 的 函数 . 令 q ( T ) = f ( a ) ， 则 目标 函数 ( 5 )   即 
 　 ( 6 ) 
 可以 证明 ， 当 N , γ → ∞ 时 ， 上述 有限 维 问题 的 近 优解 收敛 于 无穷 维 的 优化 解 ［ 6 ］ . 
 　 　 ( 6 ) 式 的 极值 问题 可用 下列 修正 的 牛顿 法 求解 
 　 ( 7 ) 
 上式 的 推导 用 了 J ( a ) 的 Taylor 展开 ， 并 忽略 了 fi ( a ) 的 Hessians . 其中 为 f ( a ) 的 Jacobian ， σ = 1 / γ , 0 ＜ μ ＜ 1 为 参数 . f ( a ) 及其 Jacobian   A 可 按 下列 方法 计算 ： 
 　 　 定义 那么 u = Φ a ， 而式 ( 3 ) 即 为 
 显然 A 为 矩阵 函数 在 t = T 时 的 值 ， 而 对 Y ( t ) 微分 可 得 
 
 这样 ， 每 一步 都 从 t = 0 到 t = T 积分 下列 微分方程 组以 刷新 a ， 
 　 ( 8 ) 
 令 f ( ak ) = q ( T ) ,   A = Y ( T ) 即可 . 求得 系数 后 即 得 系统 的 输入 ， 从而 得到 系统 状态变量 的 轨迹 . 
 4 　 路径 规划 仿真 结果 
 　 　 本节 以 圆盘 平面 指 端的 手指 操作 半径 为 90mm 的 小 篮球 为例 ( 参见 图 2 ) ， 对 上节 的 纯 滚动 非 完整 运动 规划 进行 仿真 验证 . 
 　 　 假定 手指 与 物体 的 初始 接触 位形 为 q0 = η = ( 10 , 6 , 0 , 0 , 0.3 ) ， 圆盘 指 端的 初始 接触点 不 在 其 中心 ， 期望 的 终止 接触 位形 为 qf = ( 0 , 0 , 0 , 0 , 0 ) . 要求 在 1 秒钟 内 从 初始 接触 位形 过渡 到 终止 接触 位形 . 取 傅立叶 基 的 前 十项 ， N   = 10 ， 即 
 
 按 上节 的 叠代 方法 可 求得 系统 的 输入 为 
   u1 ( t ) = - 0.0002 - 0.9320 sin2 π t + 1.6534 cos2 π t + 0.8853 sin4 π t - 0.4084 cos4 π t ， 
 　 　 u2 ( t ) =  0.0002 + 2.1396 sin2 π t - 0.2472 cos2 π t - 0.1686 sin4 π t - 0.4063 cos4 π t  . 
 　 　 接触点 在 指端 上 的 路径 如图 3 ( a )  所示 ， 从点 ( 10 , 6 ) 运动 到 ( 0 , 0 ) . 图 3 ( b ) 为 物体 表面 接触 坐标 轨迹 ， 从 ( 0 , 0 ) 到 ( 0 , 0 ) ， 走 一 封闭 的 路径 . 各 接触 坐标 随 时间 的 变化 见图 3 ( c ) 和 3 ( d ) . 结果表明 ， 接触 位形 从 ( 10 , 6 , 0 , 0 , 0.3 ) 很 好 地 过渡 到 了 ( 0 , 0 , 0 , 0 , 0 ) . 
 
 图 3   路径 规划 仿真 结果 
 　 　 更 一般 的 情况 是 接触 位 形取 任意 值 . 假定 初始 接触 坐标 都 不 为 零 ， 例如 q0 = η = ( 10 , 6 , 0.2 ,   - 0.1 ,   0.3 ) ， 要求 在 1s  内 过渡 到 qf = ( 0 ,   0 ,   0 ,   0 ,   0 ) . 同样 可 得到 理想 的 仿真 结果 ， 详见 文 ［ 8 ］ . 
 5   灵巧 操作 算法 及 仿真 
 　 　 直到 上节 只 规划 出 指端 与 被 抓 物体 的 相对运动 轨迹 ， 操作 中应 最终 求得 手指 的 运动 . 根据 非 完整 运动 规划 结果 求得 接触 坐标 的 时间 变化率 ， 再 根据 被 抓 物体 的 运动 ， 按 多指 手 运动学 即可 求得 手指 的 运动 . 算法 如 下面 所述 ( 见图 4 ) . 
 
 图 4 　 算法 过程 框图 
 灵巧 操作 算法 
 已知 ： 1 ) 手指 运动学 模型 ； 
 　 　 　 2 ) 指端 和 物体 表面 的 几何 模型 . 
 输入 ： 1 )   初始 抓持 位形 θ ( 0 ) ， η ( 0 ) ； 
 　 　 　 2 ) 被 抓 物体 的 运动 轨迹 g ( t ) ； 
 　 　 　 3 ) 期望 的 接触 位形 η ( T ) ； 
 　 　 　 4 ) 运行 时间 T . 
 输出 ： 手指 的 关节 轨迹 θ ( k ) . 
 过程 ： 1 ) 求 离散 点数 N , 令 k = 0 ； 
 　 　 　 2 ) 用非 完整 方法 规划 路径 η ( t ) ； 
 　 　 　 3 ) 求 离散 点 的 物体 速度 vpo ( k ) 
 　 　 　 和 接触 速度 
 　 　 　 4 ) 根据 ( 1 ) 式 求 
 　 　 　 5 ) 求 关节 角 θ ( k + 1 ) = θ ( k ) + 
 　 　 　 重复 步骤 3 ) ～ 5 ) ， 直至 k = N . 
 　 　 　 仍 以 前面 的 两 指手 操作 小 篮球 为例 . 设 手指 有 六个 自由度 ( 例如 HKUST   Hand 的 三个 手指 是 三个 六 自由度 的 Motoman   K3S 机器人 ) . 设 手指 1   ( 图 2 中 左边 的 F1 ) 与 球 的 初始 接触 位形 为 ( 10 ,   6 ,   0 ,   0 ,   0.3 ) ， 这时 手指 关节 角为   ( 0.0184 ,   - 0.3307 ,   - 0.6082 ,   - 0.0322 ,   0.6084 , - 0.2736 ) ， 指 端点 在 手掌 坐标系 ( 建在 两 手指 的 中间 ) 中 的 坐标 为   ( - 89.9838 ,   8.6849 ,   482.1695 ) ， 球心 坐标 为   ( 0 ,   0 ,   490 ) . 现 要求 将球 在 1s 内 上举 50mm ， 同时 将 接触 位形 调整 到   ( 0 , 0 ,   0 ,   0 ,   0 ) . 根据 前节 的 规划 结果 ， 按照 上面 的 算法 ， 手指 指端 轨迹 的 仿真 结果 如图 5 所示 . 从 仿真 结果 看到 ， 指 端点 变 到   ( - 90.0383 ,   0.0744 ,   539.9227 ) ， 姿态 由 下面 的 R ( 0 ) 变化 到 R ( 1 ) ， 结果 正确 . 同理 可求 的 另 一 手指 的 运动 . 
 
 
 
 图 5   指端 轨迹 仿真 结果 
 6   结论 
 　 　 多指 手 灵巧 操作 是 一个 引人入胜 而 有 难度 的 问题 ， 虽然 实现 灵巧 操作 有 几种 潜在 的 途径 ， 但 目前 还 没有 较 简单 可行 的 方法 . 本文 利用 了 纯 滚动 的 非 完整性 ， 以 接触点 在表面上 所 走过 的 路径 长度 为 性能指标 ， 利用 Ritz 逼近 ， 给出 了 纯 滚动 的 非 完整 运动 路径 规划 的 近 优解 ， 仿真 结果表明 了 这种 规划 方法 的 有效性 . 根据 路径 规划 的 结果 ， 按 多指 手 操作 的 运动学 方程 求得 了 手指 的 运动 ， 从而 使 灵巧 操作 得到 了 具体 的 实现 . 但是 应该 指出 ， 当 手指 的 自由度 较 少时 ， 难以 根据 规划 的 结果 求得 手指 的 精确 运动 . 在 这些 情况 下 ， 需要 考虑 更 有 难度 的 指态 规划 或 滑动 . 
 致谢   本文 部分 工作 在 香港科技大学 完成 ， 得到 了 李泽湘 博士 的 指导 ， 对此 第一 作者 特 致以 谢意 . 
 国家自然科学基金 资助 项目 ( 69785001 ) . 
 管贻生   1966 年生 ， 博士 . 主要 研究 方向 ： 机器人 操作 及 控制 . 
 何永强   1966 年生 ， 博士生 ， 主要 研究 方向 ： 机器人 灵巧 手 控制 
 张启先   1925 年生 ， 工程院 院士 . 主要 研究 领域 ： 机构 学 ， 机器人学 . 
 管贻生 ( 北京航空航天大学 机器人 研究所   北京   100083 ) 
 何永强 ( 北京航空航天大学 机器人 研究所   北京   100083 ) 
 张启先 ( 北京航空航天大学 机器人 研究所   北京   100083 ) 
 参考文献 
 1 ， Li   Z ， Canny   J .   Motion   of   two   rigid   bodies   with   rolling   constraint .   IEEE   Transactions   on   Robotics   and   Automation ,   1990 ,   6 ( 1 ) ： 62 ～ 71 
 2 ， Murray   R   M ， Sastry   S   S .   Nonholonomic   motion   planning :   steering   using   sinusoids .   IEEE   Transactions   on   Automatic   Control , 1993 ， 38 （ 5 ） ： 700 ～ 716 
 3 ， Murray   R   M ， Sastry   S   S .   Grasping   and   manipulation   using   multifingered   robothand . In ： Proc .   of   Symposium   in   Applied   Mathematics ,   1990 ,   4 ： 2931 ～ 2938 
 4 ， Murray   R   M ,   Li   Z ,   Sastry   S   S .   A   Mathematical   Introduction   to   Robotic   Manipulation .   CRC   Press ,   1994 
 5 ， Montana   D   J .   The   kinematics   of   contact   and   grasp .   The   International   Journal   of   Robotics   Research ,   1988 ， 7 ( 3 ) ： 17 ～ 32 
 6 ， Fernandes   C ,   Gurvits   L .   Near  optimal   nonholonomic   motion   planning   for   a   system   of   coupled   rigid   bodied .   IEEE   Transactions   on   Auotmatic   Control ,   1989 ， 39 （ 3 ） ： 450 ～ 463 
 7 ， 管贻生 , 张启先 .   多指 手 操作 ： 运动学 算法 和 实验 .   机器人 ， 1998 ， 20 （ 5 ） ： 321 ～ 327 
 8 ， 管贻生 .   多指 手 操作 ： 理论 、 算法 和 实验 ［ 博士学位 论文 ］ . 北京 ： 北京航空航天大学 ， 1998 
 收稿 日期   1998 - 06 - 23   收 修改稿 日期   1999 - 03 - 25 
