自动化 学报 
 ACTA   AUTOMATICA   SINICA 
 2000 　 Vol.26 　 No.3 　 P.289 - 295 
 
 
 
 直接 驱动 机器人 关节 加速度 
 反馈 解 耦 控制 
 韩建达 　 谈 大龙 　 蒋 新松 
 摘 　 要 　 以 利用 线 加速度 传感器 实际 测量 转动 关节 的 加速度 为 基础 ， 分析 了 机器人 关节 加速度 反馈 控制 的 开环 模型 ， 以及 影响 其 闭环 稳定性 的 主要 因素 ； 提出 了 闭环控制 策略 的 设计 准则 . 在 一台 三 自由度 直接 驱动 机器人 上 的 实验 结果 证明 了 该文 分析 的 正确性 ， 与 不 具备 加速度 反馈 控制 时 的 实验 结果 相 比较 ， 显示 出 这种 方法 的 有效性 . 
 关键词 　 加速度 ， 反馈 控制 ， 解 耦 ， 直接 驱动 机器人 . 
 JOINT   ACCELERATION   FEEDBACK   CONTROL 
 FOR   DIRECT - DRIVE   ROBOT   DECOUPLING 
 HAN   Jianda 　 TAN   Dalong 　 JIANG   Xinsong 
 ( Shenyang   Institute   of   Automation , Chinese   Academy   of   Sciences , Shenyang 　 110015 ) 
 Abstract 　 　 The   link - couplings   of   a   multi - DOF   DD - robot   always   act   as   a   kind   of   torque   disturbances . Joint   acceleration   feedback   control   based   on   sensed   acceleration   information   will   help   to   resist   such   coupling   effects   and   improve   the   joint   tracking   performance . In   this   paper , linear   accelerometer   is   used   to   sense   the   rotatory   joint   acceleration   and   a   model   is   given   to   describe   the   sensed   open   loop   resonance , and   design   criteria   for   stable   and   functional   control   law   are   also   proposed . Extensive   experiments   are   conducted   on   a   threelink   DD - robot   and   the   results   are   presented   to   validate   the   analyses   and   demonstrate   the   improvements   benefited   from   the   proposed   method . 
 Key   words 　 Acceleration , feedback   control , decoupling , direct - drive   robot . 
 1 　 引言 
 　 　 n 自由度 直接 驱动 机器人 的 连杆 动力学 方程 为 ［ 1 ］ 
 　 　 ( 1 ) 
 上式 中 D ( q ) ∈ Rn × n 是 惯量 矩阵 ； Ψ ∈ Rn 分别 是 哥氏力 向心力 、 重力 、 摩擦 及 驱动 力矩 向量 ； q , 分别 是 关节 角度 、 角速度 及 角加速度 向量 . 
 　 　 对于 关节 i , 式 ( 1 ) 可 写成 
 　 ( 2 ) ， ( 3 ) 
 上式 中 τ ni 是 作用 在 关节 i 上 的 连杆 动力学 耦合 ( 扰动 ) 力矩 ； Jii 是 连杆 i 的 转动惯量 ； θ i , τ i , φ i , fi 分别 是 向量 q , Ψ , φ , f 的 i 行 元素 ； dij , cij 分别 是 矩阵 D ， C 的 i 行 j 列 元素 . 
 　 　 对于 直接 驱动 机器人 ， τ ni 直接 作用 在 关节 驱动 电机 的 转子 上 ， 是 影响 机器人 跟踪 性能 的 主导 因素 ［ 3 ～ 5 ］ . 同时 ， 式 ( 2 ) 和 ( 3 ) 表明 ， 连杆 耦合 总是 表现 为 作用 在 关节 上 的 时变 力矩 扰动 . 因此 ， 提高 关节 驱动 单元 对 时变 扰动 力矩 的 抑制 能力 是 解决 直接 驱动 机器人 动力学 控制 问题 的 一条 途径 . 而 关节 加速度 是 作用 在 关节 上 的 合 力矩 ( 包括 扰动 力矩 ) 的 最 直接 反应 . 所以 ， 本文 提出 利用 实测 关节 加速度 信号 进行 反馈 控制 ， 并 要求 其 达到 以下 两 方面 目的 ： ( i ) 对 作用 在 关节 上 的 时变 扰动 力矩 具有 抑制作用 ； ( ii ) 有 足够 宽 的 闭环 响应 频带 ， 使得 由 加速度 闭环 引起 的 相位滞后 对 速度 、 位置 闭环控制 的 影响 充分 小 . 
 　 　 上述 两 方面 目标 的 实现 ， 等价 于 通过 加速度 闭环 把 机器人 关节 驱动 单元 由 力矩 源 . 
 τ = τ d 　 　 　 　 ( 4 ) 
 控制 成为 加速度 源 
 　 　 ( 5 ) 
 上式 中 τ d , d 分别 是 期望 力矩 和 期望 加速度 ； τ ， 分别 是 两种 驱动 单元 的 输出 . 从而 ， 力矩 扰动 不再 影响 关节 加速度 的 响应 性能 ， 由 n 个 这样 的 关节 构成 的 机器人 系统 ， 其 动力学 模型 将 是 n 个解 耦 的 双 积分 环节 . 
 
 
 图 1 　 关节 加速度 的 测量 
 2 　 关节 加速度 的 测量 
 　 　 用于 闭环控制 的 加速度 反馈 信号 不能 通过 对 速度 或 位置 传感器 信息 的 微分 计算 来 得到 ， 因为 微分 算法 对 噪声 的 放大 作用 以及 速度 、 位置 传感器 自身 的 敏感性 、 响应 频带 等 因素 使得 这种 闭环 难以 满足 上述 ( i ) ， ( ii ) 两 方面 的 要求 . 
 　 　 将线 加速度 传感器 安装 在 连杆 末端 ， 并 使 其 敏感 轴 沿着 关节 转动 的 切线 方向 ， 如图 1 所示 ， 就 可以 测量 转动 关节 的 角加速度 . 
 　 　 如果 关节 i 的 基座 是 静止 的 ， 则 
 　 　 　 ( 6 ) 
 　 　 如果 关节 i 是 其它 连杆 的 末端 ( 是 运动 的 ) ， 则 
 　 　 　 ( 7 ) 
 上式 中 i 是 关节 加速度 ， fi 是 线 加速度 传感器 的 输出 ， li 是 关节 轴 与 加速度 传感器 之间 的 距离 ， g 是 重力 加速度 ， 是 关节 基座 运动 对 加速度 传感器 的 影响 . 
 3 　 关节 加速度 反馈 控制 
 　 　 关节 加速度 反馈 控制 的 结构 如图 2 所示 . 假设 关节 驱动 电机 可以 被 视为 理想 力矩 源 ， 连杆 具有 理想 刚度 ， 而且 加速度 传感器 具有 无限 宽 的 晌 应 频带 ， 即 
 Gm ( s ) = Gs ( s ) = 1 , 　 　 　 ( 8 ) 
 则 可 将 加速度 反馈 控制策略 设计 为 
 Ga ( s ) = ka , 　 　 　 ( 9 ) 
 其中 ka 是 正常 数 . 此时 ， 图 2 所示 系统 的 闭环 模型 是 
 　 　 　 ( 10 ) 
 如果 控制 增益 满足 ka 》 J / Cm 且 ka 》 1 ， 则 有 
 　 　 　 ( 11 ) 
 从而 ， 加速度 反馈 控制 抑制 了 扰动 力矩 的 影响 ， 将 关节 驱动 单元 从 力矩 源 控制 成为 加速度 源 . 但是 ， 条件 ( 8 ) 对于 实际 机器人 系统 并 不 总是 成立 的 . 首先 ， 实际 连杆 的 刚度 都 是 有限 的 ， 都 存在 谐振 效应 ； 另外 ， 对 加速度 闭环 响应 带宽 的 要求 决定 了 必须 采用 宽频 带 的 加速度 传感器 . 这种 宽频 带 的 加速度计 能够 检测 到 由 非 刚性 因素 导致 的 谐振 . 
 　 　 图 2 中 d ， f 分别 是 期望 加速度 和 加速度 传感器 的 输出 ( 实际 加速度 ) ； Gs ( s ) 是 描述 连杆 传动 以及 加速度 传感器 自身 动态 特性 的 传递函数 ； Ga ( s ) 是 加速度 控制策略 ； Gm ( s ) 是 关节 驱动 电机 结合 电流 闭环 的 传递函数 ； τ n 是 动力学 扰动 力矩 ； 是 人为 加入 的 电流 扰动 ( 等效 力矩 扰动 ) ； Cm 是 力矩 常数 . 
 
 
 图 2 　 关节 加速度 反馈 控制结构 
 　 　 由 实际 连杆 的 非 刚性 因素 引起 的 谐振 效应 是 影响 加速度 闭环 稳定性 的 最 主要 因素 . 加速度 传感器 检测 到 的 谐振 可以 等效 地用 Gs ( s ) 表示 ， 并 体现 在 加速度 反馈 的 开环 频率响应 中 . 图 3 是 加速度 开环 频率响应 的 示意图 ( 只 考虑 两个 谐振 峰 ， 其余 的 多个 由于 加速度 传感器 及 系统 自身 的 高频 衰减 特性 而 被 忽略 ) . 
 
 
 图 3 　 加速度 开环 频率响应 θ af ( s ) / Id ( s ) 
 本文 提出 用 如下 模型 来 描述 加速度 开环 特性 
 　 　 　 ( 12 ) 
 其中 θ af ( s ) , Id ( s ) 分别 是 f ( t ) , id ( t ) 的 Laplace 变换 . 根据 图 2 ， 可 得 加速度 反馈 控制 的 闭环 模型 
 θ af ( s ) = Gac ( s ) θ ad ( s ) + Ga τ ( s ) τ n ( s ) , 　 　 　 　 ( 13 ) 
 其中 Gac ( s ) 是 加速度 闭环 传递函数 ， Ga τ ( s ) 是 加速度 闭环 对 扰动 的 抑制 函数 ， 且 
 　 　 　 ( 14 ) 
 　 　 　 ( 15 ) 
 　 　 设计 合适 的 闭环控制 策略 ， 实现 引言 中 提出 的 关于 加速度 反馈 控制 的 ( i ) 和 ( ii ) 两 方面 目标 ， 本文 提出 以下 关于 Ga ( s ) 的 设计 准则 ： 
 　 　 ( a ) 式 ( 14 ) ， ( 15 ) 满足 稳定性 条件 ， 即 方程 
 1 + Ga ( s ) Gao ( s ) = 0 　 　 　 ( 16 ) 
 无 右半 s 平面 零点 ； 
 　 　 ( b ) 满足 
 　 　 　 　 ( 17 ) 
 式 中 ω v 是 不 存在 加速度 反馈 控制 时 关节 速度 的 闭环 响应 带宽 ， φ 是 给定 的 相位滞后 上限 ； 式 ( 17 ) 将 加速度 反馈 控制 在 速度 闭环 内 产生 的 相位滞后 约束 在 期望 的 范围 之内 ， 以此 达到 几乎 不 影响 速度 闭环 的 要求 ； 
 　 　 ( c ) 满足 
 　 　 　 　 ( 18 ) 
 式 中 ω τ 是 τ n 的 带宽 ， σ ＞ 0 . 式 ( 18 ) 确保 在 动力学 扰动 τ n 的 频带 ［ 0 , ω τ ］ 内 ， 加速度 闭环 对 其 具有 抑制作用 . 
 　 　 满足 上述 三项 准则 的 控制策略 都 可以 用于 加速度 反馈 控制 ， 衡量 加速度 控制 有效性 的 标准 是 它 所 能够 实现 的 对 扰动 的 抑制作用 的 大小 ( 能够 实际 获得 的 σ 值 的 大小 ) . 
 　 　 应该 指出 ， 上述 开环 模型 以及 控制策略 的 设计 准则 都 是 基于 机器人 关节 驱动 单元 是 理想 的 力矩 源 这 一 假设 而 建立 的 . 对于 实际 机器人 系统 ， 这个 假设 通常 是 不 成立 的 . 直接 驱动 关节 一般 采用 力矩电机 作为 驱动 单元 ， 这种 电机 具有 比较 大 的 电枢 电感 ， 对 电流 响应 会 产生 明显 的 滞后 作用 ， 影响 输出 力矩 的 响应 性能 . 虽然 关节 采用 直接 驱动 结构 ， 但 不能 将 驱动 单元 的 动态 特性 简单 地 描述 为 比例 环节 . 因此 ， 在 加速度 的 闭环 频带 内 把 关节 驱动 单元 控制 成为 近似 比例 环节 的 力矩 源 ， 是 实现 加速度 反馈 控制 的 必要条件 . 
 4 　 实验 研究 
 　 　 在 一台 三 自由度 直接 驱动 机器人 ( 见图 4 ) 上 ， 对 本文 分析 作 了 实验 研究 . 这台 机器人 的 三个 关节 都 采用 直流 力矩电机 驱动 ； 由于 电枢 电感 的 影响 ， 它们 的 电流 开环 响应 频带 仅 25Hz . 为此 ， 我们 采用 霍尔 元件 作为 电流 传感器 ， 通过 电流 反馈 控制 克服 电枢 电感 对 电流 响应 的 影响 . 实验 结果表明 ， 电流 闭环 带宽 提高 了 十倍 以上 ， 达到 300Hz ， 在 加速度 反馈 控制 的 频带 内 ， 可以 将 具有 电流 反馈 控制 的 力矩电机 等效 为 力矩 源 . 
 　 　 以 电流 反馈 控制 为 基础 ， 在 这台 机器人 的 三个 关节 上 都 实现 了 加速度 反馈 控制 ， 以下 给出 在 第二 关节 上 的 实验 结果 以 表明 本文 分析 的 正确性 ， 以及 加速度 反馈 控制 的 有效性 . 
 4.1 　 加速度 反馈 控制 的 实验 结果 及 分析 
 
 
 图 4 　 三 自由度 直接 驱动 机器人 本体 
 　 　 关节 加速度 反馈 控制 的 实验 结构 如图 2 所示 ， 为了 显示 加速度 闭环 对 时变 力矩 扰动 的 抑制作用 ， 我们 在 期望 电流 中 叠加 扰动 量 . 由于 电流 闭环 具有 足够 宽 的 响应 频带 ， 所以 与 实际 的 力矩 扰动 τ n 是 等效 的 ， 加速度 闭环 对 的 抑制作用 等价 于 对 τ n 的 抑制 . 
 4.1 . 1 　 加速度 反馈 的 开环 特性 　 　 
 　 　 1 ) 图 5 ， 7 ～ 10 所示 的 频率响应 都 是 用 HP3562A   DYNAMIC   SIGNAL   NALYZER 对 机器人 的 实际 测量 结果 . 图 5 是 加速度 开环 频率响应 1 ) θ af ( s ) / Id ( s ) ( 从 期望 电流 id 到 加速度 传感器 输出 θ 　 ¨ f 的 频率响应 ) ， 其中 第一 谐振 峰 ω r1 ≈ 131Hz , 幅值 r1 ≈ 13dB ， 相位滞后 φ 1 ≈ - 78 ° ； 第二 谐振 峰 ω r2 ≈ 200Hz , 幅值 r2 ≈ 17dB ， 相位滞后 φ 2 ≈ - 180 ° . 据此 综合 出 加速度 反馈 的 开环 模型 为 
 ( 19 ) 
 
 
 图 5 　 加速度 开环 频率响应 θ af ( s ) / Id ( s ) ( 不 存在 加速度 闭环 时 加速度 与 
 扰动 之间 的 频率特性 θ af ( s ) / ( s ) ) 
 
 
 图 6 　 式 ( 20 ) 的 拟合 频率响应 
 　 　 图 6 是 式 ( 19 ) 的 拟合 频率响应 ， 与 图 5 相 比较 ， 表明 式 ( 19 ) 准确 地 描述 了 加速度 开环 频率特性 ， 同时 证明 式 ( 12 ) 这种 四 极点 两 零点 模型 用于 描述 加速度 开环 响应 的 正确性 . 另外 ， 从图 2 可知 ， 图 5 也 是 不 存在 加速度 闭环 时 力矩 扰动 对 加速度 响应 的 影响 . 
 4.1 . 2 　 加速度 反馈 控制 闭环 特性 
 　 　 既然 谐振 效应 是 影响 加速度 闭环 稳定性 的 主要 因素 ， 而 谐振 通常 发生 在 高频 带 ， 因此 ， 加速度 反馈 控制策略 Ga ( s ) 应 具有 低通滤波器 的 特性 . 本文 采用 积分 加一阶 滞后 控制策略 ， 取得 了 良好 的 实验 结果 . 依据 前面 阐述 的 设计 准则 ， 设计 控制策略 
