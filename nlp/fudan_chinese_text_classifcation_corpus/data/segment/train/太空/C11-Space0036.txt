航空工程 与 维修 
 AVIATION   ENGINEERING   &   MAINTENANCE 
 1999 年 　 第 6 期 　 No.6 　 1999 
 
 
 
 单元 化 制造 系统 中 的 有限 能力 调度 
 杨建军 
 Finite   Capacity   Scheduling   in   Cellular   Manufacturing   Systems 
 　 　 在 敏捷 制造 环境 中 ， 产品 的 技术 创新性 、 质量 、 交货 周期 和 价格 是 构成 企业 核心 竞争力 的 要素 。 制造 企业 围绕 着 顾客 订货 种类 和 数量 及 交货 时间 来 有效 地 组织 生产 ， 并 及时 响应 顾客 在 数量 、 品种 或 交货期 的 变化 。 
 　 　 单元 化 制造 系统 是 构成 敏捷 制造 企业 的 最 基本 组织 元素 和 功能 元素 。 是 多 品种 小批量 制造 具有 竞争力 的 组织 方式 ， 是 一种 后 大规模 生产方式 和 订单 驱动 的 制造 系统 。 
 　 　 有限 能力 计划 （ FCS ） 通常 被 认为 是 企业 更好 地 提供 客户服务 和 效益 的 一种 使能 技术 。 特别 是 近十年 ， 有关 有限 能力 调度 方面 研究 工作 正在 引起 广泛 兴趣 。 本文 详细 介绍 了 有限 能力 调度 的 技术 概念 、 原理 和 基本 方法 。 指出 了 在 敏捷 制造 环境 下 的 基于 单元 化 制造 系统 （ CMS ） 中 采用 有限 能力 调度 技术 的 必要性 。 针对 如何 提高 客户 的 服务 和 生产 管理系统 的 操作性 和 效益性 ， 并 结合 MES 概念 在 单元 化 制造 系统 的 实践 ， 介绍 了 一种 基于 活动 网络 的 交互式 有限 能力 调度 方法 和 系统 。 
 　 　 有限 能力 调度 在 敏捷 制造 环境 下 ， 制造 企业 既 要 能够 时刻 关注 自己 企业 的 预留 能力 ， 以便 准确 地 提供 交货 的 预 承诺 。 又 要 了解 顾客 的 需求 变化 或 实际 生产 出现 问题 时 ， 会 怎样 影响 当前 对 顾客 的 承诺 。 同时 必须 经济 而 有效 地 组织 制造 ， 满足 发货 的 要求 。 生产 调度 的 重要性 日益 显露出来 。 
 　 　 生产 调度 问题 具有 复杂性 、 动态 随机性 和 多 目标性 等 特点 。 解决 生产 调度 问题 的 方法 也 可 分为 基于 运筹学 的 方法 （ 如 线性规划 、 动态 规划 、 分枝 定界 等 ） ， 基于 知识 的 智能 调度 方法 （ 如 专家系统 、 神经元网络 、 遗传基因 算法 等 ） ， 以及 在 实际 应用 常常 用到 的 基于 规则 的 方法 （ 如 离散 事件 仿真 ） 等 。 上述 几种 方法 以 不同 形式 应用 于 制造 系统 中 ， 尽管如此 ， 通过 纯理论 的 方法 产生 可 接受 的 调度 的 前景 仍 相当 暗淡 。 
 　 　 在 生产 实际 中 ， 基于 规则 的 方法 常常 用来 解决 调度 和 有限 能力 调度 （ FCS ） 问题 。 有限 能力 计划 阐明 了 能力 的 度量 和 工作 怎样 被 分配 到 到 这个 能力 的 问题 。 
 　 　 最 朴素 的 有限 能力 调度 应该 算是 工厂 调度员 日常 的 工作 方法 ， 他 凭借 经验 、 心算 和 其他 一些 简单 的 方法 来 安排 日常 工作 。 但是 这种 方法 的 利用 价值 是 有限 的 。 因为 ， 通常 人们 的 注意力 仅能 覆盖 少量 的 重要 工种 或 工序 ， 以及 近几天 的 加工 任务 ， 或是 应付 那些 被 顾客 或 销售 指定 关键 的 生产 任务 ； 当 意外 情况 不断 发生 （ 订单 变更 或者 出现 机床 故障 等 ） ， 导致 重新 调整 生产 安排 时 ， 或 当 有 成百上千 个 任务 要 安排 时 ， 即使 最有 经验 的 调度员 也 难以 胜任 。 当前 ， 计算机 工具 已经 被 用来 帮助 进行 这项 复杂 的 能力 分配 工作 。 
 　 　 能力 作为 制造 资源 计划 （ MRP ） 系统 中 的 有效 负荷 模型 ， 是 基于 工作 中心 的 概念 。 在 传统 的 MRP 系统 中 ， 能力 需求 计划 方法 和 技术 是 以 “ 无限 能力 ” 和 工作 中心 的 平均 能力 为 能力 需求 运算 的 假定 前提 ， 既 忽略 了 任务 与 具体 资源 的 关系 ， 也 忽略 了 制造 经济性 、 工装 的 数量 和 物料 的 短缺 对 任务 的 安排 的 影响 。 这种 过份 单纯 的 工作 中心 描述 对于 粗 能力 计划 可能 是 有用 的 。 但是 不能 提供 详细 的 需求 来 满足 车间 调度 、 满足 顾客 交付 要求 。 
 　 　 有限 能力 调度 是 一种 改善 和 克服 上述 问题 的 方法 ， 现有 的 一些 商业系统 能够 提供 有限 能力 调度 功能 ， 即 把 具体 的 资源 和 任务 联系 起来 管理 能力 的 方式 。 另外 ， 在 有限 能力 计划 系统 中 ， 系统 根据 资源 、 订单 和 管理 目标 综合 优化 地来 编制 生产 作业 计划 。 有限 能力 计划 下 的 提前 期是 一个 计算 的 结果 ， 而 不是 像 MRP 计划 系统 那样 是 事先 已知 （ 固定 的 ） 。 从而 避免 了 MRP 系统 实际 运行 中 的 一些 问题 。 这 一点 对 多 品种 小批量 制造 企业 ， 特别 是 项目 型 制造 企业 是 至关重要 的 。 对于 这些 企业 ， 要 获得 MRP 计划 需要 的 精确 的 零件 提前 期是 不 现实 的 。 
 　 　 基于 规则 的 调度 方法 通常 被 用来 实现 有限 能力 调度 。 基于 规则 的 方法 ， 通过 理论 的 归纳 和 经验 的 提取 ， 形成 一个 “ 规则 集 “ ， 本质 上 代替 了 深刻 和 广泛 的 人类 决策 行为 。 
 　 　 仿真 的 观点 ， 预先 的 决策 规则 被 应用 ， 如 “ 选择 具有 最少 剩余 松驰 时间 的 任务 ” 或 “ 选择 具有 同样 工装 的 任务 ” 。 在表面上 ， 这些 规则 都 可能 是 能 达到 潜在 目的 的 合理 决策 。 第一种 情况 目标 是 为了 满足 顾客 的 交货期 ， 第二种 情况 目标 则 明显 是 为了 改善 效益 。 由于 这些 规则 的 作用 是 单调 的 ， 常常 顾此失彼 。 虽然 ， 在实践中 可以 通过 使 规则 系统 具有 更 多 的 适应性 来 应付 系统 这种 两难 的 局面 ， 如 采用 组合 优先 规则 的 方法 。 如果 这样的话 ， 就 意味着 每 一种 例外情况 都 需要 更 多 的 条件 被 加到 规则 中 ， 从而 使 规则 系统 越来越 复杂 。 即使 这样 ， 规则 系统 仍 存在 着 一些 不可避免 的 缺点 ， 如 维护 的 复杂性 、 规则 作用 的 局部性 、 规则 的 不 完整性 和 较差 的 交互性 。 
 基于 活动 网络 的 交互式 决策 支持 方法 
 　 　 采用 基于 活动 网络 的 交互式 决策 支持 方法 可以 改善 和 克服 基于 规则 的 有限 能力 调度 方法 的 局限性 。 这种 方法 具有 比 通过 规则 更 直接 获得 调度 计划 的 能力 。 它 利用 了 可视化 技术 ， 将 自动 调度 计划 生成 和 人工干预 有机 地 结合 起来 。 自动 处理 的 结果 可以 被 调度 人员 方便 的 调整 和 它 同时 可以 方便 的 锁定 那 部分 他们 满意 的 调度 作业 顺序 。 这种 控制 方法 最终 减少 了 重新安排 调度 计划 ， 并 改善 了 围绕 调度 这个 术语 常常 谈到 的 调度 稳定性 或者 叫做 调度 的 鲁棒性 。 
 　 　 将 活动 网络 方法 应用 到 解决 有限 能力 调度 的 交互式 决策 支持 ， 首先 要 解决 制造 任务 及其 任务 间 约束 （ 关系 ） 的 表示 方法 。 在 制造 系统 中 各种 生产 任务 之间 总会 存在 许多 不同 类型 的 约束 关系 ( 如表 1 ) 。 这些 约束 直接 影响 了 每个 零件 的 各个 工序 操作 的 生产流程 安排 顺序 ， 也 同时 影响 了 系统 生产 调度 中 的 优化 决策 ， 因为 生产 调度 的 实质 正是 根据 这些 管理 目标 和 约束条件 寻求 一个 优化 的 作业 安排 结果 。 
 表 1 　 制造 系统 约束 分类 表 
 
 约束 类型 含义 约束 的 性质 说明 / 举例 
 结构 约束 产品 订单 的 配套 关系 使 各 零件 及其 工装 的 生产 和 原材料 的 采购 活动 中有 数量 和 先后顺序 的 约束 要求 强 / 弱 约束 只有 部分 配套 关系 是 必须 遵守 的 强 约束 ； 
 配套 约束 是 MRP 倒排 计算 的 前提条件 之一 
 条件 约束 
 工艺 约束 零件 的 制造 过程 是 按照 工艺 路线 进行 的 ， 因此 工序 任务 间 存在 工艺 规程 方面 的 约束 强 约束 如 零件 的 工艺 路线 和 组合 加工 ； 
 必须 严格遵守 工艺 安排 ， 调度 不能 改变 此 约束 
 条件 约束 
 资源 使用 约束 每个 操作 都 要 使用 一定 的 资源 和 设备 ， 形成 设备 资源 上 的 操作 安排 队列 从而 产生 的 约束 弱 约束 　 
 调度 操作 能 改变 此 约束 ， 而 调度 的 最终 结果 也 正是 资源 使用 队列 约束 
 结果 约束 
 辅助 资源 约束 每个 操作 都 要 占用 一定 的 辅助 资源 ， 形成 辅助 资源 上 操作 占用 安排 队列 从而 产生 的 约束 弱 约束 调度 操作 能 改变 此 约束 ， 而 调度 的 最终 结果 也 正是 辅助 资源 使用 队列 约束 
 结果 约束 
 计划 时间 约束 由于 任务 计划 安排 的 开始 和 结束 时间 要求 而 产生 的 约束 强 / 弱 约束 部分 任务 有 必须 某 天 完成 要求 是 强 约束 
 结果 约束 
 性能 和 管理 
 目标 约束 调度 的 最终 系统 要求 和 管理 目标 对 任务 安排 产生 的 约束 动态 约束 资源 使用 均衡 、 利润 等 
 目标 约束 
 
 　 
 　 　 活动 网络 方法 ， 能够 兼容 产品 配套 表 ( BOM ) 和 操作 表 ( BOO ) 表示 产品 模型 ， 前者 是 MRP 计划 系统 的 基础 ， 后者 则 是 FCS 计划 系统 的 重要 特征 。 通过 BOO 可以 表示 顾客 订单 整个 生命期 所 涉及 的 设计 、 制造 、 发货 等 所有 步骤 （ 活动 ） ， 这一 特点 对 改善 顾客 服务 和 提高 企业 效益 是 至关重要 的 ， 也 使 企业 面向 订单 制造 的 战略 有 了 技术 上 的 保障 。 
 　 　 例如 ， 在 一个 Job － Shop 型 车间 里 有 三个 零件 任务 ， 分别 为 ： A ， B ， C ； 车间 内有 三个 工作 中心 设备 ， 分别 为 ： w1 ， w2 ， w3 ； 三个 零件 的 工艺 路线 和 工序 中 使用 的 资源 分别 为 ： { A1 [ w1 ] ， A2 [ w2 ] ， A3 [ w3 ] } ， { B1 [ w3 ] ， B2 [ w2 ] ， B3 [ w1 ] } ， { C1 [ w1 ] ， C2 [ w2 ] } ； 为了 简化 问题 ， 假设 所有 的 加工 中 没有 使用 辅助 资源 ； 各个 零件 任务 的 优先级 是 相等 的 （ PA = PB = PC ） 。 图 1 是 任务 安排 的 甘特图 。 
 
 图 1 　 任务 安排 的 甘特图 
 　 　 图 2 则 是 该 任务 安排 的 活动 网络图 。 它 不仅 表示 了 各 资源 的 任务 队列 ， 也 表示 了 生产 过程 中 工序 间 的 约束 ， 其中 一些 约束 是 调度 的 条件 ， 而 另 一些则 是 调度 的 结果 ， 约束 的 建立 过程 也 是 调度 决策 的 过程 。 这种 方法 通过 允许 调度员 直接 指派 想要 安排 的 工作 避免 了 描述 上 的 复杂 规则 的 难点 ， 它 允许 调度员 能 灵活 的 处理 情况 ， 可能 提出 最好 的 作业 顺序 。 
 
 图 2 　 活动 网络图 
 　 　 在 实际 生产 中 ， 调度员 通过 常规 的 网络分析 方法 ， 了解 订单 完成 的 关键 路径 、 各项任务 的 最早 与 最晚 开始 时间 ; 以及 当 一个 关键 的 下游 工作 中 设备 突然 出现 故障 时 ， 可以 了解 哪些 任务 与 下游 工作 中心 相关 ， 会 引起 什么 情况 。 交互式 决策 支持 允许 调度 人员 当 需要 时 可 重新安排 工作 ， 从而 避免 了 下游 的 问题 。 一个 基于 规则 的 系统 将 需要 几个 额外 的 层次 规则 来 处理 这种 情况 ， 它 需要 的 大量 的 额外 的 数据 输入 ， 使 系统 有 足够 的 决策 信息 。 
 　 　 另外 ， 基于 活动 网络图 的 方法 ， 可以 方便 地 引入 其他 系统优化 与 分析方法 ， 如 涉动 分析 。 交互式 决策 支持 允许 调度 人员 兼顾 交货期 和 效益 ， 立足于 今天 的 条件 和 今天 的 顾客 需求 ， 并 不 简单 地 依照 一些 事先 定义 的 规则 。 从而 使得 调度 策略 可以 更好 地 适应 调度 环境 和 管理 目标 的 变化 。 
 　 　 交互 决策 支持 依靠 在 调度 中 识别 冲突 的 特点 ， 面 不是 利用 复杂 的 规则 去 企图 解决 或 避免 它 。 冲突 任务 或 有 问题 的 任务 能 通过 人工干预 的 调整 方法 解决 。 虽然 ， 基于 规则 的 系统 同样 不能 排除 人工干预 调度 的 需求 ， 但 在 指导思想 上 希望 在 制订 计划 时 和 维护 计划 时 预防 冲突 的 出现 。 
 CMS 中 的 FCS 应用 
 　 　 值得 指出 的 是 ， 有限 能力 计划 具有 较 好 的 实施 性 和 较 优化 的 性能 ， 特别 适合 单件 与 小批量 制造 环境 。 同时 也 受到 了 问题 规模 的 限制 ， 当 零件 超过 一定 的 数量 时 ， 将 引起 系统 的 性能 将 下降 。 因此 ， 在 实际 的 应用 中 ， 必须 注意 简化 BOM 层次结构 。 单元 化 制造 通常 是 依据 成组技术 原理 ， 将 传统 机群 式 生产 组织 按 产品 再 工程 ， 重新 成 综合 生产组 （ 制造 单元 ） ， 每 一个 生产组 既 是 制造 的 中心 ， 又 是 一个 利润 中心 ， 有 全部 的 管理 职能 ， 甚至 包括 财务 在内 。 与 这样 的 生产组 组成 的 生产 系统 称为 单元 化 制造 系统 。 因此 ， 在 传统 的 车间 构成 和 管理 要素 是 机床 ， 而 在 单元 化 制造 中 ， 整个 单元 是 一个 对外 的 整体 和 管理 要素 。 
 　 　 由于 单元 间 的 生产 协同 的 本质 是 供应链 问题 ， 即使 是 在 一个 工厂 内部 ， 单元 主 驱动力 是 由 相互 的 供求关系 所 决定 。 单元 化 制造 系统 可以 简化 零件 物流 路线 和 减少 生产 准备 时间 、 简化 管理 、 提高 工人 的 熟练程度 ， 从而 提高 生产率 和 零件 质量 ； 有利于 组织 管理 。 它 克服 了 传统 工作 方法 和 工厂 的 工艺 布置 造成 的 庞大 的 管理机构 ， 以及 发货 不 按时 和 交货 时间 过长 等 弊病 。 
 　 　 单元 化 制造 系统 具有 异构 的 控制结构 ， 将 传统 的 多层 递阶 结构 转化 为 更 趋于 平面化 的 分布式 异构 层次结构 （ 图 3 ） 。 单元 化 制造 系统 是 构成 的 分布式 网络化 的 虚拟企业 实践 敏捷 制造 的 基础 。 分布式 网络化 是 实现 企业 多种 柔性 和 敏捷性 的 一种 新 的 制造 系统 概念 和 模式 。 
 　 
 
 图 3 　 分布式 异构 层次结构 
 　 　 因此 ， 采用 单元 化 的 组织 方式 ， 使得 传统 的 组织 方式 下 的 产品 结构 方式 发生变化 ， BOM 由 原来 一个 深层 的 结构 ， 变化 为 一个 更 简单 的 配套 结构 ， 这种 结构 的 简单化 有利于 FCS 技术 的 实施 。 
 　 　 单元 化 制造 系统 概念 的 应用 到 系统 开发 上 很 自然 要 导致 分布式 管理模式 ， 即 单元 化 制造 系统 控制系统 的 自治 性 和 外向 性 ， 所谓 的 自治 性 具有 从 计划 、 调度 到 控制 的 相对 完善 的 功能 ， 由于 单元 化 制造 系统 的 具有 更 高 的 专业化 生产 、 相对 较 小 的 系统 规模 特点 ， 所以 降低生产 规划 和 控制 的 复杂性 ， 方便 采用 我们 提出 的 uMRP ＋ MES 的 CMS 系统结构 。 这里 的 MES 就是 制造执行系统 ， 是 MES 国际 联合会 在 90 年代 开始 推广 的 技术 概念 和 实施 模型 。 而 外向 性则 指 的 是 单元 间 具有 的 协同 功能 ， 正是 这种 协同 性使 多个 不同 的 单元 可以 根据 一个 确定 的 商业 目标 需求 组织 起来 ， 适应 敏捷 制造 的 需求 。 为些 ， 我们 采取 了 图 4 的 蜂巢 系统结构 ， internet 把 不同 的 单元 联系 在 一起 ， 或 与 ERP 等 系统 协同工作 。 
 
 图 4 　 蜂巢 系统结构 
 结束语 
 　 　 单元 化 制造 系统 是 一种 后 大规模 生产方式 和 订单 驱动 的 制造 系统 ， 敏捷 制造 企业 的 基本 构成 要素 。 企业 通过 实施 单元 化 制造 再 工程 ， 增强 了 企业 的 竞争力 。 同时 ， 单元 化 制造 系统 通过 引入 有限 能力 调度 的 技术 概念 ， 使 企业 在 顾客 服务 和 企业 效益 竞争 的 两个 重要 方面 寻求 到 了 平衡 ， 改善 了 企业 的 生存条件 。 基于 活动 网络 方法 的 交互式 决策 系统 为 有效 地 实施 有限 能力 调度 提供 了 技术 的 保障 。 
 　 　 本文 作者 利用 这个 技术 思路 ， 开发 的 “ 制造 经理 “ 计算机辅助 管理软件 已经 应用 于 工业生产 ， 实际 情况 表明 ， 这种 技术 思路 具有 较 好 的 参考 和 应用 价值 。 □ 
 作者 单位 ： 北京航空航天大学 
